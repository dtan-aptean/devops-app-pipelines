trigger: none

variables:
- group: helm-chart-svc-principal-config
- group: new-relic-cli
- name: docker_image_tags
  value: ''

resources:
  repositories:
  - repository: ezpay-backend-services
    type: git
    name: ezpay-backend-services
    ref: refs/heads/master 

  pipelines:
  - pipeline: merchant_portal_static_files
    source: ezpay-merchant-portal-master-build

  - pipeline: payer_portal_static_files
    source: ezpay-payer-portal-master-build

  - pipeline: aptean_pay_js_static_files
    source: aptean-pay-js-master-build  
    
  - pipeline: ezpay-static-assets-master-build
    source: ezpay-static-assets-master-build

stages:
## EZPAY SVCS ##
- stage: TST_Ezpay_Approval
  displayName: TST/PRF - Approval
  
  jobs:
  - deployment: Deploy_All
    displayName: Deploy All
    environment: ezpay-approval-tst

    pool:
      vmImage: 'ubuntu-latest'
      
    strategy:
      runOnce:
        deploy:
          steps:
          - script: echo "TST/PRF - Deploy All Ezpay:" APPROVED

- stage: TST_Ezpay_Helm_Deploy_East
  displayName: TST (EAST) - Ezpay Svcs Helm Deploy
  dependsOn: TST_Ezpay_Approval

  jobs:
  - deployment: Helm_Deploy
    displayName: Helm Deploy
    environment: ezpay-multi-cluster-tst

    pool:
      vmImage: 'ubuntu-latest'

    variables:
    - group: ezpay-tst
    - template: ../ezpay-svcs/helm-variables-tst.yaml

    strategy:
      runOnce:
        deploy:
          steps:
          - template: ../ezpay-svcs/helm-deploy-step.yaml
            parameters:
              serviceConnection: 'AzDevOps-Pipeline-Principal-DEV-TST-STG'
              svcPrincipalClientId: $(SVC_PRINCIPAL_CLIENT_ID_SHR)
              svcPrincipalSecret: $(SVC_PRINCIPAL_SECRET_SHR)
              azureTenantId: $(AZURE_TENANT_ID)
              aksName: $(AKS_NAME)
              aksResourceGroup: $(AKS_RESOURCE_GROUP)
              containerRegistryName: $(CONTAINER_REGISTRY_NAME)
              chartRepositoryName: $(CHART_REPOSITORY_NAME)
              chartName: $(CHART_NAME)
              helmReleaseName: $(HELM_RELEASE_NAME)
              k8sNamespace: $(K8S_NAMESPACE)
              env: $(ENV)
              location: $(LOCATION)
              # Common Configs
              wepayGrpcUrl: $(WEPAY_GRPC_URL)
              wepayBaseUrl: $(WEPAY_BASE_URL)
              wepayUploadBaseUrl: $(WEPAY_UPLOAD_BASE_URL)
              merchantPortalUrl: $(MERCHANT_PORTAL_URL)
              payerPortalUrl: $(PAYER_PORTAL_URL)
              apteanpayJsSdk: $(APTEAN_PAY_JS_SDK)
              serviceBusConnString: $(SB_CONN_STRING)
              wepayApiVersion: $(WEPAY_API_VERSION)
              wepayAppId: $(WEPAY_APP_ID)
              wepayAppToken: $(WEPAY_APP_TOKEN)
              serviceBusEventsTopic: $(SB_PLATFORM_EVENTS_TOPIC)
              serviceBusPlatformEventsTopicConnString: $(SB_PLATFORM_EVENTS_TOPIC_CONN_STRING)
              mongoDbConnString: $(MONGODB_CONN_STRING)
              mongoDbName: $(MONGODB_DB_NAME)
              mongoDbPaymentCancelRetriesCollectionName: $(MONGODB_PAYMENT_CANCEL_RETRIES_COLLECTION)
              mongoDbIdempotencyCollectionName: $(MONGODB_IDEMPOTENCY_COLLECTION)
              mongoDbEzpayApiSvcCollectionName: $(MONGODB_EZPAY_API_SVC_COLLECTION)
              mongoDbEmailNotificationSvcCollectionName: $(MONGODB_EMAIL_NOTIFICATIONS_SVC_COLLECTION)
              mongoDbPaymentsSvcCollectionName: $(MONGODB_PAYMENTS_SVC_COLLECTION)
              mongoDbTxnRecordsSvcCollectionName: $(MONGODB_TXN_RECORDS_SVC_COLLECTION)  
              mongoDbEzpayClaimSvcCollectionName: $(MONGODB_EZPAY_CLAIM_SVC_COLLECTION)
              newRelicCliApiKey: $(NEW_RELIC_CLI_API_KEY)
              newRelicAccountId: $(NEW_RELIC_ACCOUNT_ID)
              newRelicApiKey: $(NEW_RELIC_API_KEY)
              frontDoorId: $(FRONT_DOOR_ID)
              sentryDsn: $(SENTRY_DSN)
              # New Relic Agent Switches
              ezpayApiSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              erpIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              wepayIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              # Cancel Payment Retry Job
              paymentCancelRetryJobImageRepositoryName: $(PAYMENT_CANCEL_RETRY_JOB_IMAGE_REPOSITORY_NAME)
              paymentCancelRetryJobConfigCronSchedule: $(PAYMENT_CANCEL_RETRY_JOB_CRON_SCHEDULE)
              paymentCancelRetryJobConfigSuccessfulJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobConfigFailedJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_FAILED_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobNodeSelectorPool: $(PAYMENT_CANCEL_RETRY_JOB_NODE_SELECTOR_POOL)
              # ACCOUNT BALANCE UPDATE JOB
              acctBalanceJobImageRepositoryName: $(ACCT_BALANCE_JOB_IMAGE_REPOSITORY_NAME)
              acctBalanceJobSuccessfulJobHistoryLimit: $(ACCT_BALANCE_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              acctBalanceJobFailedJobHistoryLimit: $(ACCT_BALANCE_JOB_FAILED_JOB_HISTORY_LIMIT)
              acctBalanceJobCronSchedule: $(ACCT_BALANCE_JOB_CRON_SCHEDULE)
              acctBalanceJobNodeSelectorPool: $(ACCT_BALANCE_JOB_NODE_SELECTOR_POOL)  
              # EZPAY API SVC         
              ezpayApiSvcImageRepositoryName: $(EZPAY_API_SVC_IMAGE_REPOSITORY_NAME)
              ezpayApiSvcReplicas: $(EZPAY_API_SVC_REPLICAS)
              ezpayApiSvcNodeSelectorPool: $(EZPAY_API_SVC_NODE_SELECTOR_POOL)
              ezpayApiSvcResourceLimitsCpu: $(EZPAY_API_SVC_RESOURCE_LIMITS_CPU)
              ezpayApiSvcResourceLimitsMemory: $(EZPAY_API_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayApiSvcResourceRequestsCpu: $(EZPAY_API_SVC_RESOURCE_REQUESTS_CPU)
              ezpayApiSvcResourceRequestsMemory: $(EZPAY_API_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayApiSvcKongIngressUpstreamHostHeader: $(EZPAY_API_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayApiSvcKongIngressClass: $(EZPAY_API_SVC_KONG_INGRESS_CLASS)
              ezpayApiSvcCosdbConnString: $(EZPAY_API_SVC_COSMOSDB_CONN_STRING)
              ezpayApiSvcCosdbDatabase: $(EZPAY_API_SVC_COSMOSDB_DATABASE)
              ezpayApiSvcCosdbContainer: $(EZPAY_API_SVC_COSMOSDB_CONTAINER)
              ezpayApiSvcSbPlatformEventsSubscription: $(EZPAY_API_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayApiSvcAppInsightsKey: $(EZPAY_API_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              ezpayApiSvcB2cClientId: $(EZPAY_API_SVC_B2C_CLIENT_ID)
              ezpayApiSvcB2cDomainHost: $(EZPAY_API_SVC_B2C_DOMAIN_HOST)
              ezpayApiSvcB2cTenantId: $(EZPAY_API_SVC_B2C_TENANT_ID)
              ezpayApiSvcB2cPolicyName: $(EZPAY_API_SVC_B2C_POLICY_NAME)
              ezpayApiSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayApiSvcEzpayClaimSvcGrpcUrl: $(EZPAY_CLAIM_SVC_GRPC_URL)
              ezpayApiSvcSubsMgmtApiKey: $(EZPAY_API_SVC_SUBS_MGMT_API_KEY)
              ezpayApiSvcSubsMgmtServiceId: $(EZPAY_API_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayApiSvcPaymentPlatformFromPhoneNumber: $(PAYMENTS_PLATFORM_FROM_PHONE_NUMBER)
              ezpayApiSvcPaymentPlatformFromEmail: $(EZPAY_API_SVC_PAYMENTS_PLATFORM_FROM_EMAIL)
              ezpayApiSvcProcessPlatformEvents: $(EZPAY_API_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayApiSvcBlobStorageUrl: $(EZPAY_API_SVC_BLOB_STORAGE_URL)
              ezpayApiSvcEncryptPayerUrlToken: $(EZPAY_API_SVC_ENCRYPT_PAYER_URL_TOKEN)
              ezpayApiSvcEncryptKey: $(EZPAY_API_SVC_ENCRYPTION_KEY)
              ezpayApiSvcTosVersion: $(EZPAY_API_SVC_TOS_VERSION)
              ezpayApiSvcStatementsContainerName: $(EZPAY_API_SVC_STATEMENTS_CONTAINER_NAME)
              ezpayApiSvcInvoiceContainerName: $(EZPAY_API_SVC_INVOICE_CONTAINER_NAME)
              ezpayApiSvcInvoiceBlobConnString: $(EZPAY_API_SVC_INVOICE_BLOB_CONNECTION_STRING)
              ezpayApiSvcLogicAppUrlShortenerUrl: $(EZPAY_API_SVC_LOGIC_APP_URL_SHORTENER_URL)
              ezpayApiSvcProductApisOnly: $(EZPAY_API_SVC_PRODUCT_APIS_ONLY)
              ezpayApiSvcGrpcUrl: $(EZPAY_API_SVC_GRPC_URL)
              ezpayApiSvcBroadcastPlatformEvents: $(EZPAY_API_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayApiSvcNewRelicRecordMetricGql: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GQL)
              ezpayApiSvcNewRelicRecordMetricGrpc: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GRPC)
              ezpayApiSvcEzpayCheckoutSvcGrpcUrl: $(GRPC_URL_CHECKOUT_SVC)
              ezpayApiSvcEzpayReportSvcGrpcUrl: $(GRPC_URL_REPORT_SVC)
              # EMAIL NOTIFICATION SVC
              emailNotificationSvcImageRepositoryName: $(EMAIL_NOTIFICATION_SVC_IMAGE_REPOSITORY_NAME)
              emailNotificationSvcReplicas: $(EMAIL_NOTIFICATION_SVC_REPLICAS)
              emailNotificationSvcNodeSelectorPool: $(EMAIL_NOTIFICATION_SVC_NODE_SELECTOR_POOL)
              emailNotificationSvcResourceLimitsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_CPU)
              emailNotificationSvcResourceLimitsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_MEMORY)
              emailNotificationSvcResourceRequestsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_CPU)
              emailNotificationSvcResourceRequestsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_MEMORY)
              emailNotificationSvcDbPlatformEventsSubscription: $(EMAIL_NOTIFICATION_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              emailNotificationSvcAppInsightsKey: $(EMAIL_NOTIFICATION_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              emailNotificationSvcBroadcastPlatformEvents: $(EMAIL_NOTIFICATION_SVC_BROADCAST_PLATFORM_EVENTS)
              emailNotificationSvcEmailTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              emailNotificationSvcPlatformEmail: $(EMAIL_NOTIFICATION_SVC_PLATFORM_EMAIL)
              emailNotificationSvcPlatformName: $(EMAIL_NOTIFICATION_SVC_PLATFORM_NAME)
              emailNotificationSvcProcessPlatformEvents: $(EMAIL_NOTIFICATION_SVC_PROCESS_PLATFORM_EVENTS)
              # ERP INTEGRATION SVC
              erpIntegrationSvcImageRepositoryName: $(ERP_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              erpIntegrationSvcReplicas: $(ERP_INTEGRATION_SVC_REPLICAS)
              erpIntegrationSvcNodeSelectorPool: $(ERP_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              erpIntegrationSvcResourceLimitsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              erpIntegrationSvcResourceLimitsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              erpIntegrationSvcResourceRequestsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              erpIntegrationSvcResourceRequestsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              erpIntegrationSvcKongIngressUpstreamHostHeader: $(ERP_INTEGRATION_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              erpIntegrationSvcKongIngressClass: $(ERP_INTEGRATION_SVC_KONG_INGRESS_CLASS)
              erpIntegrationSvcEzpayApiSvcGqlUrl: $(ERP_INTEGRATION_SVC_GQL_URL_EZPAY_API_SVC)
              erpIntegrationSvcSyncTimeout: $(ERP_INTEGRATION_SVC_SYNC_TIMEOUT)
              erpIntegrationSvcSyncMaxWaitTime: $(ERP_INTEGRATION_SVC_SYNC_MAX_WAIT_TIME)
              # MERCHANT OPS SVC
              merchantOpsSvcImageRepositoryName: $(MERCHANT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              merchantOpsSvcReplicas: $(MERCHANT_OPS_SVC_REPLICAS)
              merchantOpsSvcNodeSelectorPool: $(MERCHANT_OPS_SVC_NODE_SELECTOR_POOL)
              merchantOpsSvcResourceLimitsCpu: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_CPU)
              merchantOpsSvcResourceLimitsMemory: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              merchantOpsSvcResourceRequestsCpu: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              merchantOpsSvcResourceRequestsMemory: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              merchantOpsSvcPlatformEventsSubscription: $(MERCHANT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              merchantOpsSvcEnableAppInsights: $(MERCHANT_OPS_SVC_ENABLE_APP_INSIGHTS)
              merchantOpsSvcEnableK8sAppInsights: $(MERCHANT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)
              # PAYFAC NOTIFICATIONS SVC
              payfacNotificationsSvcImageRepositoryName: $(PAYFAC_NOTIFICATIONS_SVC_IMAGE_REPOSITORY_NAME)
              payfacNotificationsSvcReplicas: $(PAYFAC_NOTIFICATIONS_SVC_REPLICAS)
              payfacNotificationsSvcNodeSelectorPool: $(PAYFAC_NOTIFICATIONS_SVC_NODE_SELECTOR_POOL)
              payfacNotificationsSvcResourceLimitsCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_CPU)
              payfacNotificationsSvcResourceLimitsMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_MEMORY)
              payfacNotificationsSvcResourceRequestCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_CPU)
              payfacNotificationsSvcResourceRequestMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_MEMORY)
              payfacNotificationsSvcSbPayfacTopicConnString: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC_CONN_STRING)
              payfacNotificationsSvcSbPayfacSubscription: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_SUBSCRIPTION)
              payfacNotificationsSvcSbPayfacTopic: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC)
              payfacNotificationsSvcAppInsightsKey: $(PAYFAC_NOTIFICATIONS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              payfacNotificationsSvcEzpayWebhookUrl: $(PAYFAC_NOTIFICATIONS_SVC_EZPAY_WEBHOOK_URL)
              payfacNotificationsSvcProcessPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_PLATFORM_EVENTS)
              payfacNotificationsSvcProcessNotificationEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_NOTIFICATION_EVENTS)
              payfacNotificationsSvcBroadcastPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_BROADCAST_PLATFORM_EVENTS)
              # PAYMENT OPS SVC
              paymentOpsSvcImageRepositoryName: $(PAYMENT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              paymentOpsSvcReplicas: $(PAYMENT_OPS_SVC_REPLICAS)
              paymentOpsSvcNodeSelectorPool: $(PAYMENT_OPS_SVC_NODE_SELECTOR_POOL)
              paymentOpsSvcResourceLimitsCpu: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_CPU)
              paymentOpsSvcResourceLimitsMemory: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentOpsSvcResourceRequestsCpu: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              paymentOpsSvcResourceRequestsMemory: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentOpsSvcSbPlatformEventsSubscription: $(PAYMENT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentOpsSvcSbEmailReqQueueConnString: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbEmailReqQueue: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE)
              paymentOpsSvcSbSmsReqQueueConnString: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbSmsReqQueue: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE)
              paymentOpsSvcEnableAppInsights: $(PAYMENT_OPS_SVC_ENABLE_APP_INSIGHTS)
              paymentOpsSvcEnableK8sAppInsights: $(PAYMENT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # PAYMENTS SVC & PAYMENTS RETRY JOB
              paymentsSvcImageRepositoryName: $(PAYMENTS_SVC_IMAGE_REPOSITORY_NAME)
              paymentsSvcReplicas: $(PAYMENTS_SVC_REPLICAS)
              paymentsSvcNodeSelectorPool: $(PAYMENTS_SVC_NODE_SELECTOR_POOL)
              paymentsSvcResourceLimitsCpu: $(PAYMENTS_SVC_RESOURCE_LIMITS_CPU)
              paymentsSvcResourceLimitsMemory: $(PAYMENTS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentsSvcResourceRequestsCpu: $(PAYMENTS_SVC_RESOURCE_REQUESTS_CPU)
              paymentsSvcResourceRequestsMemory: $(PAYMENTS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentsSvcPlatformEventsSubscription: $(PAYMENTS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentsSvcCronSchedule: $(PAYMENTS_SVC_CRON_SCHEDULE)
              paymentsSvcSuccessfulJobHistoryLimit: $(PAYMENTS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentsSvcFailedJobHistoryLimit: $(PAYMENTS_SVC_FAILED_JOB_HISTORY_LIMIT)
              paymentsSvcEnableAppInsights: $(PAYMENTS_SVC_ENABLE_APP_INSIGHTS)
              paymentsSvcEnableK8sAppInsights: $(PAYMENTS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # TRANSACTION RECORDS SVC & TRANSACTION RECORDS RETRIEVE JOB & TRANSACTION RECORDS STATEMENT JOB               
              txnRecordsSvcImageRepositoryName: $(TXN_RECORDS_SVC_IMAGE_REPOSITORY_NAME)
              txnRecordsSvcReplicas: $(TXN_RECORDS_SVC_REPLICAS)
              txnRecordsSvcNodeSelectorPool: $(TXN_RECORDS_SVC_NODE_SELECTOR_POOL)
              txnRecordsSvcResourceLimitCpu: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_CPU)
              txnRecordsSvcResourceLimitMemory: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_MEMORY)
              txnRecordsSvcResourceRequestCpu: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_CPU)
              txnRecordsSvcResourceRequestMemory: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_MEMORY)
              txnRecordsStmtsResourceLimitCpu: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_CPU)
              txnRecordsStmtsResourceLimitMemory: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_MEMORY)
              txnRecordsStmtsResourceRequestCpu: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_CPU)
              txnRecordsStmtsResourceRequestMemory: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_MEMORY)                
              txnRecordsSvcBroadcastPlatformEvents: $(TXN_RECORDS_SVC_BROADCAST_PLATFORM_EVENTS)
              txnRecordsSvcPlatformEmail: $(TXN_RECORDS_SVC_PLATFORM_EMAIL)
              txnRecordsSvcDbPlatformEventsSubscription: $(TXN_RECORDS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              txnRecordsSvcAppInsightsKey: $(TXN_RECORDS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              txnRecordsSvcProcessPlatformEvents: $(TXN_RECORDS_SVC_PROCESS_PLATFORM_EVENTS)
              txnRecordsSvcStatementsContainer: $(TXN_RECORDS_SVC_STATEMENTS_CONTAINER_NAME)
              txnRecordsSvcStatementPeriod: $(TXN_RECORDS_SVC_STATEMENT_PERIOD)
              txnRecordsSvcStatementsBlobConnString: $(TXN_RECORDS_SVC_STATEMENTS_BLOB_CONNECTION_STRING)
              txnRecordsSvcGeneratePdfStatement: $(TXN_RECORDS_SVC_GENERATE_PDF_STATEMENT)
              txnRecordsSvcGenerateStatementChunkSize: $(TXN_RECORDS_SVC_GENERATE_STATEMENT_CHUNK_SIZE)
              txnRecordsSvcStatementTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              txnRecordsStmtsRetrieveJobCronSchedule: $(TXN_RECORDS_STMTS_RETRIEVE_CRON_SCHEDULE)
              txnRecordsStmntsGenerationJobCronSchedule: $(TXN_RECORDS_STMTS_GENERATION_CRON_SCHEDULE)
              txnRecordsSvcSuccessfulJobHistoryLimit: $(TXN_RECORDS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              txnRecordsSvcFailedJobHistoryLimit: $(TXN_RECORDS_SVC_FAILED_JOB_HISTORY_LIMIT)
              txnRecordsRetrieveJobChunkSize: $(TXN_RECORDS_RETRIEVE_JOB_CHUNK_SIZE)
              # WEPAY INTEGRATION SVC
              wepayIntegrationSvcImageRepositoryName: $(WEPAY_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              wepayIntegrationSvcReplicas: $(WEPAY_INTEGRATION_SVC_REPLICAS)
              wepayIntegrationSvcNodeSelectorPool: $(WEPAY_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              wepayIntegrationSvcResourceLimitsCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              wepayIntegrationSvcResourceLimitsMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              wepayIntegrationSvcResourceRequestCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              wepayIntegrationSvcResourceRequestMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              wepayIntegrationSvcNewRelicRecordMetric: $(WEPAY_INTEGRATION_SVC_NEW_RELIC_RECORD_METRIC)
              wepayIntegrationSvcRequestTimeout: $(WEPAY_INTEGRATION_SVC_REQUEST_TIMEOUT_MS)
              # EZPAY CLAIM SVC
              ezpayClaimSvcImageRepositoryName: $(EZPAY_CLAIM_SVC_IMAGE_REPOSITORY_NAME)
              ezpayClaimSvcReplicas: $(EZPAY_CLAIM_SVC_REPLICAS)
              ezpayClaimSvcNodeSelectorPool: $(EZPAY_CLAIM_SVC_NODE_SELECTOR_POOL)
              ezpayClaimSvcResourceLimitsCpu: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_CPU)
              ezpayClaimSvcResourceLimitsMemory: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayClaimSvcResourceRequestCpu: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_CPU)
              ezpayClaimSvcResourceRequestMemory: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_MEMORY)
              # EZPAY CHECKOUT SVC
              ezpayCheckoutSvcImageRepositoryName: $(EZPAY_CHECKOUT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayCheckoutSvcReplicas: $(EZPAY_CHECKOUT_SVC_REPLICAS)
              ezpayCheckoutSvcNodeSelectorPool: $(EZPAY_CHECKOUT_SVC_NODE_SELECTOR_POOL)
              ezpayCheckoutSvcResourceLimitsCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_CPU)
              ezpayCheckoutSvcResourceLimitsMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayCheckoutSvcResourceRequestCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayCheckoutSvcResourceRequestMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayCheckoutSvcKongIngressUpstreamHostHeader: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayCheckoutSvcKongIngressClass: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_CLASS)
              mongoDbEzpayCheckoutSvcCollectionName: $(MONGODB_EZPAY_CHECKOUT_SVC_COLLECTION)
              ezpayCheckoutSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayCheckoutSvcSubsMgmtApiKey: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_API_KEY)
              ezpayCheckoutSvcSubsMgmtServiceId: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayCheckoutSvcSessionExpiryInterval: $(EZPAY_CHECKOUT_SVC_SESSION_EXPIRY_INTERVAL)
              ezpayCheckoutSvcEzpayApiSvcGqlUrl: $(EZPAY_CHECKOUT_SVC_GQL_URL_EZPAY_API_SVC)
              # EZPAY REPORTS SVC
              ezpayReportSvcImageRepositoryName: $(EZPAY_REPORT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayReportSvcReplicas: $(EZPAY_REPORT_SVC_REPLICAS)
              ezpayReportSvcNodeSelectorPool: $(EZPAY_REPORT_SVC_NODE_SELECTOR_POOL)
              ezpayReportSvcResourceLimitsCpu: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_CPU)
              ezpayReportSvcResourceLimitsMemory: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayReportSvcResourceRequestCpu: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayReportSvcResourceRequestMemory: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_MEMORY)
              mongoDbEzpayReportSvcCollectionName: $(MONGODB_EZPAY_REPORT_SVC_COLLECTION)
              ezpayReportSvcSbPlatformEventsSubscription: $(EZPAY_REPORT_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayReportSvcBroadcastPlatformEvents: $(EZPAY_REPORT_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayReportSvcProcessPlatformEvents: $(EZPAY_REPORT_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayReportSvcBlobUrl: $(EZPAY_REPORT_SVC_BLOB_URL)
              ezpayReportSvcBlobContainer: $(EZPAY_REPORT_SVC_BLOB_CONTAINER)
              ezpayReportSvcBlobConnString: $(EZPAY_REPORT_SVC_BLOB_CONNECTION_STRING)
              ezpayReportSvcBlobSasTokenTtlMinutes: $(EZPAY_REPORT_SVC_BLOB_SAS_TOKEN_TTL_MINUTES)
              ezpayReportSvcReportDocTtlMinutes: $(EZPAY_REPORT_SVC_REPORT_DOC_TTL_MINUTES)

          - template: ../templates/save-tags.yaml
            parameters:
              tagName: 'ezpay_tags' 

- stage: TST_Ezpay_Helm_Deploy_West
  displayName: TST (WEST) - Ezpay Svcs Helm Deploy
  dependsOn: TST_Ezpay_Approval

  jobs:
  - deployment: Helm_Deploy
    displayName: Helm Deploy
    environment: ezpay-multi-cluster-tst

    pool:
      vmImage: 'ubuntu-latest'

    variables:
    - group: ezpay-tst
    - template: ../ezpay-svcs/helm-variables-tst.yaml
    - template: ../ezpay-svcs/region-overrides/helm-variables-tst-west.yaml

    strategy:
      runOnce:
        deploy:
          steps:
          - template: ../ezpay-svcs/helm-deploy-step.yaml
            parameters:
              serviceConnection: 'AzDevOps-Pipeline-Principal-DEV-TST-STG'
              svcPrincipalClientId: $(SVC_PRINCIPAL_CLIENT_ID_SHR)
              svcPrincipalSecret: $(SVC_PRINCIPAL_SECRET_SHR)
              azureTenantId: $(AZURE_TENANT_ID)
              aksName: $(AKS_NAME)
              aksResourceGroup: $(AKS_RESOURCE_GROUP)
              containerRegistryName: $(CONTAINER_REGISTRY_NAME)
              chartRepositoryName: $(CHART_REPOSITORY_NAME)
              chartName: $(CHART_NAME)
              helmReleaseName: $(HELM_RELEASE_NAME)
              k8sNamespace: $(K8S_NAMESPACE)
              env: $(ENV)
              location: $(LOCATION)
              # Common Configs
              wepayGrpcUrl: $(WEPAY_GRPC_URL)
              wepayBaseUrl: $(WEPAY_BASE_URL)
              wepayUploadBaseUrl: $(WEPAY_UPLOAD_BASE_URL)
              merchantPortalUrl: $(MERCHANT_PORTAL_URL)
              payerPortalUrl: $(PAYER_PORTAL_URL)
              apteanpayJsSdk: $(APTEAN_PAY_JS_SDK)
              serviceBusConnString: $(SB_CONN_STRING)
              wepayApiVersion: $(WEPAY_API_VERSION)
              wepayAppId: $(WEPAY_APP_ID)
              wepayAppToken: $(WEPAY_APP_TOKEN)
              serviceBusEventsTopic: $(SB_PLATFORM_EVENTS_TOPIC)
              serviceBusPlatformEventsTopicConnString: $(SB_PLATFORM_EVENTS_TOPIC_CONN_STRING)
              mongoDbConnString: $(MONGODB_CONN_STRING)
              mongoDbName: $(MONGODB_DB_NAME)
              mongoDbPaymentCancelRetriesCollectionName: $(MONGODB_PAYMENT_CANCEL_RETRIES_COLLECTION)
              mongoDbIdempotencyCollectionName: $(MONGODB_IDEMPOTENCY_COLLECTION)
              mongoDbEzpayApiSvcCollectionName: $(MONGODB_EZPAY_API_SVC_COLLECTION)
              mongoDbEmailNotificationSvcCollectionName: $(MONGODB_EMAIL_NOTIFICATIONS_SVC_COLLECTION)
              mongoDbPaymentsSvcCollectionName: $(MONGODB_PAYMENTS_SVC_COLLECTION)
              mongoDbTxnRecordsSvcCollectionName: $(MONGODB_TXN_RECORDS_SVC_COLLECTION)  
              mongoDbEzpayClaimSvcCollectionName: $(MONGODB_EZPAY_CLAIM_SVC_COLLECTION)
              newRelicCliApiKey: $(NEW_RELIC_CLI_API_KEY)
              newRelicAccountId: $(NEW_RELIC_ACCOUNT_ID)
              newRelicApiKey: $(NEW_RELIC_API_KEY)
              frontDoorId: $(FRONT_DOOR_ID)
              sentryDsn: $(SENTRY_DSN)
              # New Relic Agent Switches
              ezpayApiSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              erpIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              wepayIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              # Cancel Payment Retry Job
              paymentCancelRetryJobImageRepositoryName: $(PAYMENT_CANCEL_RETRY_JOB_IMAGE_REPOSITORY_NAME)
              paymentCancelRetryJobConfigCronSchedule: $(PAYMENT_CANCEL_RETRY_JOB_CRON_SCHEDULE)
              paymentCancelRetryJobConfigSuccessfulJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobConfigFailedJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_FAILED_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobNodeSelectorPool: $(PAYMENT_CANCEL_RETRY_JOB_NODE_SELECTOR_POOL)
              # ACCOUNT BALANCE UPDATE JOB
              acctBalanceJobImageRepositoryName: $(ACCT_BALANCE_JOB_IMAGE_REPOSITORY_NAME)
              acctBalanceJobSuccessfulJobHistoryLimit: $(ACCT_BALANCE_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              acctBalanceJobFailedJobHistoryLimit: $(ACCT_BALANCE_JOB_FAILED_JOB_HISTORY_LIMIT)
              acctBalanceJobCronSchedule: $(ACCT_BALANCE_JOB_CRON_SCHEDULE)
              acctBalanceJobNodeSelectorPool: $(ACCT_BALANCE_JOB_NODE_SELECTOR_POOL)  
              # EZPAY API SVC         
              ezpayApiSvcImageRepositoryName: $(EZPAY_API_SVC_IMAGE_REPOSITORY_NAME)
              ezpayApiSvcReplicas: $(EZPAY_API_SVC_REPLICAS)
              ezpayApiSvcNodeSelectorPool: $(EZPAY_API_SVC_NODE_SELECTOR_POOL)
              ezpayApiSvcResourceLimitsCpu: $(EZPAY_API_SVC_RESOURCE_LIMITS_CPU)
              ezpayApiSvcResourceLimitsMemory: $(EZPAY_API_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayApiSvcResourceRequestsCpu: $(EZPAY_API_SVC_RESOURCE_REQUESTS_CPU)
              ezpayApiSvcResourceRequestsMemory: $(EZPAY_API_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayApiSvcKongIngressUpstreamHostHeader: $(EZPAY_API_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayApiSvcKongIngressClass: $(EZPAY_API_SVC_KONG_INGRESS_CLASS)
              ezpayApiSvcCosdbConnString: $(EZPAY_API_SVC_COSMOSDB_CONN_STRING)
              ezpayApiSvcCosdbDatabase: $(EZPAY_API_SVC_COSMOSDB_DATABASE)
              ezpayApiSvcCosdbContainer: $(EZPAY_API_SVC_COSMOSDB_CONTAINER)
              ezpayApiSvcSbPlatformEventsSubscription: $(EZPAY_API_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayApiSvcAppInsightsKey: $(EZPAY_API_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              ezpayApiSvcB2cClientId: $(EZPAY_API_SVC_B2C_CLIENT_ID)
              ezpayApiSvcB2cDomainHost: $(EZPAY_API_SVC_B2C_DOMAIN_HOST)
              ezpayApiSvcB2cTenantId: $(EZPAY_API_SVC_B2C_TENANT_ID)
              ezpayApiSvcB2cPolicyName: $(EZPAY_API_SVC_B2C_POLICY_NAME)
              ezpayApiSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayApiSvcEzpayClaimSvcGrpcUrl: $(EZPAY_CLAIM_SVC_GRPC_URL)
              ezpayApiSvcSubsMgmtApiKey: $(EZPAY_API_SVC_SUBS_MGMT_API_KEY)
              ezpayApiSvcSubsMgmtServiceId: $(EZPAY_API_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayApiSvcPaymentPlatformFromPhoneNumber: $(PAYMENTS_PLATFORM_FROM_PHONE_NUMBER)
              ezpayApiSvcPaymentPlatformFromEmail: $(EZPAY_API_SVC_PAYMENTS_PLATFORM_FROM_EMAIL)
              ezpayApiSvcProcessPlatformEvents: $(EZPAY_API_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayApiSvcBlobStorageUrl: $(EZPAY_API_SVC_BLOB_STORAGE_URL)
              ezpayApiSvcEncryptPayerUrlToken: $(EZPAY_API_SVC_ENCRYPT_PAYER_URL_TOKEN)
              ezpayApiSvcEncryptKey: $(EZPAY_API_SVC_ENCRYPTION_KEY)
              ezpayApiSvcTosVersion: $(EZPAY_API_SVC_TOS_VERSION)
              ezpayApiSvcStatementsContainerName: $(EZPAY_API_SVC_STATEMENTS_CONTAINER_NAME)
              ezpayApiSvcInvoiceContainerName: $(EZPAY_API_SVC_INVOICE_CONTAINER_NAME)
              ezpayApiSvcInvoiceBlobConnString: $(EZPAY_API_SVC_INVOICE_BLOB_CONNECTION_STRING)
              ezpayApiSvcLogicAppUrlShortenerUrl: $(EZPAY_API_SVC_LOGIC_APP_URL_SHORTENER_URL)
              ezpayApiSvcProductApisOnly: $(EZPAY_API_SVC_PRODUCT_APIS_ONLY)
              ezpayApiSvcGrpcUrl: $(EZPAY_API_SVC_GRPC_URL)
              ezpayApiSvcBroadcastPlatformEvents: $(EZPAY_API_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayApiSvcNewRelicRecordMetricGql: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GQL)
              ezpayApiSvcNewRelicRecordMetricGrpc: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GRPC)
              ezpayApiSvcEzpayCheckoutSvcGrpcUrl: $(GRPC_URL_CHECKOUT_SVC)
              ezpayApiSvcEzpayReportSvcGrpcUrl: $(GRPC_URL_REPORT_SVC)
              # EMAIL NOTIFICATION SVC
              emailNotificationSvcImageRepositoryName: $(EMAIL_NOTIFICATION_SVC_IMAGE_REPOSITORY_NAME)
              emailNotificationSvcReplicas: $(EMAIL_NOTIFICATION_SVC_REPLICAS)
              emailNotificationSvcNodeSelectorPool: $(EMAIL_NOTIFICATION_SVC_NODE_SELECTOR_POOL)
              emailNotificationSvcResourceLimitsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_CPU)
              emailNotificationSvcResourceLimitsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_MEMORY)
              emailNotificationSvcResourceRequestsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_CPU)
              emailNotificationSvcResourceRequestsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_MEMORY)
              emailNotificationSvcDbPlatformEventsSubscription: $(EMAIL_NOTIFICATION_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              emailNotificationSvcAppInsightsKey: $(EMAIL_NOTIFICATION_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              emailNotificationSvcBroadcastPlatformEvents: $(EMAIL_NOTIFICATION_SVC_BROADCAST_PLATFORM_EVENTS)
              emailNotificationSvcEmailTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              emailNotificationSvcPlatformEmail: $(EMAIL_NOTIFICATION_SVC_PLATFORM_EMAIL)
              emailNotificationSvcPlatformName: $(EMAIL_NOTIFICATION_SVC_PLATFORM_NAME)
              emailNotificationSvcProcessPlatformEvents: $(EMAIL_NOTIFICATION_SVC_PROCESS_PLATFORM_EVENTS)
              # ERP INTEGRATION SVC
              erpIntegrationSvcImageRepositoryName: $(ERP_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              erpIntegrationSvcReplicas: $(ERP_INTEGRATION_SVC_REPLICAS)
              erpIntegrationSvcNodeSelectorPool: $(ERP_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              erpIntegrationSvcResourceLimitsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              erpIntegrationSvcResourceLimitsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              erpIntegrationSvcResourceRequestsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              erpIntegrationSvcResourceRequestsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              erpIntegrationSvcKongIngressUpstreamHostHeader: $(ERP_INTEGRATION_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              erpIntegrationSvcKongIngressClass: $(ERP_INTEGRATION_SVC_KONG_INGRESS_CLASS)
              erpIntegrationSvcEzpayApiSvcGqlUrl: $(ERP_INTEGRATION_SVC_GQL_URL_EZPAY_API_SVC)
              erpIntegrationSvcSyncTimeout: $(ERP_INTEGRATION_SVC_SYNC_TIMEOUT)
              erpIntegrationSvcSyncMaxWaitTime: $(ERP_INTEGRATION_SVC_SYNC_MAX_WAIT_TIME)
              # MERCHANT OPS SVC
              merchantOpsSvcImageRepositoryName: $(MERCHANT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              merchantOpsSvcReplicas: $(MERCHANT_OPS_SVC_REPLICAS)
              merchantOpsSvcNodeSelectorPool: $(MERCHANT_OPS_SVC_NODE_SELECTOR_POOL)
              merchantOpsSvcResourceLimitsCpu: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_CPU)
              merchantOpsSvcResourceLimitsMemory: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              merchantOpsSvcResourceRequestsCpu: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              merchantOpsSvcResourceRequestsMemory: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              merchantOpsSvcPlatformEventsSubscription: $(MERCHANT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              merchantOpsSvcEnableAppInsights: $(MERCHANT_OPS_SVC_ENABLE_APP_INSIGHTS)
              merchantOpsSvcEnableK8sAppInsights: $(MERCHANT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)
              # PAYFAC NOTIFICATIONS SVC
              payfacNotificationsSvcImageRepositoryName: $(PAYFAC_NOTIFICATIONS_SVC_IMAGE_REPOSITORY_NAME)
              payfacNotificationsSvcReplicas: $(PAYFAC_NOTIFICATIONS_SVC_REPLICAS)
              payfacNotificationsSvcNodeSelectorPool: $(PAYFAC_NOTIFICATIONS_SVC_NODE_SELECTOR_POOL)
              payfacNotificationsSvcResourceLimitsCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_CPU)
              payfacNotificationsSvcResourceLimitsMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_MEMORY)
              payfacNotificationsSvcResourceRequestCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_CPU)
              payfacNotificationsSvcResourceRequestMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_MEMORY)
              payfacNotificationsSvcSbPayfacTopicConnString: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC_CONN_STRING)
              payfacNotificationsSvcSbPayfacSubscription: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_SUBSCRIPTION)
              payfacNotificationsSvcSbPayfacTopic: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC)
              payfacNotificationsSvcAppInsightsKey: $(PAYFAC_NOTIFICATIONS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              payfacNotificationsSvcEzpayWebhookUrl: $(PAYFAC_NOTIFICATIONS_SVC_EZPAY_WEBHOOK_URL)
              payfacNotificationsSvcProcessPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_PLATFORM_EVENTS)
              payfacNotificationsSvcProcessNotificationEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_NOTIFICATION_EVENTS)
              payfacNotificationsSvcBroadcastPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_BROADCAST_PLATFORM_EVENTS)
              # PAYMENT OPS SVC
              paymentOpsSvcImageRepositoryName: $(PAYMENT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              paymentOpsSvcReplicas: $(PAYMENT_OPS_SVC_REPLICAS)
              paymentOpsSvcNodeSelectorPool: $(PAYMENT_OPS_SVC_NODE_SELECTOR_POOL)
              paymentOpsSvcResourceLimitsCpu: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_CPU)
              paymentOpsSvcResourceLimitsMemory: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentOpsSvcResourceRequestsCpu: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              paymentOpsSvcResourceRequestsMemory: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentOpsSvcSbPlatformEventsSubscription: $(PAYMENT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentOpsSvcSbEmailReqQueueConnString: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbEmailReqQueue: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE)
              paymentOpsSvcSbSmsReqQueueConnString: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbSmsReqQueue: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE)
              paymentOpsSvcEnableAppInsights: $(PAYMENT_OPS_SVC_ENABLE_APP_INSIGHTS)
              paymentOpsSvcEnableK8sAppInsights: $(PAYMENT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # PAYMENTS SVC & PAYMENTS RETRY JOB
              paymentsSvcImageRepositoryName: $(PAYMENTS_SVC_IMAGE_REPOSITORY_NAME)
              paymentsSvcReplicas: $(PAYMENTS_SVC_REPLICAS)
              paymentsSvcNodeSelectorPool: $(PAYMENTS_SVC_NODE_SELECTOR_POOL)
              paymentsSvcResourceLimitsCpu: $(PAYMENTS_SVC_RESOURCE_LIMITS_CPU)
              paymentsSvcResourceLimitsMemory: $(PAYMENTS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentsSvcResourceRequestsCpu: $(PAYMENTS_SVC_RESOURCE_REQUESTS_CPU)
              paymentsSvcResourceRequestsMemory: $(PAYMENTS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentsSvcPlatformEventsSubscription: $(PAYMENTS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentsSvcCronSchedule: $(PAYMENTS_SVC_CRON_SCHEDULE)
              paymentsSvcSuccessfulJobHistoryLimit: $(PAYMENTS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentsSvcFailedJobHistoryLimit: $(PAYMENTS_SVC_FAILED_JOB_HISTORY_LIMIT)
              paymentsSvcEnableAppInsights: $(PAYMENTS_SVC_ENABLE_APP_INSIGHTS)
              paymentsSvcEnableK8sAppInsights: $(PAYMENTS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # TRANSACTION RECORDS SVC & TRANSACTION RECORDS RETRIEVE JOB & TRANSACTION RECORDS STATEMENT JOB               
              txnRecordsSvcImageRepositoryName: $(TXN_RECORDS_SVC_IMAGE_REPOSITORY_NAME)
              txnRecordsSvcReplicas: $(TXN_RECORDS_SVC_REPLICAS)
              txnRecordsSvcNodeSelectorPool: $(TXN_RECORDS_SVC_NODE_SELECTOR_POOL)
              txnRecordsSvcResourceLimitCpu: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_CPU)
              txnRecordsSvcResourceLimitMemory: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_MEMORY)
              txnRecordsSvcResourceRequestCpu: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_CPU)
              txnRecordsSvcResourceRequestMemory: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_MEMORY)
              txnRecordsStmtsResourceLimitCpu: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_CPU)
              txnRecordsStmtsResourceLimitMemory: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_MEMORY)
              txnRecordsStmtsResourceRequestCpu: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_CPU)
              txnRecordsStmtsResourceRequestMemory: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_MEMORY)                
              txnRecordsSvcBroadcastPlatformEvents: $(TXN_RECORDS_SVC_BROADCAST_PLATFORM_EVENTS)
              txnRecordsSvcPlatformEmail: $(TXN_RECORDS_SVC_PLATFORM_EMAIL)
              txnRecordsSvcDbPlatformEventsSubscription: $(TXN_RECORDS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              txnRecordsSvcAppInsightsKey: $(TXN_RECORDS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              txnRecordsSvcProcessPlatformEvents: $(TXN_RECORDS_SVC_PROCESS_PLATFORM_EVENTS)
              txnRecordsSvcStatementsContainer: $(TXN_RECORDS_SVC_STATEMENTS_CONTAINER_NAME)
              txnRecordsSvcStatementPeriod: $(TXN_RECORDS_SVC_STATEMENT_PERIOD)
              txnRecordsSvcStatementsBlobConnString: $(TXN_RECORDS_SVC_STATEMENTS_BLOB_CONNECTION_STRING)
              txnRecordsSvcGeneratePdfStatement: $(TXN_RECORDS_SVC_GENERATE_PDF_STATEMENT)
              txnRecordsSvcGenerateStatementChunkSize: $(TXN_RECORDS_SVC_GENERATE_STATEMENT_CHUNK_SIZE)
              txnRecordsSvcStatementTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              txnRecordsSvcCronSchedule: $(TXN_RECORDS_SVC_CRON_SCHEDULE)
              txnRecordsSvcSuccessfulJobHistoryLimit: $(TXN_RECORDS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              txnRecordsSvcFailedJobHistoryLimit: $(TXN_RECORDS_SVC_FAILED_JOB_HISTORY_LIMIT)
              txnRecordsRetrieveJobChunkSize: $(TXN_RECORDS_RETRIEVE_JOB_CHUNK_SIZE)
              # WEPAY INTEGRATION SVC
              wepayIntegrationSvcImageRepositoryName: $(WEPAY_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              wepayIntegrationSvcReplicas: $(WEPAY_INTEGRATION_SVC_REPLICAS)
              wepayIntegrationSvcNodeSelectorPool: $(WEPAY_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              wepayIntegrationSvcResourceLimitsCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              wepayIntegrationSvcResourceLimitsMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              wepayIntegrationSvcResourceRequestCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              wepayIntegrationSvcResourceRequestMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              wepayIntegrationSvcNewRelicRecordMetric: $(WEPAY_INTEGRATION_SVC_NEW_RELIC_RECORD_METRIC)
              wepayIntegrationSvcRequestTimeout: $(WEPAY_INTEGRATION_SVC_REQUEST_TIMEOUT_MS)
              # EZPAY CLAIM SVC
              ezpayClaimSvcImageRepositoryName: $(EZPAY_CLAIM_SVC_IMAGE_REPOSITORY_NAME)
              ezpayClaimSvcReplicas: $(EZPAY_CLAIM_SVC_REPLICAS)
              ezpayClaimSvcNodeSelectorPool: $(EZPAY_CLAIM_SVC_NODE_SELECTOR_POOL)
              ezpayClaimSvcResourceLimitsCpu: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_CPU)
              ezpayClaimSvcResourceLimitsMemory: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayClaimSvcResourceRequestCpu: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_CPU)
              ezpayClaimSvcResourceRequestMemory: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_MEMORY)
              # EZPAY CHECKOUT SVC
              ezpayCheckoutSvcImageRepositoryName: $(EZPAY_CHECKOUT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayCheckoutSvcReplicas: $(EZPAY_CHECKOUT_SVC_REPLICAS)
              ezpayCheckoutSvcNodeSelectorPool: $(EZPAY_CHECKOUT_SVC_NODE_SELECTOR_POOL)
              ezpayCheckoutSvcResourceLimitsCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_CPU)
              ezpayCheckoutSvcResourceLimitsMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayCheckoutSvcResourceRequestCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayCheckoutSvcResourceRequestMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayCheckoutSvcKongIngressUpstreamHostHeader: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayCheckoutSvcKongIngressClass: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_CLASS)
              mongoDbEzpayCheckoutSvcCollectionName: $(MONGODB_EZPAY_CHECKOUT_SVC_COLLECTION)
              ezpayCheckoutSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayCheckoutSvcSubsMgmtApiKey: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_API_KEY)
              ezpayCheckoutSvcSubsMgmtServiceId: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayCheckoutSvcSessionExpiryInterval: $(EZPAY_CHECKOUT_SVC_SESSION_EXPIRY_INTERVAL)
              ezpayCheckoutSvcEzpayApiSvcGqlUrl: $(EZPAY_CHECKOUT_SVC_GQL_URL_EZPAY_API_SVC)
              # EZPAY REPORTS SVC
              ezpayReportSvcImageRepositoryName: $(EZPAY_REPORT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayReportSvcReplicas: $(EZPAY_REPORT_SVC_REPLICAS)
              ezpayReportSvcNodeSelectorPool: $(EZPAY_REPORT_SVC_NODE_SELECTOR_POOL)
              ezpayReportSvcResourceLimitsCpu: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_CPU)
              ezpayReportSvcResourceLimitsMemory: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayReportSvcResourceRequestCpu: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayReportSvcResourceRequestMemory: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_MEMORY)
              mongoDbEzpayReportSvcCollectionName: $(MONGODB_EZPAY_REPORT_SVC_COLLECTION)
              ezpayReportSvcSbPlatformEventsSubscription: $(EZPAY_REPORT_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayReportSvcBroadcastPlatformEvents: $(EZPAY_REPORT_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayReportSvcProcessPlatformEvents: $(EZPAY_REPORT_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayReportSvcBlobUrl: $(EZPAY_REPORT_SVC_BLOB_URL)
              ezpayReportSvcBlobContainer: $(EZPAY_REPORT_SVC_BLOB_CONTAINER)
              ezpayReportSvcBlobConnString: $(EZPAY_REPORT_SVC_BLOB_CONNECTION_STRING)
              ezpayReportSvcBlobSasTokenTtlMinutes: $(EZPAY_REPORT_SVC_BLOB_SAS_TOKEN_TTL_MINUTES)
              ezpayReportSvcReportDocTtlMinutes: $(EZPAY_REPORT_SVC_REPORT_DOC_TTL_MINUTES)

          - template: ../templates/save-tags.yaml
            parameters:
              tagName: 'ezpay_tags'               

- stage: TST_Merchant_Portal_Deploy
  displayName: TST - Merchant Portal Deployment
  dependsOn: TST_Ezpay_Approval

  jobs:
    - template: ../templates/deploy-ezpay-static.yaml
      parameters:
        variableGroup: ezpay-merchant-tst
        targetEnvironment: ezpay-merchant-tst
        dropArtifactPath: $(Pipeline.Workspace)/merchant_portal_static_files/drop/tst.zip
        azureServiceConnection: AzDevOps-Pipeline-Principal-DEV-TST-STG

- stage: TST_Payer_Portal_Deploy
  displayName: TST - Payer Portal Deployment
  dependsOn: TST_Ezpay_Approval

  jobs:
    - template: ../templates/deploy-ezpay-static.yaml
      parameters:
        variableGroup: ezpay-payer-tst
        targetEnvironment: ezpay-payer-tst
        dropArtifactPath: $(Pipeline.Workspace)/payer_portal_static_files/drop/tst.zip
        azureServiceConnection: AzDevOps-Pipeline-Principal-DEV-TST-STG

- stage: TST_Static_Assets_Deploy
  displayName: TST Static Assets Deploy
  dependsOn: TST_Ezpay_Approval

  jobs:
  - template: static-assets/azp-yaml/templates/ezpay-static-assets-deployment-job.yaml@ezpay-backend-services
    parameters:
      environment: ezpay-static-tst
      serviceConnection: AzDevOps-Pipeline-Principal-DEV-TST-STG
      storageAccount: stezpaytenantfilestst001

- stage: TST_Aptean_Pay_Js_Library_Deploy
  displayName: TST - Aptean Pay JS Library Deployment
  dependsOn: TST_Ezpay_Approval

  jobs:
    - template: ../templates/deploy-ezpay-static.yaml
      parameters:
        variableGroup: apteanpay-js-lib-tst
        targetEnvironment: apteanpay-js-tst
        dropArtifactPath: $(Pipeline.Workspace)/aptean_pay_js_static_files/drop/tst.zip
        azureServiceConnection: AzDevOps-Pipeline-Principal-DEV-TST-STG

- stage: PRF_Ezpay_Helm_Deploy_East
  displayName: PRF (EAST) - Ezpay Svcs Helm Deploy
  dependsOn: TST_Ezpay_Approval

  jobs:
  - deployment: Helm_Deploy
    displayName: Helm Deploy
    environment: ezpay-multi-cluster-prf

    pool:
      vmImage: 'ubuntu-latest'

    variables:
    - group: ezpay-prf
    - template: ../ezpay-svcs/helm-variables-prf.yaml

    strategy:
      runOnce:
        deploy:
          steps:
          - template: ../ezpay-svcs/helm-deploy-step.yaml
            parameters:
              serviceConnection: 'AzDevOps-Pipeline-Principal-DEV-TST-STG'
              svcPrincipalClientId: $(SVC_PRINCIPAL_CLIENT_ID_SHR)
              svcPrincipalSecret: $(SVC_PRINCIPAL_SECRET_SHR)
              azureTenantId: $(AZURE_TENANT_ID)
              aksName: $(AKS_NAME)
              aksResourceGroup: $(AKS_RESOURCE_GROUP)
              containerRegistryName: $(CONTAINER_REGISTRY_NAME)
              chartRepositoryName: $(CHART_REPOSITORY_NAME)
              chartName: $(CHART_NAME)
              helmReleaseName: $(HELM_RELEASE_NAME)
              k8sNamespace: $(K8S_NAMESPACE)
              env: $(ENV)
              location: $(LOCATION)
              # Common Configs
              wepayGrpcUrl: $(WEPAY_GRPC_URL)
              wepayBaseUrl: $(WEPAY_BASE_URL)
              wepayUploadBaseUrl: $(WEPAY_UPLOAD_BASE_URL)
              merchantPortalUrl: $(MERCHANT_PORTAL_URL)
              payerPortalUrl: $(PAYER_PORTAL_URL)
              apteanpayJsSdk: $(APTEAN_PAY_JS_SDK)
              serviceBusConnString: $(SB_CONN_STRING)
              wepayApiVersion: $(WEPAY_API_VERSION)
              wepayAppId: $(WEPAY_APP_ID)
              wepayAppToken: $(WEPAY_APP_TOKEN)
              serviceBusEventsTopic: $(SB_PLATFORM_EVENTS_TOPIC)
              serviceBusPlatformEventsTopicConnString: $(SB_PLATFORM_EVENTS_TOPIC_CONN_STRING)
              mongoDbConnString: $(MONGODB_CONN_STRING)
              mongoDbName: $(MONGODB_DB_NAME)
              mongoDbPaymentCancelRetriesCollectionName: $(MONGODB_PAYMENT_CANCEL_RETRIES_COLLECTION)
              mongoDbIdempotencyCollectionName: $(MONGODB_IDEMPOTENCY_COLLECTION)
              mongoDbEzpayApiSvcCollectionName: $(MONGODB_EZPAY_API_SVC_COLLECTION)
              mongoDbEmailNotificationSvcCollectionName: $(MONGODB_EMAIL_NOTIFICATIONS_SVC_COLLECTION)
              mongoDbPaymentsSvcCollectionName: $(MONGODB_PAYMENTS_SVC_COLLECTION)
              mongoDbTxnRecordsSvcCollectionName: $(MONGODB_TXN_RECORDS_SVC_COLLECTION)  
              mongoDbEzpayClaimSvcCollectionName: $(MONGODB_EZPAY_CLAIM_SVC_COLLECTION)
              newRelicCliApiKey: $(NEW_RELIC_CLI_API_KEY)
              newRelicAccountId: $(NEW_RELIC_ACCOUNT_ID)
              newRelicApiKey: $(NEW_RELIC_API_KEY)
              frontDoorId: $(FRONT_DOOR_ID)
              sentryDsn: $(SENTRY_DSN)
              # New Relic Agent Switches
              ezpayApiSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              erpIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              wepayIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              # Cancel Payment Retry Job
              paymentCancelRetryJobImageRepositoryName: $(PAYMENT_CANCEL_RETRY_JOB_IMAGE_REPOSITORY_NAME)
              paymentCancelRetryJobConfigCronSchedule: $(PAYMENT_CANCEL_RETRY_JOB_CRON_SCHEDULE)
              paymentCancelRetryJobConfigSuccessfulJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobConfigFailedJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_FAILED_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobNodeSelectorPool: $(PAYMENT_CANCEL_RETRY_JOB_NODE_SELECTOR_POOL)
              # ACCOUNT BALANCE UPDATE JOB
              acctBalanceJobImageRepositoryName: $(ACCT_BALANCE_JOB_IMAGE_REPOSITORY_NAME)
              acctBalanceJobSuccessfulJobHistoryLimit: $(ACCT_BALANCE_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              acctBalanceJobFailedJobHistoryLimit: $(ACCT_BALANCE_JOB_FAILED_JOB_HISTORY_LIMIT)
              acctBalanceJobCronSchedule: $(ACCT_BALANCE_JOB_CRON_SCHEDULE)
              acctBalanceJobNodeSelectorPool: $(ACCT_BALANCE_JOB_NODE_SELECTOR_POOL)  
              # EZPAY API SVC         
              ezpayApiSvcImageRepositoryName: $(EZPAY_API_SVC_IMAGE_REPOSITORY_NAME)
              ezpayApiSvcReplicas: $(EZPAY_API_SVC_REPLICAS)
              ezpayApiSvcNodeSelectorPool: $(EZPAY_API_SVC_NODE_SELECTOR_POOL)
              ezpayApiSvcResourceLimitsCpu: $(EZPAY_API_SVC_RESOURCE_LIMITS_CPU)
              ezpayApiSvcResourceLimitsMemory: $(EZPAY_API_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayApiSvcResourceRequestsCpu: $(EZPAY_API_SVC_RESOURCE_REQUESTS_CPU)
              ezpayApiSvcResourceRequestsMemory: $(EZPAY_API_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayApiSvcKongIngressUpstreamHostHeader: $(EZPAY_API_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayApiSvcKongIngressClass: $(EZPAY_API_SVC_KONG_INGRESS_CLASS)
              ezpayApiSvcCosdbConnString: $(EZPAY_API_SVC_COSMOSDB_CONN_STRING)
              ezpayApiSvcCosdbDatabase: $(EZPAY_API_SVC_COSMOSDB_DATABASE)
              ezpayApiSvcCosdbContainer: $(EZPAY_API_SVC_COSMOSDB_CONTAINER)
              ezpayApiSvcSbPlatformEventsSubscription: $(EZPAY_API_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayApiSvcAppInsightsKey: $(EZPAY_API_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              ezpayApiSvcB2cClientId: $(EZPAY_API_SVC_B2C_CLIENT_ID)
              ezpayApiSvcB2cDomainHost: $(EZPAY_API_SVC_B2C_DOMAIN_HOST)
              ezpayApiSvcB2cTenantId: $(EZPAY_API_SVC_B2C_TENANT_ID)
              ezpayApiSvcB2cPolicyName: $(EZPAY_API_SVC_B2C_POLICY_NAME)
              ezpayApiSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayApiSvcEzpayClaimSvcGrpcUrl: $(EZPAY_CLAIM_SVC_GRPC_URL)
              ezpayApiSvcSubsMgmtApiKey: $(EZPAY_API_SVC_SUBS_MGMT_API_KEY)
              ezpayApiSvcSubsMgmtServiceId: $(EZPAY_API_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayApiSvcPaymentPlatformFromPhoneNumber: $(PAYMENTS_PLATFORM_FROM_PHONE_NUMBER)
              ezpayApiSvcPaymentPlatformFromEmail: $(EZPAY_API_SVC_PAYMENTS_PLATFORM_FROM_EMAIL)
              ezpayApiSvcProcessPlatformEvents: $(EZPAY_API_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayApiSvcBlobStorageUrl: $(EZPAY_API_SVC_BLOB_STORAGE_URL)
              ezpayApiSvcEncryptPayerUrlToken: $(EZPAY_API_SVC_ENCRYPT_PAYER_URL_TOKEN)
              ezpayApiSvcEncryptKey: $(EZPAY_API_SVC_ENCRYPTION_KEY)
              ezpayApiSvcTosVersion: $(EZPAY_API_SVC_TOS_VERSION)
              ezpayApiSvcStatementsContainerName: $(EZPAY_API_SVC_STATEMENTS_CONTAINER_NAME)
              ezpayApiSvcInvoiceContainerName: $(EZPAY_API_SVC_INVOICE_CONTAINER_NAME)
              ezpayApiSvcInvoiceBlobConnString: $(EZPAY_API_SVC_INVOICE_BLOB_CONNECTION_STRING)
              ezpayApiSvcLogicAppUrlShortenerUrl: $(EZPAY_API_SVC_LOGIC_APP_URL_SHORTENER_URL)
              ezpayApiSvcProductApisOnly: $(EZPAY_API_SVC_PRODUCT_APIS_ONLY)
              ezpayApiSvcGrpcUrl: $(EZPAY_API_SVC_GRPC_URL)
              ezpayApiSvcBroadcastPlatformEvents: $(EZPAY_API_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayApiSvcNewRelicRecordMetricGql: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GQL)
              ezpayApiSvcNewRelicRecordMetricGrpc: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GRPC)
              ezpayApiSvcEzpayCheckoutSvcGrpcUrl: $(GRPC_URL_CHECKOUT_SVC)
              ezpayApiSvcEzpayReportSvcGrpcUrl: $(GRPC_URL_REPORT_SVC)
              # EMAIL NOTIFICATION SVC
              emailNotificationSvcImageRepositoryName: $(EMAIL_NOTIFICATION_SVC_IMAGE_REPOSITORY_NAME)
              emailNotificationSvcReplicas: $(EMAIL_NOTIFICATION_SVC_REPLICAS)
              emailNotificationSvcNodeSelectorPool: $(EMAIL_NOTIFICATION_SVC_NODE_SELECTOR_POOL)
              emailNotificationSvcResourceLimitsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_CPU)
              emailNotificationSvcResourceLimitsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_MEMORY)
              emailNotificationSvcResourceRequestsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_CPU)
              emailNotificationSvcResourceRequestsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_MEMORY)
              emailNotificationSvcDbPlatformEventsSubscription: $(EMAIL_NOTIFICATION_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              emailNotificationSvcAppInsightsKey: $(EMAIL_NOTIFICATION_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              emailNotificationSvcBroadcastPlatformEvents: $(EMAIL_NOTIFICATION_SVC_BROADCAST_PLATFORM_EVENTS)
              emailNotificationSvcEmailTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              emailNotificationSvcPlatformEmail: $(EMAIL_NOTIFICATION_SVC_PLATFORM_EMAIL)
              emailNotificationSvcPlatformName: $(EMAIL_NOTIFICATION_SVC_PLATFORM_NAME)
              emailNotificationSvcProcessPlatformEvents: $(EMAIL_NOTIFICATION_SVC_PROCESS_PLATFORM_EVENTS)
              # ERP INTEGRATION SVC
              erpIntegrationSvcImageRepositoryName: $(ERP_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              erpIntegrationSvcReplicas: $(ERP_INTEGRATION_SVC_REPLICAS)
              erpIntegrationSvcNodeSelectorPool: $(ERP_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              erpIntegrationSvcResourceLimitsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              erpIntegrationSvcResourceLimitsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              erpIntegrationSvcResourceRequestsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              erpIntegrationSvcResourceRequestsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              erpIntegrationSvcKongIngressUpstreamHostHeader: $(ERP_INTEGRATION_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              erpIntegrationSvcKongIngressClass: $(ERP_INTEGRATION_SVC_KONG_INGRESS_CLASS)
              erpIntegrationSvcEzpayApiSvcGqlUrl: $(ERP_INTEGRATION_SVC_GQL_URL_EZPAY_API_SVC)
              erpIntegrationSvcSyncTimeout: $(ERP_INTEGRATION_SVC_SYNC_TIMEOUT)
              erpIntegrationSvcSyncMaxWaitTime: $(ERP_INTEGRATION_SVC_SYNC_MAX_WAIT_TIME)
              # MERCHANT OPS SVC
              merchantOpsSvcImageRepositoryName: $(MERCHANT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              merchantOpsSvcReplicas: $(MERCHANT_OPS_SVC_REPLICAS)
              merchantOpsSvcNodeSelectorPool: $(MERCHANT_OPS_SVC_NODE_SELECTOR_POOL)
              merchantOpsSvcResourceLimitsCpu: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_CPU)
              merchantOpsSvcResourceLimitsMemory: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              merchantOpsSvcResourceRequestsCpu: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              merchantOpsSvcResourceRequestsMemory: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              merchantOpsSvcPlatformEventsSubscription: $(MERCHANT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              merchantOpsSvcEnableAppInsights: $(MERCHANT_OPS_SVC_ENABLE_APP_INSIGHTS)
              merchantOpsSvcEnableK8sAppInsights: $(MERCHANT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)
              # PAYFAC NOTIFICATIONS SVC
              payfacNotificationsSvcImageRepositoryName: $(PAYFAC_NOTIFICATIONS_SVC_IMAGE_REPOSITORY_NAME)
              payfacNotificationsSvcReplicas: $(PAYFAC_NOTIFICATIONS_SVC_REPLICAS)
              payfacNotificationsSvcNodeSelectorPool: $(PAYFAC_NOTIFICATIONS_SVC_NODE_SELECTOR_POOL)
              payfacNotificationsSvcResourceLimitsCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_CPU)
              payfacNotificationsSvcResourceLimitsMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_MEMORY)
              payfacNotificationsSvcResourceRequestCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_CPU)
              payfacNotificationsSvcResourceRequestMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_MEMORY)
              payfacNotificationsSvcSbPayfacTopicConnString: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC_CONN_STRING)
              payfacNotificationsSvcSbPayfacSubscription: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_SUBSCRIPTION)
              payfacNotificationsSvcSbPayfacTopic: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC)
              payfacNotificationsSvcAppInsightsKey: $(PAYFAC_NOTIFICATIONS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              payfacNotificationsSvcEzpayWebhookUrl: $(PAYFAC_NOTIFICATIONS_SVC_EZPAY_WEBHOOK_URL)
              payfacNotificationsSvcProcessPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_PLATFORM_EVENTS)
              payfacNotificationsSvcProcessNotificationEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_NOTIFICATION_EVENTS)
              payfacNotificationsSvcBroadcastPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_BROADCAST_PLATFORM_EVENTS)
              # PAYMENT OPS SVC
              paymentOpsSvcImageRepositoryName: $(PAYMENT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              paymentOpsSvcReplicas: $(PAYMENT_OPS_SVC_REPLICAS)
              paymentOpsSvcNodeSelectorPool: $(PAYMENT_OPS_SVC_NODE_SELECTOR_POOL)
              paymentOpsSvcResourceLimitsCpu: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_CPU)
              paymentOpsSvcResourceLimitsMemory: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentOpsSvcResourceRequestsCpu: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              paymentOpsSvcResourceRequestsMemory: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentOpsSvcSbPlatformEventsSubscription: $(PAYMENT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentOpsSvcSbEmailReqQueueConnString: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbEmailReqQueue: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE)
              paymentOpsSvcSbSmsReqQueueConnString: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbSmsReqQueue: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE)
              paymentOpsSvcEnableAppInsights: $(PAYMENT_OPS_SVC_ENABLE_APP_INSIGHTS)
              paymentOpsSvcEnableK8sAppInsights: $(PAYMENT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # PAYMENTS SVC & PAYMENTS RETRY JOB
              paymentsSvcImageRepositoryName: $(PAYMENTS_SVC_IMAGE_REPOSITORY_NAME)
              paymentsSvcReplicas: $(PAYMENTS_SVC_REPLICAS)
              paymentsSvcNodeSelectorPool: $(PAYMENTS_SVC_NODE_SELECTOR_POOL)
              paymentsSvcResourceLimitsCpu: $(PAYMENTS_SVC_RESOURCE_LIMITS_CPU)
              paymentsSvcResourceLimitsMemory: $(PAYMENTS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentsSvcResourceRequestsCpu: $(PAYMENTS_SVC_RESOURCE_REQUESTS_CPU)
              paymentsSvcResourceRequestsMemory: $(PAYMENTS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentsSvcPlatformEventsSubscription: $(PAYMENTS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentsSvcCronSchedule: $(PAYMENTS_SVC_CRON_SCHEDULE)
              paymentsSvcSuccessfulJobHistoryLimit: $(PAYMENTS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentsSvcFailedJobHistoryLimit: $(PAYMENTS_SVC_FAILED_JOB_HISTORY_LIMIT)
              paymentsSvcEnableAppInsights: $(PAYMENTS_SVC_ENABLE_APP_INSIGHTS)
              paymentsSvcEnableK8sAppInsights: $(PAYMENTS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # TRANSACTION RECORDS SVC & TRANSACTION RECORDS RETRIEVE JOB & TRANSACTION RECORDS STATEMENT JOB               
              txnRecordsSvcImageRepositoryName: $(TXN_RECORDS_SVC_IMAGE_REPOSITORY_NAME)
              txnRecordsSvcReplicas: $(TXN_RECORDS_SVC_REPLICAS)
              txnRecordsSvcNodeSelectorPool: $(TXN_RECORDS_SVC_NODE_SELECTOR_POOL)
              txnRecordsSvcResourceLimitCpu: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_CPU)
              txnRecordsSvcResourceLimitMemory: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_MEMORY)
              txnRecordsSvcResourceRequestCpu: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_CPU)
              txnRecordsSvcResourceRequestMemory: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_MEMORY)
              txnRecordsStmtsResourceLimitCpu: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_CPU)
              txnRecordsStmtsResourceLimitMemory: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_MEMORY)
              txnRecordsStmtsResourceRequestCpu: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_CPU)
              txnRecordsStmtsResourceRequestMemory: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_MEMORY)                
              txnRecordsSvcBroadcastPlatformEvents: $(TXN_RECORDS_SVC_BROADCAST_PLATFORM_EVENTS)
              txnRecordsSvcPlatformEmail: $(TXN_RECORDS_SVC_PLATFORM_EMAIL)
              txnRecordsSvcDbPlatformEventsSubscription: $(TXN_RECORDS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              txnRecordsSvcAppInsightsKey: $(TXN_RECORDS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              txnRecordsSvcProcessPlatformEvents: $(TXN_RECORDS_SVC_PROCESS_PLATFORM_EVENTS)
              txnRecordsSvcStatementsContainer: $(TXN_RECORDS_SVC_STATEMENTS_CONTAINER_NAME)
              txnRecordsSvcStatementPeriod: $(TXN_RECORDS_SVC_STATEMENT_PERIOD)
              txnRecordsSvcStatementsBlobConnString: $(TXN_RECORDS_SVC_STATEMENTS_BLOB_CONNECTION_STRING)
              txnRecordsSvcGeneratePdfStatement: $(TXN_RECORDS_SVC_GENERATE_PDF_STATEMENT)
              txnRecordsSvcGenerateStatementChunkSize: $(TXN_RECORDS_SVC_GENERATE_STATEMENT_CHUNK_SIZE)
              txnRecordsSvcStatementTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              txnRecordsStmtsRetrieveJobCronSchedule: $(TXN_RECORDS_STMTS_RETRIEVE_CRON_SCHEDULE)
              txnRecordsStmntsGenerationJobCronSchedule: $(TXN_RECORDS_STMTS_GENERATION_CRON_SCHEDULE)
              txnRecordsSvcSuccessfulJobHistoryLimit: $(TXN_RECORDS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              txnRecordsSvcFailedJobHistoryLimit: $(TXN_RECORDS_SVC_FAILED_JOB_HISTORY_LIMIT)
              txnRecordsRetrieveJobChunkSize: $(TXN_RECORDS_RETRIEVE_JOB_CHUNK_SIZE)
              # WEPAY INTEGRATION SVC
              wepayIntegrationSvcImageRepositoryName: $(WEPAY_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              wepayIntegrationSvcReplicas: $(WEPAY_INTEGRATION_SVC_REPLICAS)
              wepayIntegrationSvcNodeSelectorPool: $(WEPAY_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              wepayIntegrationSvcResourceLimitsCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              wepayIntegrationSvcResourceLimitsMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              wepayIntegrationSvcResourceRequestCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              wepayIntegrationSvcResourceRequestMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              wepayIntegrationSvcNewRelicRecordMetric: $(WEPAY_INTEGRATION_SVC_NEW_RELIC_RECORD_METRIC)
              wepayIntegrationSvcRequestTimeout: $(WEPAY_INTEGRATION_SVC_REQUEST_TIMEOUT_MS)
              # EZPAY CLAIM SVC
              ezpayClaimSvcImageRepositoryName: $(EZPAY_CLAIM_SVC_IMAGE_REPOSITORY_NAME)
              ezpayClaimSvcReplicas: $(EZPAY_CLAIM_SVC_REPLICAS)
              ezpayClaimSvcNodeSelectorPool: $(EZPAY_CLAIM_SVC_NODE_SELECTOR_POOL)
              ezpayClaimSvcResourceLimitsCpu: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_CPU)
              ezpayClaimSvcResourceLimitsMemory: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayClaimSvcResourceRequestCpu: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_CPU)
              ezpayClaimSvcResourceRequestMemory: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_MEMORY)
              # EZPAY CHECKOUT SVC
              ezpayCheckoutSvcImageRepositoryName: $(EZPAY_CHECKOUT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayCheckoutSvcReplicas: $(EZPAY_CHECKOUT_SVC_REPLICAS)
              ezpayCheckoutSvcNodeSelectorPool: $(EZPAY_CHECKOUT_SVC_NODE_SELECTOR_POOL)
              ezpayCheckoutSvcResourceLimitsCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_CPU)
              ezpayCheckoutSvcResourceLimitsMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayCheckoutSvcResourceRequestCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayCheckoutSvcResourceRequestMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayCheckoutSvcKongIngressUpstreamHostHeader: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayCheckoutSvcKongIngressClass: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_CLASS)
              mongoDbEzpayCheckoutSvcCollectionName: $(MONGODB_EZPAY_CHECKOUT_SVC_COLLECTION)
              ezpayCheckoutSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayCheckoutSvcSubsMgmtApiKey: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_API_KEY)
              ezpayCheckoutSvcSubsMgmtServiceId: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayCheckoutSvcSessionExpiryInterval: $(EZPAY_CHECKOUT_SVC_SESSION_EXPIRY_INTERVAL)
              ezpayCheckoutSvcEzpayApiSvcGqlUrl: $(EZPAY_CHECKOUT_SVC_GQL_URL_EZPAY_API_SVC)
              # EZPAY REPORTS SVC
              ezpayReportSvcImageRepositoryName: $(EZPAY_REPORT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayReportSvcReplicas: $(EZPAY_REPORT_SVC_REPLICAS)
              ezpayReportSvcNodeSelectorPool: $(EZPAY_REPORT_SVC_NODE_SELECTOR_POOL)
              ezpayReportSvcResourceLimitsCpu: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_CPU)
              ezpayReportSvcResourceLimitsMemory: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayReportSvcResourceRequestCpu: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayReportSvcResourceRequestMemory: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_MEMORY)
              mongoDbEzpayReportSvcCollectionName: $(MONGODB_EZPAY_REPORT_SVC_COLLECTION)
              ezpayReportSvcSbPlatformEventsSubscription: $(EZPAY_REPORT_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayReportSvcBroadcastPlatformEvents: $(EZPAY_REPORT_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayReportSvcProcessPlatformEvents: $(EZPAY_REPORT_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayReportSvcBlobUrl: $(EZPAY_REPORT_SVC_BLOB_URL)
              ezpayReportSvcBlobContainer: $(EZPAY_REPORT_SVC_BLOB_CONTAINER)
              ezpayReportSvcBlobConnString: $(EZPAY_REPORT_SVC_BLOB_CONNECTION_STRING)
              ezpayReportSvcBlobSasTokenTtlMinutes: $(EZPAY_REPORT_SVC_BLOB_SAS_TOKEN_TTL_MINUTES)
              ezpayReportSvcReportDocTtlMinutes: $(EZPAY_REPORT_SVC_REPORT_DOC_TTL_MINUTES)

          - template: ../templates/save-tags.yaml
            parameters:
              tagName: 'ezpay_tags'               

- stage: PRF_Ezpay_Helm_Deploy_West
  displayName: PRF (WEST) - Ezpay Svcs Helm Deploy
  dependsOn: TST_Ezpay_Approval

  jobs:
  - deployment: Helm_Deploy
    displayName: Helm Deploy
    environment: ezpay-multi-cluster-prf

    pool:
      vmImage: 'ubuntu-latest'

    variables:
    - group: ezpay-prf
    - template: ../ezpay-svcs/helm-variables-prf.yaml
    - template: ../ezpay-svcs/region-overrides/helm-variables-prf-west.yaml

    strategy:
      runOnce:
        deploy:
          steps:
          - template: ../ezpay-svcs/helm-deploy-step.yaml
            parameters:
              serviceConnection: 'AzDevOps-Pipeline-Principal-DEV-TST-STG'
              svcPrincipalClientId: $(SVC_PRINCIPAL_CLIENT_ID_SHR)
              svcPrincipalSecret: $(SVC_PRINCIPAL_SECRET_SHR)
              azureTenantId: $(AZURE_TENANT_ID)
              aksName: $(AKS_NAME)
              aksResourceGroup: $(AKS_RESOURCE_GROUP)
              containerRegistryName: $(CONTAINER_REGISTRY_NAME)
              chartRepositoryName: $(CHART_REPOSITORY_NAME)
              chartName: $(CHART_NAME)
              helmReleaseName: $(HELM_RELEASE_NAME)
              k8sNamespace: $(K8S_NAMESPACE)
              env: $(ENV)
              location: $(LOCATION)
              # Common Configs
              wepayGrpcUrl: $(WEPAY_GRPC_URL)
              wepayBaseUrl: $(WEPAY_BASE_URL)
              wepayUploadBaseUrl: $(WEPAY_UPLOAD_BASE_URL)
              merchantPortalUrl: $(MERCHANT_PORTAL_URL)
              payerPortalUrl: $(PAYER_PORTAL_URL)
              apteanpayJsSdk: $(APTEAN_PAY_JS_SDK)
              serviceBusConnString: $(SB_CONN_STRING)
              wepayApiVersion: $(WEPAY_API_VERSION)
              wepayAppId: $(WEPAY_APP_ID)
              wepayAppToken: $(WEPAY_APP_TOKEN)
              serviceBusEventsTopic: $(SB_PLATFORM_EVENTS_TOPIC)
              serviceBusPlatformEventsTopicConnString: $(SB_PLATFORM_EVENTS_TOPIC_CONN_STRING)
              mongoDbConnString: $(MONGODB_CONN_STRING)
              mongoDbName: $(MONGODB_DB_NAME)
              mongoDbPaymentCancelRetriesCollectionName: $(MONGODB_PAYMENT_CANCEL_RETRIES_COLLECTION)
              mongoDbIdempotencyCollectionName: $(MONGODB_IDEMPOTENCY_COLLECTION)
              mongoDbEzpayApiSvcCollectionName: $(MONGODB_EZPAY_API_SVC_COLLECTION)
              mongoDbEmailNotificationSvcCollectionName: $(MONGODB_EMAIL_NOTIFICATIONS_SVC_COLLECTION)
              mongoDbPaymentsSvcCollectionName: $(MONGODB_PAYMENTS_SVC_COLLECTION)
              mongoDbTxnRecordsSvcCollectionName: $(MONGODB_TXN_RECORDS_SVC_COLLECTION)  
              mongoDbEzpayClaimSvcCollectionName: $(MONGODB_EZPAY_CLAIM_SVC_COLLECTION)
              newRelicCliApiKey: $(NEW_RELIC_CLI_API_KEY)
              newRelicAccountId: $(NEW_RELIC_ACCOUNT_ID)
              newRelicApiKey: $(NEW_RELIC_API_KEY)
              frontDoorId: $(FRONT_DOOR_ID)
              sentryDsn: $(SENTRY_DSN)
              # New Relic Agent Switches
              ezpayApiSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              erpIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              wepayIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              # Cancel Payment Retry Job
              paymentCancelRetryJobImageRepositoryName: $(PAYMENT_CANCEL_RETRY_JOB_IMAGE_REPOSITORY_NAME)
              paymentCancelRetryJobConfigCronSchedule: $(PAYMENT_CANCEL_RETRY_JOB_CRON_SCHEDULE)
              paymentCancelRetryJobConfigSuccessfulJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobConfigFailedJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_FAILED_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobNodeSelectorPool: $(PAYMENT_CANCEL_RETRY_JOB_NODE_SELECTOR_POOL)
              # ACCOUNT BALANCE UPDATE JOB
              acctBalanceJobImageRepositoryName: $(ACCT_BALANCE_JOB_IMAGE_REPOSITORY_NAME)
              acctBalanceJobSuccessfulJobHistoryLimit: $(ACCT_BALANCE_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              acctBalanceJobFailedJobHistoryLimit: $(ACCT_BALANCE_JOB_FAILED_JOB_HISTORY_LIMIT)
              acctBalanceJobCronSchedule: $(ACCT_BALANCE_JOB_CRON_SCHEDULE)
              acctBalanceJobNodeSelectorPool: $(ACCT_BALANCE_JOB_NODE_SELECTOR_POOL)  
              # EZPAY API SVC         
              ezpayApiSvcImageRepositoryName: $(EZPAY_API_SVC_IMAGE_REPOSITORY_NAME)
              ezpayApiSvcReplicas: $(EZPAY_API_SVC_REPLICAS)
              ezpayApiSvcNodeSelectorPool: $(EZPAY_API_SVC_NODE_SELECTOR_POOL)
              ezpayApiSvcResourceLimitsCpu: $(EZPAY_API_SVC_RESOURCE_LIMITS_CPU)
              ezpayApiSvcResourceLimitsMemory: $(EZPAY_API_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayApiSvcResourceRequestsCpu: $(EZPAY_API_SVC_RESOURCE_REQUESTS_CPU)
              ezpayApiSvcResourceRequestsMemory: $(EZPAY_API_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayApiSvcKongIngressUpstreamHostHeader: $(EZPAY_API_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayApiSvcKongIngressClass: $(EZPAY_API_SVC_KONG_INGRESS_CLASS)
              ezpayApiSvcCosdbConnString: $(EZPAY_API_SVC_COSMOSDB_CONN_STRING)
              ezpayApiSvcCosdbDatabase: $(EZPAY_API_SVC_COSMOSDB_DATABASE)
              ezpayApiSvcCosdbContainer: $(EZPAY_API_SVC_COSMOSDB_CONTAINER)
              ezpayApiSvcSbPlatformEventsSubscription: $(EZPAY_API_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayApiSvcAppInsightsKey: $(EZPAY_API_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              ezpayApiSvcB2cClientId: $(EZPAY_API_SVC_B2C_CLIENT_ID)
              ezpayApiSvcB2cDomainHost: $(EZPAY_API_SVC_B2C_DOMAIN_HOST)
              ezpayApiSvcB2cTenantId: $(EZPAY_API_SVC_B2C_TENANT_ID)
              ezpayApiSvcB2cPolicyName: $(EZPAY_API_SVC_B2C_POLICY_NAME)
              ezpayApiSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayApiSvcEzpayClaimSvcGrpcUrl: $(EZPAY_CLAIM_SVC_GRPC_URL)
              ezpayApiSvcSubsMgmtApiKey: $(EZPAY_API_SVC_SUBS_MGMT_API_KEY)
              ezpayApiSvcSubsMgmtServiceId: $(EZPAY_API_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayApiSvcPaymentPlatformFromPhoneNumber: $(PAYMENTS_PLATFORM_FROM_PHONE_NUMBER)
              ezpayApiSvcPaymentPlatformFromEmail: $(EZPAY_API_SVC_PAYMENTS_PLATFORM_FROM_EMAIL)
              ezpayApiSvcProcessPlatformEvents: $(EZPAY_API_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayApiSvcBlobStorageUrl: $(EZPAY_API_SVC_BLOB_STORAGE_URL)
              ezpayApiSvcEncryptPayerUrlToken: $(EZPAY_API_SVC_ENCRYPT_PAYER_URL_TOKEN)
              ezpayApiSvcEncryptKey: $(EZPAY_API_SVC_ENCRYPTION_KEY)
              ezpayApiSvcTosVersion: $(EZPAY_API_SVC_TOS_VERSION)
              ezpayApiSvcStatementsContainerName: $(EZPAY_API_SVC_STATEMENTS_CONTAINER_NAME)
              ezpayApiSvcInvoiceContainerName: $(EZPAY_API_SVC_INVOICE_CONTAINER_NAME)
              ezpayApiSvcInvoiceBlobConnString: $(EZPAY_API_SVC_INVOICE_BLOB_CONNECTION_STRING)
              ezpayApiSvcLogicAppUrlShortenerUrl: $(EZPAY_API_SVC_LOGIC_APP_URL_SHORTENER_URL)
              ezpayApiSvcProductApisOnly: $(EZPAY_API_SVC_PRODUCT_APIS_ONLY)
              ezpayApiSvcGrpcUrl: $(EZPAY_API_SVC_GRPC_URL)
              ezpayApiSvcBroadcastPlatformEvents: $(EZPAY_API_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayApiSvcNewRelicRecordMetricGql: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GQL)
              ezpayApiSvcNewRelicRecordMetricGrpc: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GRPC)
              ezpayApiSvcEzpayCheckoutSvcGrpcUrl: $(GRPC_URL_CHECKOUT_SVC)
              ezpayApiSvcEzpayReportSvcGrpcUrl: $(GRPC_URL_REPORT_SVC)
              # EMAIL NOTIFICATION SVC
              emailNotificationSvcImageRepositoryName: $(EMAIL_NOTIFICATION_SVC_IMAGE_REPOSITORY_NAME)
              emailNotificationSvcReplicas: $(EMAIL_NOTIFICATION_SVC_REPLICAS)
              emailNotificationSvcNodeSelectorPool: $(EMAIL_NOTIFICATION_SVC_NODE_SELECTOR_POOL)
              emailNotificationSvcResourceLimitsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_CPU)
              emailNotificationSvcResourceLimitsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_MEMORY)
              emailNotificationSvcResourceRequestsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_CPU)
              emailNotificationSvcResourceRequestsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_MEMORY)
              emailNotificationSvcDbPlatformEventsSubscription: $(EMAIL_NOTIFICATION_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              emailNotificationSvcAppInsightsKey: $(EMAIL_NOTIFICATION_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              emailNotificationSvcBroadcastPlatformEvents: $(EMAIL_NOTIFICATION_SVC_BROADCAST_PLATFORM_EVENTS)
              emailNotificationSvcEmailTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              emailNotificationSvcPlatformEmail: $(EMAIL_NOTIFICATION_SVC_PLATFORM_EMAIL)
              emailNotificationSvcPlatformName: $(EMAIL_NOTIFICATION_SVC_PLATFORM_NAME)
              emailNotificationSvcProcessPlatformEvents: $(EMAIL_NOTIFICATION_SVC_PROCESS_PLATFORM_EVENTS)
              # ERP INTEGRATION SVC
              erpIntegrationSvcImageRepositoryName: $(ERP_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              erpIntegrationSvcReplicas: $(ERP_INTEGRATION_SVC_REPLICAS)
              erpIntegrationSvcNodeSelectorPool: $(ERP_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              erpIntegrationSvcResourceLimitsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              erpIntegrationSvcResourceLimitsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              erpIntegrationSvcResourceRequestsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              erpIntegrationSvcResourceRequestsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              erpIntegrationSvcKongIngressUpstreamHostHeader: $(ERP_INTEGRATION_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              erpIntegrationSvcKongIngressClass: $(ERP_INTEGRATION_SVC_KONG_INGRESS_CLASS)
              erpIntegrationSvcEzpayApiSvcGqlUrl: $(ERP_INTEGRATION_SVC_GQL_URL_EZPAY_API_SVC)
              erpIntegrationSvcSyncTimeout: $(ERP_INTEGRATION_SVC_SYNC_TIMEOUT)
              erpIntegrationSvcSyncMaxWaitTime: $(ERP_INTEGRATION_SVC_SYNC_MAX_WAIT_TIME)
              # MERCHANT OPS SVC
              merchantOpsSvcImageRepositoryName: $(MERCHANT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              merchantOpsSvcReplicas: $(MERCHANT_OPS_SVC_REPLICAS)
              merchantOpsSvcNodeSelectorPool: $(MERCHANT_OPS_SVC_NODE_SELECTOR_POOL)
              merchantOpsSvcResourceLimitsCpu: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_CPU)
              merchantOpsSvcResourceLimitsMemory: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              merchantOpsSvcResourceRequestsCpu: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              merchantOpsSvcResourceRequestsMemory: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              merchantOpsSvcPlatformEventsSubscription: $(MERCHANT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              merchantOpsSvcEnableAppInsights: $(MERCHANT_OPS_SVC_ENABLE_APP_INSIGHTS)
              merchantOpsSvcEnableK8sAppInsights: $(MERCHANT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)
              # PAYFAC NOTIFICATIONS SVC
              payfacNotificationsSvcImageRepositoryName: $(PAYFAC_NOTIFICATIONS_SVC_IMAGE_REPOSITORY_NAME)
              payfacNotificationsSvcReplicas: $(PAYFAC_NOTIFICATIONS_SVC_REPLICAS)
              payfacNotificationsSvcNodeSelectorPool: $(PAYFAC_NOTIFICATIONS_SVC_NODE_SELECTOR_POOL)
              payfacNotificationsSvcResourceLimitsCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_CPU)
              payfacNotificationsSvcResourceLimitsMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_MEMORY)
              payfacNotificationsSvcResourceRequestCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_CPU)
              payfacNotificationsSvcResourceRequestMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_MEMORY)
              payfacNotificationsSvcSbPayfacTopicConnString: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC_CONN_STRING)
              payfacNotificationsSvcSbPayfacSubscription: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_SUBSCRIPTION)
              payfacNotificationsSvcSbPayfacTopic: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC)
              payfacNotificationsSvcAppInsightsKey: $(PAYFAC_NOTIFICATIONS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              payfacNotificationsSvcEzpayWebhookUrl: $(PAYFAC_NOTIFICATIONS_SVC_EZPAY_WEBHOOK_URL)
              payfacNotificationsSvcProcessPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_PLATFORM_EVENTS)
              payfacNotificationsSvcProcessNotificationEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_NOTIFICATION_EVENTS)
              payfacNotificationsSvcBroadcastPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_BROADCAST_PLATFORM_EVENTS)
              # PAYMENT OPS SVC
              paymentOpsSvcImageRepositoryName: $(PAYMENT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              paymentOpsSvcReplicas: $(PAYMENT_OPS_SVC_REPLICAS)
              paymentOpsSvcNodeSelectorPool: $(PAYMENT_OPS_SVC_NODE_SELECTOR_POOL)
              paymentOpsSvcResourceLimitsCpu: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_CPU)
              paymentOpsSvcResourceLimitsMemory: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentOpsSvcResourceRequestsCpu: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              paymentOpsSvcResourceRequestsMemory: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentOpsSvcSbPlatformEventsSubscription: $(PAYMENT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentOpsSvcSbEmailReqQueueConnString: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbEmailReqQueue: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE)
              paymentOpsSvcSbSmsReqQueueConnString: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbSmsReqQueue: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE)
              paymentOpsSvcEnableAppInsights: $(PAYMENT_OPS_SVC_ENABLE_APP_INSIGHTS)
              paymentOpsSvcEnableK8sAppInsights: $(PAYMENT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # PAYMENTS SVC & PAYMENTS RETRY JOB
              paymentsSvcImageRepositoryName: $(PAYMENTS_SVC_IMAGE_REPOSITORY_NAME)
              paymentsSvcReplicas: $(PAYMENTS_SVC_REPLICAS)
              paymentsSvcNodeSelectorPool: $(PAYMENTS_SVC_NODE_SELECTOR_POOL)
              paymentsSvcResourceLimitsCpu: $(PAYMENTS_SVC_RESOURCE_LIMITS_CPU)
              paymentsSvcResourceLimitsMemory: $(PAYMENTS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentsSvcResourceRequestsCpu: $(PAYMENTS_SVC_RESOURCE_REQUESTS_CPU)
              paymentsSvcResourceRequestsMemory: $(PAYMENTS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentsSvcPlatformEventsSubscription: $(PAYMENTS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentsSvcCronSchedule: $(PAYMENTS_SVC_CRON_SCHEDULE)
              paymentsSvcSuccessfulJobHistoryLimit: $(PAYMENTS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentsSvcFailedJobHistoryLimit: $(PAYMENTS_SVC_FAILED_JOB_HISTORY_LIMIT)
              paymentsSvcEnableAppInsights: $(PAYMENTS_SVC_ENABLE_APP_INSIGHTS)
              paymentsSvcEnableK8sAppInsights: $(PAYMENTS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # TRANSACTION RECORDS SVC & TRANSACTION RECORDS RETRIEVE JOB & TRANSACTION RECORDS STATEMENT JOB               
              txnRecordsSvcImageRepositoryName: $(TXN_RECORDS_SVC_IMAGE_REPOSITORY_NAME)
              txnRecordsSvcReplicas: $(TXN_RECORDS_SVC_REPLICAS)
              txnRecordsSvcNodeSelectorPool: $(TXN_RECORDS_SVC_NODE_SELECTOR_POOL)
              txnRecordsSvcResourceLimitCpu: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_CPU)
              txnRecordsSvcResourceLimitMemory: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_MEMORY)
              txnRecordsSvcResourceRequestCpu: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_CPU)
              txnRecordsSvcResourceRequestMemory: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_MEMORY)
              txnRecordsStmtsResourceLimitCpu: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_CPU)
              txnRecordsStmtsResourceLimitMemory: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_MEMORY)
              txnRecordsStmtsResourceRequestCpu: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_CPU)
              txnRecordsStmtsResourceRequestMemory: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_MEMORY)                
              txnRecordsSvcBroadcastPlatformEvents: $(TXN_RECORDS_SVC_BROADCAST_PLATFORM_EVENTS)
              txnRecordsSvcPlatformEmail: $(TXN_RECORDS_SVC_PLATFORM_EMAIL)
              txnRecordsSvcDbPlatformEventsSubscription: $(TXN_RECORDS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              txnRecordsSvcAppInsightsKey: $(TXN_RECORDS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              txnRecordsSvcProcessPlatformEvents: $(TXN_RECORDS_SVC_PROCESS_PLATFORM_EVENTS)
              txnRecordsSvcStatementsContainer: $(TXN_RECORDS_SVC_STATEMENTS_CONTAINER_NAME)
              txnRecordsSvcStatementPeriod: $(TXN_RECORDS_SVC_STATEMENT_PERIOD)
              txnRecordsSvcStatementsBlobConnString: $(TXN_RECORDS_SVC_STATEMENTS_BLOB_CONNECTION_STRING)
              txnRecordsSvcGeneratePdfStatement: $(TXN_RECORDS_SVC_GENERATE_PDF_STATEMENT)
              txnRecordsSvcGenerateStatementChunkSize: $(TXN_RECORDS_SVC_GENERATE_STATEMENT_CHUNK_SIZE)
              txnRecordsSvcStatementTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              txnRecordsSvcCronSchedule: $(TXN_RECORDS_SVC_CRON_SCHEDULE)
              txnRecordsSvcSuccessfulJobHistoryLimit: $(TXN_RECORDS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              txnRecordsSvcFailedJobHistoryLimit: $(TXN_RECORDS_SVC_FAILED_JOB_HISTORY_LIMIT)
              txnRecordsRetrieveJobChunkSize: $(TXN_RECORDS_RETRIEVE_JOB_CHUNK_SIZE)              
              # WEPAY INTEGRATION SVC
              wepayIntegrationSvcImageRepositoryName: $(WEPAY_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              wepayIntegrationSvcReplicas: $(WEPAY_INTEGRATION_SVC_REPLICAS)
              wepayIntegrationSvcNodeSelectorPool: $(WEPAY_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              wepayIntegrationSvcResourceLimitsCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              wepayIntegrationSvcResourceLimitsMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              wepayIntegrationSvcResourceRequestCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              wepayIntegrationSvcResourceRequestMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              wepayIntegrationSvcNewRelicRecordMetric: $(WEPAY_INTEGRATION_SVC_NEW_RELIC_RECORD_METRIC)
              wepayIntegrationSvcRequestTimeout: $(WEPAY_INTEGRATION_SVC_REQUEST_TIMEOUT_MS)
              # EZPAY CLAIM SVC
              ezpayClaimSvcImageRepositoryName: $(EZPAY_CLAIM_SVC_IMAGE_REPOSITORY_NAME)
              ezpayClaimSvcReplicas: $(EZPAY_CLAIM_SVC_REPLICAS)
              ezpayClaimSvcNodeSelectorPool: $(EZPAY_CLAIM_SVC_NODE_SELECTOR_POOL)
              ezpayClaimSvcResourceLimitsCpu: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_CPU)
              ezpayClaimSvcResourceLimitsMemory: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayClaimSvcResourceRequestCpu: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_CPU)
              ezpayClaimSvcResourceRequestMemory: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_MEMORY)
              # EZPAY CHECKOUT SVC
              ezpayCheckoutSvcImageRepositoryName: $(EZPAY_CHECKOUT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayCheckoutSvcReplicas: $(EZPAY_CHECKOUT_SVC_REPLICAS)
              ezpayCheckoutSvcNodeSelectorPool: $(EZPAY_CHECKOUT_SVC_NODE_SELECTOR_POOL)
              ezpayCheckoutSvcResourceLimitsCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_CPU)
              ezpayCheckoutSvcResourceLimitsMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayCheckoutSvcResourceRequestCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayCheckoutSvcResourceRequestMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayCheckoutSvcKongIngressUpstreamHostHeader: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayCheckoutSvcKongIngressClass: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_CLASS)
              mongoDbEzpayCheckoutSvcCollectionName: $(MONGODB_EZPAY_CHECKOUT_SVC_COLLECTION)
              ezpayCheckoutSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayCheckoutSvcSubsMgmtApiKey: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_API_KEY)
              ezpayCheckoutSvcSubsMgmtServiceId: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayCheckoutSvcSessionExpiryInterval: $(EZPAY_CHECKOUT_SVC_SESSION_EXPIRY_INTERVAL)
              ezpayCheckoutSvcEzpayApiSvcGqlUrl: $(EZPAY_CHECKOUT_SVC_GQL_URL_EZPAY_API_SVC)
              # EZPAY REPORTS SVC
              ezpayReportSvcImageRepositoryName: $(EZPAY_REPORT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayReportSvcReplicas: $(EZPAY_REPORT_SVC_REPLICAS)
              ezpayReportSvcNodeSelectorPool: $(EZPAY_REPORT_SVC_NODE_SELECTOR_POOL)
              ezpayReportSvcResourceLimitsCpu: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_CPU)
              ezpayReportSvcResourceLimitsMemory: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayReportSvcResourceRequestCpu: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayReportSvcResourceRequestMemory: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_MEMORY)
              mongoDbEzpayReportSvcCollectionName: $(MONGODB_EZPAY_REPORT_SVC_COLLECTION)
              ezpayReportSvcSbPlatformEventsSubscription: $(EZPAY_REPORT_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayReportSvcBroadcastPlatformEvents: $(EZPAY_REPORT_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayReportSvcProcessPlatformEvents: $(EZPAY_REPORT_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayReportSvcBlobUrl: $(EZPAY_REPORT_SVC_BLOB_URL)
              ezpayReportSvcBlobContainer: $(EZPAY_REPORT_SVC_BLOB_CONTAINER)
              ezpayReportSvcBlobConnString: $(EZPAY_REPORT_SVC_BLOB_CONNECTION_STRING)
              ezpayReportSvcBlobSasTokenTtlMinutes: $(EZPAY_REPORT_SVC_BLOB_SAS_TOKEN_TTL_MINUTES)
              ezpayReportSvcReportDocTtlMinutes: $(EZPAY_REPORT_SVC_REPORT_DOC_TTL_MINUTES)

          - template: ../templates/save-tags.yaml
            parameters:
              tagName: 'ezpay_tags'

- stage: PRF_Merchant_Portal_Deploy
  displayName: PRF - Merchant Portal Deployment
  dependsOn: TST_Ezpay_Approval

  jobs:
    - template: ../templates/deploy-ezpay-static.yaml
      parameters:
        variableGroup: ezpay-merchant-prf
        targetEnvironment: ezpay-merchant-prf
        dropArtifactPath: $(Pipeline.Workspace)/merchant_portal_static_files/drop/prf.zip
        azureServiceConnection: AzDevOps-Pipeline-Principal-DEV-TST-STG

- stage: PRF_Payer_Portal_Deploy
  displayName: PRF - Payer Portal Deployment
  dependsOn: TST_Ezpay_Approval

  jobs:
    - template: ../templates/deploy-ezpay-static.yaml
      parameters:
        variableGroup: ezpay-payer-prf
        targetEnvironment: ezpay-payer-prf
        dropArtifactPath: $(Pipeline.Workspace)/payer_portal_static_files/drop/prf.zip
        azureServiceConnection: AzDevOps-Pipeline-Principal-DEV-TST-STG

- stage: PRF_Static_Assets_Deploy
  displayName: PRF Static Assets Deploy
  dependsOn: TST_Ezpay_Approval

  jobs:
  - template: static-assets/azp-yaml/templates/ezpay-static-assets-deployment-job.yaml@ezpay-backend-services
    parameters:
      environment: ezpay-static-prf
      serviceConnection: AzDevOps-Pipeline-Principal-DEV-TST-STG
      storageAccount: stezpaytenantfilesprf001

- stage: PRF_Aptean_Pay_Js_Library_Deploy
  displayName: PRF - Aptean Pay JS Library Deployment
  dependsOn: TST_Ezpay_Approval

  jobs:
    - template: ../templates/deploy-ezpay-static.yaml
      parameters:
        variableGroup: apteanpay-js-lib-prf
        targetEnvironment: apteanpay-js-prf
        dropArtifactPath: $(Pipeline.Workspace)/aptean_pay_js_static_files/drop/prf.zip
        azureServiceConnection: AzDevOps-Pipeline-Principal-DEV-TST-STG

- stage: STG_Ezpay_Approval
  displayName: STG - Approval
  dependsOn:
  - TST_Ezpay_Helm_Deploy_East
  - TST_Ezpay_Helm_Deploy_West

  jobs:
  - deployment: Deploy_All
    displayName: Deploy All
    environment: ezpay-approval-stg

    pool:
      vmImage: 'ubuntu-latest'
      
    strategy:
      runOnce:
        deploy:
          steps:
          - script: echo "STG - Deploy All Ezpay:" APPROVED

- stage: STG_Ezpay_Helm_Deploy_East
  displayName: STG (EAST) - Ezpay Svcs Helm Deploy
  dependsOn: STG_Ezpay_Approval

  jobs:
  - deployment: Helm_Deploy
    displayName: Helm Deploy
    environment: ezpay-multi-cluster-stg

    pool:
      vmImage: 'ubuntu-latest'

    variables:
    - group: ezpay-stg
    - template: ../ezpay-svcs/helm-variables-stg.yaml

    strategy:
      runOnce:
        deploy:
          steps:
          - template: ../templates/load-tags.yaml
            parameters:
              tagName: 'ezpay_tags' 

          - template: ../ezpay-svcs/helm-deploy-step.yaml
            parameters:
              serviceConnection: 'AzDevOps-Pipeline-Principal-DEV-TST-STG'
              svcPrincipalClientId: $(SVC_PRINCIPAL_CLIENT_ID_SHR)
              svcPrincipalSecret: $(SVC_PRINCIPAL_SECRET_SHR)
              azureTenantId: $(AZURE_TENANT_ID)
              aksName: $(AKS_NAME)
              aksResourceGroup: $(AKS_RESOURCE_GROUP)
              containerRegistryName: $(CONTAINER_REGISTRY_NAME)
              chartRepositoryName: $(CHART_REPOSITORY_NAME)
              chartName: $(CHART_NAME)
              helmReleaseName: $(HELM_RELEASE_NAME)
              k8sNamespace: $(K8S_NAMESPACE)
              env: $(ENV)
              location: $(LOCATION)
              # Common Configs
              wepayGrpcUrl: $(WEPAY_GRPC_URL)
              wepayBaseUrl: $(WEPAY_BASE_URL)
              wepayUploadBaseUrl: $(WEPAY_UPLOAD_BASE_URL)
              merchantPortalUrl: $(MERCHANT_PORTAL_URL)
              payerPortalUrl: $(PAYER_PORTAL_URL)
              apteanpayJsSdk: $(APTEAN_PAY_JS_SDK)
              serviceBusConnString: $(SB_CONN_STRING)
              wepayApiVersion: $(WEPAY_API_VERSION)
              wepayAppId: $(WEPAY_APP_ID)
              wepayAppToken: $(WEPAY_APP_TOKEN)
              serviceBusEventsTopic: $(SB_PLATFORM_EVENTS_TOPIC)
              serviceBusPlatformEventsTopicConnString: $(SB_PLATFORM_EVENTS_TOPIC_CONN_STRING)
              mongoDbConnString: $(MONGODB_CONN_STRING)
              mongoDbName: $(MONGODB_DB_NAME)
              mongoDbPaymentCancelRetriesCollectionName: $(MONGODB_PAYMENT_CANCEL_RETRIES_COLLECTION)
              mongoDbIdempotencyCollectionName: $(MONGODB_IDEMPOTENCY_COLLECTION)
              mongoDbEzpayApiSvcCollectionName: $(MONGODB_EZPAY_API_SVC_COLLECTION)
              mongoDbEmailNotificationSvcCollectionName: $(MONGODB_EMAIL_NOTIFICATIONS_SVC_COLLECTION)
              mongoDbPaymentsSvcCollectionName: $(MONGODB_PAYMENTS_SVC_COLLECTION)
              mongoDbTxnRecordsSvcCollectionName: $(MONGODB_TXN_RECORDS_SVC_COLLECTION)  
              mongoDbEzpayClaimSvcCollectionName: $(MONGODB_EZPAY_CLAIM_SVC_COLLECTION)
              newRelicCliApiKey: $(NEW_RELIC_CLI_API_KEY)
              newRelicAccountId: $(NEW_RELIC_ACCOUNT_ID)
              newRelicApiKey: $(NEW_RELIC_API_KEY)
              frontDoorId: $(FRONT_DOOR_ID)
              sentryDsn: $(SENTRY_DSN)
              # New Relic Agent Switches
              ezpayApiSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              erpIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              wepayIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              # Cancel Payment Retry Job
              paymentCancelRetryJobImageRepositoryName: $(PAYMENT_CANCEL_RETRY_JOB_IMAGE_REPOSITORY_NAME)
              paymentCancelRetryJobConfigCronSchedule: $(PAYMENT_CANCEL_RETRY_JOB_CRON_SCHEDULE)
              paymentCancelRetryJobConfigSuccessfulJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobConfigFailedJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_FAILED_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobNodeSelectorPool: $(PAYMENT_CANCEL_RETRY_JOB_NODE_SELECTOR_POOL)
              # ACCOUNT BALANCE UPDATE JOB
              acctBalanceJobImageRepositoryName: $(ACCT_BALANCE_JOB_IMAGE_REPOSITORY_NAME)
              acctBalanceJobSuccessfulJobHistoryLimit: $(ACCT_BALANCE_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              acctBalanceJobFailedJobHistoryLimit: $(ACCT_BALANCE_JOB_FAILED_JOB_HISTORY_LIMIT)
              acctBalanceJobCronSchedule: $(ACCT_BALANCE_JOB_CRON_SCHEDULE)
              acctBalanceJobNodeSelectorPool: $(ACCT_BALANCE_JOB_NODE_SELECTOR_POOL)  
              # EZPAY API SVC         
              ezpayApiSvcImageRepositoryName: $(EZPAY_API_SVC_IMAGE_REPOSITORY_NAME)
              ezpayApiSvcReplicas: $(EZPAY_API_SVC_REPLICAS)
              ezpayApiSvcNodeSelectorPool: $(EZPAY_API_SVC_NODE_SELECTOR_POOL)
              ezpayApiSvcResourceLimitsCpu: $(EZPAY_API_SVC_RESOURCE_LIMITS_CPU)
              ezpayApiSvcResourceLimitsMemory: $(EZPAY_API_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayApiSvcResourceRequestsCpu: $(EZPAY_API_SVC_RESOURCE_REQUESTS_CPU)
              ezpayApiSvcResourceRequestsMemory: $(EZPAY_API_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayApiSvcKongIngressUpstreamHostHeader: $(EZPAY_API_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayApiSvcKongIngressClass: $(EZPAY_API_SVC_KONG_INGRESS_CLASS)
              ezpayApiSvcCosdbConnString: $(EZPAY_API_SVC_COSMOSDB_CONN_STRING)
              ezpayApiSvcCosdbDatabase: $(EZPAY_API_SVC_COSMOSDB_DATABASE)
              ezpayApiSvcCosdbContainer: $(EZPAY_API_SVC_COSMOSDB_CONTAINER)
              ezpayApiSvcSbPlatformEventsSubscription: $(EZPAY_API_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayApiSvcAppInsightsKey: $(EZPAY_API_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              ezpayApiSvcB2cClientId: $(EZPAY_API_SVC_B2C_CLIENT_ID)
              ezpayApiSvcB2cDomainHost: $(EZPAY_API_SVC_B2C_DOMAIN_HOST)
              ezpayApiSvcB2cTenantId: $(EZPAY_API_SVC_B2C_TENANT_ID)
              ezpayApiSvcB2cPolicyName: $(EZPAY_API_SVC_B2C_POLICY_NAME)
              ezpayApiSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayApiSvcEzpayClaimSvcGrpcUrl: $(EZPAY_CLAIM_SVC_GRPC_URL)
              ezpayApiSvcSubsMgmtApiKey: $(EZPAY_API_SVC_SUBS_MGMT_API_KEY)
              ezpayApiSvcSubsMgmtServiceId: $(EZPAY_API_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayApiSvcPaymentPlatformFromPhoneNumber: $(PAYMENTS_PLATFORM_FROM_PHONE_NUMBER)
              ezpayApiSvcPaymentPlatformFromEmail: $(EZPAY_API_SVC_PAYMENTS_PLATFORM_FROM_EMAIL)
              ezpayApiSvcProcessPlatformEvents: $(EZPAY_API_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayApiSvcBlobStorageUrl: $(EZPAY_API_SVC_BLOB_STORAGE_URL)
              ezpayApiSvcEncryptPayerUrlToken: $(EZPAY_API_SVC_ENCRYPT_PAYER_URL_TOKEN)
              ezpayApiSvcEncryptKey: $(EZPAY_API_SVC_ENCRYPTION_KEY)
              ezpayApiSvcTosVersion: $(EZPAY_API_SVC_TOS_VERSION)
              ezpayApiSvcStatementsContainerName: $(EZPAY_API_SVC_STATEMENTS_CONTAINER_NAME)
              ezpayApiSvcInvoiceContainerName: $(EZPAY_API_SVC_INVOICE_CONTAINER_NAME)
              ezpayApiSvcInvoiceBlobConnString: $(EZPAY_API_SVC_INVOICE_BLOB_CONNECTION_STRING)
              ezpayApiSvcLogicAppUrlShortenerUrl: $(EZPAY_API_SVC_LOGIC_APP_URL_SHORTENER_URL)
              ezpayApiSvcProductApisOnly: $(EZPAY_API_SVC_PRODUCT_APIS_ONLY)
              ezpayApiSvcGrpcUrl: $(EZPAY_API_SVC_GRPC_URL)
              ezpayApiSvcBroadcastPlatformEvents: $(EZPAY_API_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayApiSvcNewRelicRecordMetricGql: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GQL)
              ezpayApiSvcNewRelicRecordMetricGrpc: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GRPC)
              ezpayApiSvcEzpayCheckoutSvcGrpcUrl: $(GRPC_URL_CHECKOUT_SVC)
              ezpayApiSvcEzpayReportSvcGrpcUrl: $(GRPC_URL_REPORT_SVC)
              # EMAIL NOTIFICATION SVC
              emailNotificationSvcImageRepositoryName: $(EMAIL_NOTIFICATION_SVC_IMAGE_REPOSITORY_NAME)
              emailNotificationSvcReplicas: $(EMAIL_NOTIFICATION_SVC_REPLICAS)
              emailNotificationSvcNodeSelectorPool: $(EMAIL_NOTIFICATION_SVC_NODE_SELECTOR_POOL)
              emailNotificationSvcResourceLimitsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_CPU)
              emailNotificationSvcResourceLimitsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_MEMORY)
              emailNotificationSvcResourceRequestsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_CPU)
              emailNotificationSvcResourceRequestsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_MEMORY)
              emailNotificationSvcDbPlatformEventsSubscription: $(EMAIL_NOTIFICATION_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              emailNotificationSvcAppInsightsKey: $(EMAIL_NOTIFICATION_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              emailNotificationSvcBroadcastPlatformEvents: $(EMAIL_NOTIFICATION_SVC_BROADCAST_PLATFORM_EVENTS)
              emailNotificationSvcEmailTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              emailNotificationSvcPlatformEmail: $(EMAIL_NOTIFICATION_SVC_PLATFORM_EMAIL)
              emailNotificationSvcPlatformName: $(EMAIL_NOTIFICATION_SVC_PLATFORM_NAME)
              emailNotificationSvcProcessPlatformEvents: $(EMAIL_NOTIFICATION_SVC_PROCESS_PLATFORM_EVENTS)
              # ERP INTEGRATION SVC
              erpIntegrationSvcImageRepositoryName: $(ERP_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              erpIntegrationSvcReplicas: $(ERP_INTEGRATION_SVC_REPLICAS)
              erpIntegrationSvcNodeSelectorPool: $(ERP_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              erpIntegrationSvcResourceLimitsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              erpIntegrationSvcResourceLimitsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              erpIntegrationSvcResourceRequestsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              erpIntegrationSvcResourceRequestsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              erpIntegrationSvcKongIngressUpstreamHostHeader: $(ERP_INTEGRATION_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              erpIntegrationSvcKongIngressClass: $(ERP_INTEGRATION_SVC_KONG_INGRESS_CLASS)
              erpIntegrationSvcEzpayApiSvcGqlUrl: $(ERP_INTEGRATION_SVC_GQL_URL_EZPAY_API_SVC)
              erpIntegrationSvcSyncTimeout: $(ERP_INTEGRATION_SVC_SYNC_TIMEOUT)
              erpIntegrationSvcSyncMaxWaitTime: $(ERP_INTEGRATION_SVC_SYNC_MAX_WAIT_TIME)
              # MERCHANT OPS SVC
              merchantOpsSvcImageRepositoryName: $(MERCHANT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              merchantOpsSvcReplicas: $(MERCHANT_OPS_SVC_REPLICAS)
              merchantOpsSvcNodeSelectorPool: $(MERCHANT_OPS_SVC_NODE_SELECTOR_POOL)
              merchantOpsSvcResourceLimitsCpu: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_CPU)
              merchantOpsSvcResourceLimitsMemory: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              merchantOpsSvcResourceRequestsCpu: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              merchantOpsSvcResourceRequestsMemory: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              merchantOpsSvcPlatformEventsSubscription: $(MERCHANT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              merchantOpsSvcEnableAppInsights: $(MERCHANT_OPS_SVC_ENABLE_APP_INSIGHTS)
              merchantOpsSvcEnableK8sAppInsights: $(MERCHANT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)
              # PAYFAC NOTIFICATIONS SVC
              payfacNotificationsSvcImageRepositoryName: $(PAYFAC_NOTIFICATIONS_SVC_IMAGE_REPOSITORY_NAME)
              payfacNotificationsSvcReplicas: $(PAYFAC_NOTIFICATIONS_SVC_REPLICAS)
              payfacNotificationsSvcNodeSelectorPool: $(PAYFAC_NOTIFICATIONS_SVC_NODE_SELECTOR_POOL)
              payfacNotificationsSvcResourceLimitsCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_CPU)
              payfacNotificationsSvcResourceLimitsMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_MEMORY)
              payfacNotificationsSvcResourceRequestCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_CPU)
              payfacNotificationsSvcResourceRequestMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_MEMORY)
              payfacNotificationsSvcSbPayfacTopicConnString: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC_CONN_STRING)
              payfacNotificationsSvcSbPayfacSubscription: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_SUBSCRIPTION)
              payfacNotificationsSvcSbPayfacTopic: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC)
              payfacNotificationsSvcAppInsightsKey: $(PAYFAC_NOTIFICATIONS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              payfacNotificationsSvcEzpayWebhookUrl: $(PAYFAC_NOTIFICATIONS_SVC_EZPAY_WEBHOOK_URL)
              payfacNotificationsSvcProcessPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_PLATFORM_EVENTS)
              payfacNotificationsSvcProcessNotificationEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_NOTIFICATION_EVENTS)
              payfacNotificationsSvcBroadcastPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_BROADCAST_PLATFORM_EVENTS)
              # PAYMENT OPS SVC
              paymentOpsSvcImageRepositoryName: $(PAYMENT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              paymentOpsSvcReplicas: $(PAYMENT_OPS_SVC_REPLICAS)
              paymentOpsSvcNodeSelectorPool: $(PAYMENT_OPS_SVC_NODE_SELECTOR_POOL)
              paymentOpsSvcResourceLimitsCpu: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_CPU)
              paymentOpsSvcResourceLimitsMemory: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentOpsSvcResourceRequestsCpu: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              paymentOpsSvcResourceRequestsMemory: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentOpsSvcSbPlatformEventsSubscription: $(PAYMENT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentOpsSvcSbEmailReqQueueConnString: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbEmailReqQueue: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE)
              paymentOpsSvcSbSmsReqQueueConnString: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbSmsReqQueue: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE)
              paymentOpsSvcEnableAppInsights: $(PAYMENT_OPS_SVC_ENABLE_APP_INSIGHTS)
              paymentOpsSvcEnableK8sAppInsights: $(PAYMENT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # PAYMENTS SVC & PAYMENTS RETRY JOB
              paymentsSvcImageRepositoryName: $(PAYMENTS_SVC_IMAGE_REPOSITORY_NAME)
              paymentsSvcReplicas: $(PAYMENTS_SVC_REPLICAS)
              paymentsSvcNodeSelectorPool: $(PAYMENTS_SVC_NODE_SELECTOR_POOL)
              paymentsSvcResourceLimitsCpu: $(PAYMENTS_SVC_RESOURCE_LIMITS_CPU)
              paymentsSvcResourceLimitsMemory: $(PAYMENTS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentsSvcResourceRequestsCpu: $(PAYMENTS_SVC_RESOURCE_REQUESTS_CPU)
              paymentsSvcResourceRequestsMemory: $(PAYMENTS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentsSvcPlatformEventsSubscription: $(PAYMENTS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentsSvcCronSchedule: $(PAYMENTS_SVC_CRON_SCHEDULE)
              paymentsSvcSuccessfulJobHistoryLimit: $(PAYMENTS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentsSvcFailedJobHistoryLimit: $(PAYMENTS_SVC_FAILED_JOB_HISTORY_LIMIT)
              paymentsSvcEnableAppInsights: $(PAYMENTS_SVC_ENABLE_APP_INSIGHTS)
              paymentsSvcEnableK8sAppInsights: $(PAYMENTS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # TRANSACTION RECORDS SVC & TRANSACTION RECORDS RETRIEVE JOB & TRANSACTION RECORDS STATEMENT JOB               
              txnRecordsSvcImageRepositoryName: $(TXN_RECORDS_SVC_IMAGE_REPOSITORY_NAME)
              txnRecordsSvcReplicas: $(TXN_RECORDS_SVC_REPLICAS)
              txnRecordsSvcNodeSelectorPool: $(TXN_RECORDS_SVC_NODE_SELECTOR_POOL)
              txnRecordsSvcResourceLimitCpu: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_CPU)
              txnRecordsSvcResourceLimitMemory: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_MEMORY)
              txnRecordsSvcResourceRequestCpu: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_CPU)
              txnRecordsSvcResourceRequestMemory: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_MEMORY)
              txnRecordsStmtsResourceLimitCpu: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_CPU)
              txnRecordsStmtsResourceLimitMemory: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_MEMORY)
              txnRecordsStmtsResourceRequestCpu: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_CPU)
              txnRecordsStmtsResourceRequestMemory: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_MEMORY)                
              txnRecordsSvcBroadcastPlatformEvents: $(TXN_RECORDS_SVC_BROADCAST_PLATFORM_EVENTS)
              txnRecordsSvcPlatformEmail: $(TXN_RECORDS_SVC_PLATFORM_EMAIL)
              txnRecordsSvcDbPlatformEventsSubscription: $(TXN_RECORDS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              txnRecordsSvcAppInsightsKey: $(TXN_RECORDS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              txnRecordsSvcProcessPlatformEvents: $(TXN_RECORDS_SVC_PROCESS_PLATFORM_EVENTS)
              txnRecordsSvcStatementsContainer: $(TXN_RECORDS_SVC_STATEMENTS_CONTAINER_NAME)
              txnRecordsSvcStatementPeriod: $(TXN_RECORDS_SVC_STATEMENT_PERIOD)
              txnRecordsSvcStatementsBlobConnString: $(TXN_RECORDS_SVC_STATEMENTS_BLOB_CONNECTION_STRING)
              txnRecordsSvcGeneratePdfStatement: $(TXN_RECORDS_SVC_GENERATE_PDF_STATEMENT)
              txnRecordsSvcGenerateStatementChunkSize: $(TXN_RECORDS_SVC_GENERATE_STATEMENT_CHUNK_SIZE)
              txnRecordsSvcStatementTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              txnRecordsStmtsRetrieveJobCronSchedule: $(TXN_RECORDS_STMTS_RETRIEVE_CRON_SCHEDULE)
              txnRecordsStmntsGenerationJobCronSchedule: $(TXN_RECORDS_STMTS_GENERATION_CRON_SCHEDULE)
              txnRecordsSvcSuccessfulJobHistoryLimit: $(TXN_RECORDS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              txnRecordsSvcFailedJobHistoryLimit: $(TXN_RECORDS_SVC_FAILED_JOB_HISTORY_LIMIT)
              txnRecordsRetrieveJobChunkSize: $(TXN_RECORDS_RETRIEVE_JOB_CHUNK_SIZE)              
              # WEPAY INTEGRATION SVC
              wepayIntegrationSvcImageRepositoryName: $(WEPAY_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              wepayIntegrationSvcReplicas: $(WEPAY_INTEGRATION_SVC_REPLICAS)
              wepayIntegrationSvcNodeSelectorPool: $(WEPAY_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              wepayIntegrationSvcResourceLimitsCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              wepayIntegrationSvcResourceLimitsMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              wepayIntegrationSvcResourceRequestCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              wepayIntegrationSvcResourceRequestMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              wepayIntegrationSvcNewRelicRecordMetric: $(WEPAY_INTEGRATION_SVC_NEW_RELIC_RECORD_METRIC)
              wepayIntegrationSvcRequestTimeout: $(WEPAY_INTEGRATION_SVC_REQUEST_TIMEOUT_MS)
              # EZPAY CLAIM SVC
              ezpayClaimSvcImageRepositoryName: $(EZPAY_CLAIM_SVC_IMAGE_REPOSITORY_NAME)
              ezpayClaimSvcReplicas: $(EZPAY_CLAIM_SVC_REPLICAS)
              ezpayClaimSvcNodeSelectorPool: $(EZPAY_CLAIM_SVC_NODE_SELECTOR_POOL)
              ezpayClaimSvcResourceLimitsCpu: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_CPU)
              ezpayClaimSvcResourceLimitsMemory: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayClaimSvcResourceRequestCpu: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_CPU)
              ezpayClaimSvcResourceRequestMemory: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_MEMORY)
              # EZPAY CHECKOUT SVC
              ezpayCheckoutSvcImageRepositoryName: $(EZPAY_CHECKOUT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayCheckoutSvcReplicas: $(EZPAY_CHECKOUT_SVC_REPLICAS)
              ezpayCheckoutSvcNodeSelectorPool: $(EZPAY_CHECKOUT_SVC_NODE_SELECTOR_POOL)
              ezpayCheckoutSvcResourceLimitsCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_CPU)
              ezpayCheckoutSvcResourceLimitsMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayCheckoutSvcResourceRequestCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayCheckoutSvcResourceRequestMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayCheckoutSvcKongIngressUpstreamHostHeader: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayCheckoutSvcKongIngressClass: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_CLASS)
              mongoDbEzpayCheckoutSvcCollectionName: $(MONGODB_EZPAY_CHECKOUT_SVC_COLLECTION)
              ezpayCheckoutSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayCheckoutSvcSubsMgmtApiKey: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_API_KEY)
              ezpayCheckoutSvcSubsMgmtServiceId: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayCheckoutSvcSessionExpiryInterval: $(EZPAY_CHECKOUT_SVC_SESSION_EXPIRY_INTERVAL)
              ezpayCheckoutSvcEzpayApiSvcGqlUrl: $(EZPAY_CHECKOUT_SVC_GQL_URL_EZPAY_API_SVC)
              # EZPAY REPORTS SVC
              ezpayReportSvcImageRepositoryName: $(EZPAY_REPORT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayReportSvcReplicas: $(EZPAY_REPORT_SVC_REPLICAS)
              ezpayReportSvcNodeSelectorPool: $(EZPAY_REPORT_SVC_NODE_SELECTOR_POOL)
              ezpayReportSvcResourceLimitsCpu: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_CPU)
              ezpayReportSvcResourceLimitsMemory: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayReportSvcResourceRequestCpu: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayReportSvcResourceRequestMemory: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_MEMORY)
              mongoDbEzpayReportSvcCollectionName: $(MONGODB_EZPAY_REPORT_SVC_COLLECTION)
              ezpayReportSvcSbPlatformEventsSubscription: $(EZPAY_REPORT_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayReportSvcBroadcastPlatformEvents: $(EZPAY_REPORT_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayReportSvcProcessPlatformEvents: $(EZPAY_REPORT_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayReportSvcBlobUrl: $(EZPAY_REPORT_SVC_BLOB_URL)
              ezpayReportSvcBlobContainer: $(EZPAY_REPORT_SVC_BLOB_CONTAINER)
              ezpayReportSvcBlobConnString: $(EZPAY_REPORT_SVC_BLOB_CONNECTION_STRING)
              ezpayReportSvcBlobSasTokenTtlMinutes: $(EZPAY_REPORT_SVC_BLOB_SAS_TOKEN_TTL_MINUTES)
              ezpayReportSvcReportDocTtlMinutes: $(EZPAY_REPORT_SVC_REPORT_DOC_TTL_MINUTES)

- stage: STG_Ezpay_Helm_Deploy_West
  displayName: STG (WEST) - Ezpay Svcs Helm Deploy
  dependsOn: STG_Ezpay_Approval
  condition: false

  jobs:
  - deployment: Helm_Deploy
    displayName: Helm Deploy
    environment: ezpay-multi-cluster-stg

    pool:
      vmImage: 'ubuntu-latest'

    variables:
    - group: ezpay-stg
    - template: ../ezpay-svcs/helm-variables-stg.yaml
    - template: ../ezpay-svcs/region-overrides/helm-variables-stg-west.yaml

    strategy:
      runOnce:
        deploy:
          steps:
          - template: ../templates/load-tags.yaml
            parameters:
              tagName: 'ezpay_tags' 

          - template: ../ezpay-svcs/helm-deploy-step.yaml
            parameters:
              serviceConnection: 'AzDevOps-Pipeline-Principal-DEV-TST-STG'
              svcPrincipalClientId: $(SVC_PRINCIPAL_CLIENT_ID_SHR)
              svcPrincipalSecret: $(SVC_PRINCIPAL_SECRET_SHR)
              azureTenantId: $(AZURE_TENANT_ID)
              aksName: $(AKS_NAME)
              aksResourceGroup: $(AKS_RESOURCE_GROUP)
              containerRegistryName: $(CONTAINER_REGISTRY_NAME)
              chartRepositoryName: $(CHART_REPOSITORY_NAME)
              chartName: $(CHART_NAME)
              helmReleaseName: $(HELM_RELEASE_NAME)
              k8sNamespace: $(K8S_NAMESPACE)
              env: $(ENV)
              location: $(LOCATION)
              # Common Configs
              wepayGrpcUrl: $(WEPAY_GRPC_URL)
              wepayBaseUrl: $(WEPAY_BASE_URL)
              wepayUploadBaseUrl: $(WEPAY_UPLOAD_BASE_URL)
              merchantPortalUrl: $(MERCHANT_PORTAL_URL)
              payerPortalUrl: $(PAYER_PORTAL_URL)
              apteanpayJsSdk: $(APTEAN_PAY_JS_SDK)
              serviceBusConnString: $(SB_CONN_STRING)
              wepayApiVersion: $(WEPAY_API_VERSION)
              wepayAppId: $(WEPAY_APP_ID)
              wepayAppToken: $(WEPAY_APP_TOKEN)
              serviceBusEventsTopic: $(SB_PLATFORM_EVENTS_TOPIC)
              serviceBusPlatformEventsTopicConnString: $(SB_PLATFORM_EVENTS_TOPIC_CONN_STRING)
              mongoDbConnString: $(MONGODB_CONN_STRING)
              mongoDbName: $(MONGODB_DB_NAME)
              mongoDbPaymentCancelRetriesCollectionName: $(MONGODB_PAYMENT_CANCEL_RETRIES_COLLECTION)
              mongoDbIdempotencyCollectionName: $(MONGODB_IDEMPOTENCY_COLLECTION)
              mongoDbEzpayApiSvcCollectionName: $(MONGODB_EZPAY_API_SVC_COLLECTION)
              mongoDbEmailNotificationSvcCollectionName: $(MONGODB_EMAIL_NOTIFICATIONS_SVC_COLLECTION)
              mongoDbPaymentsSvcCollectionName: $(MONGODB_PAYMENTS_SVC_COLLECTION)
              mongoDbTxnRecordsSvcCollectionName: $(MONGODB_TXN_RECORDS_SVC_COLLECTION)  
              mongoDbEzpayClaimSvcCollectionName: $(MONGODB_EZPAY_CLAIM_SVC_COLLECTION)
              newRelicCliApiKey: $(NEW_RELIC_CLI_API_KEY)
              newRelicAccountId: $(NEW_RELIC_ACCOUNT_ID)
              newRelicApiKey: $(NEW_RELIC_API_KEY)
              frontDoorId: $(FRONT_DOOR_ID)
              sentryDsn: $(SENTRY_DSN)
              # New Relic Agent Switches
              ezpayApiSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              erpIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              wepayIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              # Cancel Payment Retry Job
              paymentCancelRetryJobImageRepositoryName: $(PAYMENT_CANCEL_RETRY_JOB_IMAGE_REPOSITORY_NAME)
              paymentCancelRetryJobConfigCronSchedule: $(PAYMENT_CANCEL_RETRY_JOB_CRON_SCHEDULE)
              paymentCancelRetryJobConfigSuccessfulJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobConfigFailedJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_FAILED_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobNodeSelectorPool: $(PAYMENT_CANCEL_RETRY_JOB_NODE_SELECTOR_POOL)
              # ACCOUNT BALANCE UPDATE JOB
              acctBalanceJobImageRepositoryName: $(ACCT_BALANCE_JOB_IMAGE_REPOSITORY_NAME)
              acctBalanceJobSuccessfulJobHistoryLimit: $(ACCT_BALANCE_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              acctBalanceJobFailedJobHistoryLimit: $(ACCT_BALANCE_JOB_FAILED_JOB_HISTORY_LIMIT)
              acctBalanceJobCronSchedule: $(ACCT_BALANCE_JOB_CRON_SCHEDULE)
              acctBalanceJobNodeSelectorPool: $(ACCT_BALANCE_JOB_NODE_SELECTOR_POOL)  
              # EZPAY API SVC         
              ezpayApiSvcImageRepositoryName: $(EZPAY_API_SVC_IMAGE_REPOSITORY_NAME)
              ezpayApiSvcReplicas: $(EZPAY_API_SVC_REPLICAS)
              ezpayApiSvcNodeSelectorPool: $(EZPAY_API_SVC_NODE_SELECTOR_POOL)
              ezpayApiSvcResourceLimitsCpu: $(EZPAY_API_SVC_RESOURCE_LIMITS_CPU)
              ezpayApiSvcResourceLimitsMemory: $(EZPAY_API_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayApiSvcResourceRequestsCpu: $(EZPAY_API_SVC_RESOURCE_REQUESTS_CPU)
              ezpayApiSvcResourceRequestsMemory: $(EZPAY_API_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayApiSvcKongIngressUpstreamHostHeader: $(EZPAY_API_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayApiSvcKongIngressClass: $(EZPAY_API_SVC_KONG_INGRESS_CLASS)
              ezpayApiSvcCosdbConnString: $(EZPAY_API_SVC_COSMOSDB_CONN_STRING)
              ezpayApiSvcCosdbDatabase: $(EZPAY_API_SVC_COSMOSDB_DATABASE)
              ezpayApiSvcCosdbContainer: $(EZPAY_API_SVC_COSMOSDB_CONTAINER)
              ezpayApiSvcSbPlatformEventsSubscription: $(EZPAY_API_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayApiSvcAppInsightsKey: $(EZPAY_API_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              ezpayApiSvcB2cClientId: $(EZPAY_API_SVC_B2C_CLIENT_ID)
              ezpayApiSvcB2cDomainHost: $(EZPAY_API_SVC_B2C_DOMAIN_HOST)
              ezpayApiSvcB2cTenantId: $(EZPAY_API_SVC_B2C_TENANT_ID)
              ezpayApiSvcB2cPolicyName: $(EZPAY_API_SVC_B2C_POLICY_NAME)
              ezpayApiSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayApiSvcEzpayClaimSvcGrpcUrl: $(EZPAY_CLAIM_SVC_GRPC_URL)
              ezpayApiSvcSubsMgmtApiKey: $(EZPAY_API_SVC_SUBS_MGMT_API_KEY)
              ezpayApiSvcSubsMgmtServiceId: $(EZPAY_API_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayApiSvcPaymentPlatformFromPhoneNumber: $(PAYMENTS_PLATFORM_FROM_PHONE_NUMBER)
              ezpayApiSvcPaymentPlatformFromEmail: $(EZPAY_API_SVC_PAYMENTS_PLATFORM_FROM_EMAIL)
              ezpayApiSvcProcessPlatformEvents: $(EZPAY_API_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayApiSvcBlobStorageUrl: $(EZPAY_API_SVC_BLOB_STORAGE_URL)
              ezpayApiSvcEncryptPayerUrlToken: $(EZPAY_API_SVC_ENCRYPT_PAYER_URL_TOKEN)
              ezpayApiSvcEncryptKey: $(EZPAY_API_SVC_ENCRYPTION_KEY)
              ezpayApiSvcTosVersion: $(EZPAY_API_SVC_TOS_VERSION)
              ezpayApiSvcStatementsContainerName: $(EZPAY_API_SVC_STATEMENTS_CONTAINER_NAME)
              ezpayApiSvcInvoiceContainerName: $(EZPAY_API_SVC_INVOICE_CONTAINER_NAME)
              ezpayApiSvcInvoiceBlobConnString: $(EZPAY_API_SVC_INVOICE_BLOB_CONNECTION_STRING)
              ezpayApiSvcLogicAppUrlShortenerUrl: $(EZPAY_API_SVC_LOGIC_APP_URL_SHORTENER_URL)
              ezpayApiSvcProductApisOnly: $(EZPAY_API_SVC_PRODUCT_APIS_ONLY)
              ezpayApiSvcGrpcUrl: $(EZPAY_API_SVC_GRPC_URL)
              ezpayApiSvcBroadcastPlatformEvents: $(EZPAY_API_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayApiSvcNewRelicRecordMetricGql: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GQL)
              ezpayApiSvcNewRelicRecordMetricGrpc: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GRPC)
              ezpayApiSvcEzpayCheckoutSvcGrpcUrl: $(GRPC_URL_CHECKOUT_SVC)
              ezpayApiSvcEzpayReportSvcGrpcUrl: $(GRPC_URL_REPORT_SVC)
              # EMAIL NOTIFICATION SVC
              emailNotificationSvcImageRepositoryName: $(EMAIL_NOTIFICATION_SVC_IMAGE_REPOSITORY_NAME)
              emailNotificationSvcReplicas: $(EMAIL_NOTIFICATION_SVC_REPLICAS)
              emailNotificationSvcNodeSelectorPool: $(EMAIL_NOTIFICATION_SVC_NODE_SELECTOR_POOL)
              emailNotificationSvcResourceLimitsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_CPU)
              emailNotificationSvcResourceLimitsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_MEMORY)
              emailNotificationSvcResourceRequestsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_CPU)
              emailNotificationSvcResourceRequestsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_MEMORY)
              emailNotificationSvcDbPlatformEventsSubscription: $(EMAIL_NOTIFICATION_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              emailNotificationSvcAppInsightsKey: $(EMAIL_NOTIFICATION_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              emailNotificationSvcBroadcastPlatformEvents: $(EMAIL_NOTIFICATION_SVC_BROADCAST_PLATFORM_EVENTS)
              emailNotificationSvcEmailTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              emailNotificationSvcPlatformEmail: $(EMAIL_NOTIFICATION_SVC_PLATFORM_EMAIL)
              emailNotificationSvcPlatformName: $(EMAIL_NOTIFICATION_SVC_PLATFORM_NAME)
              emailNotificationSvcProcessPlatformEvents: $(EMAIL_NOTIFICATION_SVC_PROCESS_PLATFORM_EVENTS)
              # ERP INTEGRATION SVC
              erpIntegrationSvcImageRepositoryName: $(ERP_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              erpIntegrationSvcReplicas: $(ERP_INTEGRATION_SVC_REPLICAS)
              erpIntegrationSvcNodeSelectorPool: $(ERP_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              erpIntegrationSvcResourceLimitsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              erpIntegrationSvcResourceLimitsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              erpIntegrationSvcResourceRequestsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              erpIntegrationSvcResourceRequestsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              erpIntegrationSvcKongIngressUpstreamHostHeader: $(ERP_INTEGRATION_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              erpIntegrationSvcKongIngressClass: $(ERP_INTEGRATION_SVC_KONG_INGRESS_CLASS)
              erpIntegrationSvcEzpayApiSvcGqlUrl: $(ERP_INTEGRATION_SVC_GQL_URL_EZPAY_API_SVC)
              erpIntegrationSvcSyncTimeout: $(ERP_INTEGRATION_SVC_SYNC_TIMEOUT)
              erpIntegrationSvcSyncMaxWaitTime: $(ERP_INTEGRATION_SVC_SYNC_MAX_WAIT_TIME)
              # MERCHANT OPS SVC
              merchantOpsSvcImageRepositoryName: $(MERCHANT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              merchantOpsSvcReplicas: $(MERCHANT_OPS_SVC_REPLICAS)
              merchantOpsSvcNodeSelectorPool: $(MERCHANT_OPS_SVC_NODE_SELECTOR_POOL)
              merchantOpsSvcResourceLimitsCpu: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_CPU)
              merchantOpsSvcResourceLimitsMemory: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              merchantOpsSvcResourceRequestsCpu: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              merchantOpsSvcResourceRequestsMemory: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              merchantOpsSvcPlatformEventsSubscription: $(MERCHANT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              merchantOpsSvcEnableAppInsights: $(MERCHANT_OPS_SVC_ENABLE_APP_INSIGHTS)
              merchantOpsSvcEnableK8sAppInsights: $(MERCHANT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)
              # PAYFAC NOTIFICATIONS SVC
              payfacNotificationsSvcImageRepositoryName: $(PAYFAC_NOTIFICATIONS_SVC_IMAGE_REPOSITORY_NAME)
              payfacNotificationsSvcReplicas: $(PAYFAC_NOTIFICATIONS_SVC_REPLICAS)
              payfacNotificationsSvcNodeSelectorPool: $(PAYFAC_NOTIFICATIONS_SVC_NODE_SELECTOR_POOL)
              payfacNotificationsSvcResourceLimitsCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_CPU)
              payfacNotificationsSvcResourceLimitsMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_MEMORY)
              payfacNotificationsSvcResourceRequestCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_CPU)
              payfacNotificationsSvcResourceRequestMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_MEMORY)
              payfacNotificationsSvcSbPayfacTopicConnString: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC_CONN_STRING)
              payfacNotificationsSvcSbPayfacSubscription: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_SUBSCRIPTION)
              payfacNotificationsSvcSbPayfacTopic: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC)
              payfacNotificationsSvcAppInsightsKey: $(PAYFAC_NOTIFICATIONS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              payfacNotificationsSvcEzpayWebhookUrl: $(PAYFAC_NOTIFICATIONS_SVC_EZPAY_WEBHOOK_URL)
              payfacNotificationsSvcProcessPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_PLATFORM_EVENTS)
              payfacNotificationsSvcProcessNotificationEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_NOTIFICATION_EVENTS)
              payfacNotificationsSvcBroadcastPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_BROADCAST_PLATFORM_EVENTS)
              # PAYMENT OPS SVC
              paymentOpsSvcImageRepositoryName: $(PAYMENT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              paymentOpsSvcReplicas: $(PAYMENT_OPS_SVC_REPLICAS)
              paymentOpsSvcNodeSelectorPool: $(PAYMENT_OPS_SVC_NODE_SELECTOR_POOL)
              paymentOpsSvcResourceLimitsCpu: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_CPU)
              paymentOpsSvcResourceLimitsMemory: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentOpsSvcResourceRequestsCpu: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              paymentOpsSvcResourceRequestsMemory: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentOpsSvcSbPlatformEventsSubscription: $(PAYMENT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentOpsSvcSbEmailReqQueueConnString: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbEmailReqQueue: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE)
              paymentOpsSvcSbSmsReqQueueConnString: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbSmsReqQueue: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE)
              paymentOpsSvcEnableAppInsights: $(PAYMENT_OPS_SVC_ENABLE_APP_INSIGHTS)
              paymentOpsSvcEnableK8sAppInsights: $(PAYMENT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # PAYMENTS SVC & PAYMENTS RETRY JOB
              paymentsSvcImageRepositoryName: $(PAYMENTS_SVC_IMAGE_REPOSITORY_NAME)
              paymentsSvcReplicas: $(PAYMENTS_SVC_REPLICAS)
              paymentsSvcNodeSelectorPool: $(PAYMENTS_SVC_NODE_SELECTOR_POOL)
              paymentsSvcResourceLimitsCpu: $(PAYMENTS_SVC_RESOURCE_LIMITS_CPU)
              paymentsSvcResourceLimitsMemory: $(PAYMENTS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentsSvcResourceRequestsCpu: $(PAYMENTS_SVC_RESOURCE_REQUESTS_CPU)
              paymentsSvcResourceRequestsMemory: $(PAYMENTS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentsSvcPlatformEventsSubscription: $(PAYMENTS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentsSvcCronSchedule: $(PAYMENTS_SVC_CRON_SCHEDULE)
              paymentsSvcSuccessfulJobHistoryLimit: $(PAYMENTS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentsSvcFailedJobHistoryLimit: $(PAYMENTS_SVC_FAILED_JOB_HISTORY_LIMIT)
              paymentsSvcEnableAppInsights: $(PAYMENTS_SVC_ENABLE_APP_INSIGHTS)
              paymentsSvcEnableK8sAppInsights: $(PAYMENTS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # TRANSACTION RECORDS SVC & TRANSACTION RECORDS RETRIEVE JOB & TRANSACTION RECORDS STATEMENT JOB               
              txnRecordsSvcImageRepositoryName: $(TXN_RECORDS_SVC_IMAGE_REPOSITORY_NAME)
              txnRecordsSvcReplicas: $(TXN_RECORDS_SVC_REPLICAS)
              txnRecordsSvcNodeSelectorPool: $(TXN_RECORDS_SVC_NODE_SELECTOR_POOL)
              txnRecordsSvcResourceLimitCpu: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_CPU)
              txnRecordsSvcResourceLimitMemory: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_MEMORY)
              txnRecordsSvcResourceRequestCpu: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_CPU)
              txnRecordsSvcResourceRequestMemory: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_MEMORY)
              txnRecordsStmtsResourceLimitCpu: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_CPU)
              txnRecordsStmtsResourceLimitMemory: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_MEMORY)
              txnRecordsStmtsResourceRequestCpu: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_CPU)
              txnRecordsStmtsResourceRequestMemory: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_MEMORY)                
              txnRecordsSvcBroadcastPlatformEvents: $(TXN_RECORDS_SVC_BROADCAST_PLATFORM_EVENTS)
              txnRecordsSvcPlatformEmail: $(TXN_RECORDS_SVC_PLATFORM_EMAIL)
              txnRecordsSvcDbPlatformEventsSubscription: $(TXN_RECORDS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              txnRecordsSvcAppInsightsKey: $(TXN_RECORDS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              txnRecordsSvcProcessPlatformEvents: $(TXN_RECORDS_SVC_PROCESS_PLATFORM_EVENTS)
              txnRecordsSvcStatementsContainer: $(TXN_RECORDS_SVC_STATEMENTS_CONTAINER_NAME)
              txnRecordsSvcStatementPeriod: $(TXN_RECORDS_SVC_STATEMENT_PERIOD)
              txnRecordsSvcStatementsBlobConnString: $(TXN_RECORDS_SVC_STATEMENTS_BLOB_CONNECTION_STRING)
              txnRecordsSvcGeneratePdfStatement: $(TXN_RECORDS_SVC_GENERATE_PDF_STATEMENT)
              txnRecordsSvcGenerateStatementChunkSize: $(TXN_RECORDS_SVC_GENERATE_STATEMENT_CHUNK_SIZE)
              txnRecordsSvcStatementTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              txnRecordsSvcCronSchedule: $(TXN_RECORDS_SVC_CRON_SCHEDULE)
              txnRecordsSvcSuccessfulJobHistoryLimit: $(TXN_RECORDS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              txnRecordsSvcFailedJobHistoryLimit: $(TXN_RECORDS_SVC_FAILED_JOB_HISTORY_LIMIT)
              txnRecordsRetrieveJobChunkSize: $(TXN_RECORDS_RETRIEVE_JOB_CHUNK_SIZE)              
              # WEPAY INTEGRATION SVC
              wepayIntegrationSvcImageRepositoryName: $(WEPAY_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              wepayIntegrationSvcReplicas: $(WEPAY_INTEGRATION_SVC_REPLICAS)
              wepayIntegrationSvcNodeSelectorPool: $(WEPAY_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              wepayIntegrationSvcResourceLimitsCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              wepayIntegrationSvcResourceLimitsMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              wepayIntegrationSvcResourceRequestCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              wepayIntegrationSvcResourceRequestMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              wepayIntegrationSvcNewRelicRecordMetric: $(WEPAY_INTEGRATION_SVC_NEW_RELIC_RECORD_METRIC)
              wepayIntegrationSvcRequestTimeout: $(WEPAY_INTEGRATION_SVC_REQUEST_TIMEOUT_MS)
              # EZPAY CLAIM SVC
              ezpayClaimSvcImageRepositoryName: $(EZPAY_CLAIM_SVC_IMAGE_REPOSITORY_NAME)
              ezpayClaimSvcReplicas: $(EZPAY_CLAIM_SVC_REPLICAS)
              ezpayClaimSvcNodeSelectorPool: $(EZPAY_CLAIM_SVC_NODE_SELECTOR_POOL)
              ezpayClaimSvcResourceLimitsCpu: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_CPU)
              ezpayClaimSvcResourceLimitsMemory: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayClaimSvcResourceRequestCpu: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_CPU)
              ezpayClaimSvcResourceRequestMemory: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_MEMORY)
              # EZPAY CHECKOUT SVC
              ezpayCheckoutSvcImageRepositoryName: $(EZPAY_CHECKOUT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayCheckoutSvcReplicas: $(EZPAY_CHECKOUT_SVC_REPLICAS)
              ezpayCheckoutSvcNodeSelectorPool: $(EZPAY_CHECKOUT_SVC_NODE_SELECTOR_POOL)
              ezpayCheckoutSvcResourceLimitsCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_CPU)
              ezpayCheckoutSvcResourceLimitsMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayCheckoutSvcResourceRequestCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayCheckoutSvcResourceRequestMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayCheckoutSvcKongIngressUpstreamHostHeader: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayCheckoutSvcKongIngressClass: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_CLASS)
              mongoDbEzpayCheckoutSvcCollectionName: $(MONGODB_EZPAY_CHECKOUT_SVC_COLLECTION)
              ezpayCheckoutSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayCheckoutSvcSubsMgmtApiKey: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_API_KEY)
              ezpayCheckoutSvcSubsMgmtServiceId: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayCheckoutSvcSessionExpiryInterval: $(EZPAY_CHECKOUT_SVC_SESSION_EXPIRY_INTERVAL)
              ezpayCheckoutSvcEzpayApiSvcGqlUrl: $(EZPAY_CHECKOUT_SVC_GQL_URL_EZPAY_API_SVC)
              # EZPAY REPORTS SVC
              ezpayReportSvcImageRepositoryName: $(EZPAY_REPORT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayReportSvcReplicas: $(EZPAY_REPORT_SVC_REPLICAS)
              ezpayReportSvcNodeSelectorPool: $(EZPAY_REPORT_SVC_NODE_SELECTOR_POOL)
              ezpayReportSvcResourceLimitsCpu: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_CPU)
              ezpayReportSvcResourceLimitsMemory: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayReportSvcResourceRequestCpu: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayReportSvcResourceRequestMemory: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_MEMORY)
              mongoDbEzpayReportSvcCollectionName: $(MONGODB_EZPAY_REPORT_SVC_COLLECTION)
              ezpayReportSvcSbPlatformEventsSubscription: $(EZPAY_REPORT_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayReportSvcBroadcastPlatformEvents: $(EZPAY_REPORT_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayReportSvcProcessPlatformEvents: $(EZPAY_REPORT_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayReportSvcBlobUrl: $(EZPAY_REPORT_SVC_BLOB_URL)
              ezpayReportSvcBlobContainer: $(EZPAY_REPORT_SVC_BLOB_CONTAINER)
              ezpayReportSvcBlobConnString: $(EZPAY_REPORT_SVC_BLOB_CONNECTION_STRING)
              ezpayReportSvcBlobSasTokenTtlMinutes: $(EZPAY_REPORT_SVC_BLOB_SAS_TOKEN_TTL_MINUTES)
              ezpayReportSvcReportDocTtlMinutes: $(EZPAY_REPORT_SVC_REPORT_DOC_TTL_MINUTES)

- stage: STG_Merchant_Portal_Deploy
  displayName: STG - Merchant Portal Deployment
  dependsOn: STG_Ezpay_Approval

  jobs:
    - template: ../templates/deploy-ezpay-static.yaml
      parameters:
        variableGroup: ezpay-merchant-stg
        targetEnvironment: ezpay-merchant-stg
        dropArtifactPath: $(Pipeline.Workspace)/merchant_portal_static_files/drop/stg.zip
        azureServiceConnection: AzDevOps-Pipeline-Principal-DEV-TST-STG        

- stage: STG_Payer_Portal_Deploy

  displayName: STG - Payer Portal Deployment
  dependsOn: STG_Ezpay_Approval

  jobs:
    - template: ../templates/deploy-ezpay-static.yaml
      parameters:
        variableGroup: ezpay-payer-stg
        targetEnvironment: ezpay-payer-stg
        dropArtifactPath: $(Pipeline.Workspace)/payer_portal_static_files/drop/stg.zip
        azureServiceConnection: AzDevOps-Pipeline-Principal-DEV-TST-STG

- stage: STG_Static_Assets_Deploy
  displayName: STG Static Assets Deploy
  dependsOn: STG_Ezpay_Approval

  jobs:
  - template: static-assets/azp-yaml/templates/ezpay-static-assets-deployment-job.yaml@ezpay-backend-services
    parameters:
      environment: ezpay-static-stg
      serviceConnection: AzDevOps-Pipeline-Principal-DEV-TST-STG
      storageAccount: stezpaytenantfilesstg001

- stage: STG_Aptean_Pay_Js_Library_Deploy
  displayName: STG - Aptean Pay JS Library Deployment
  dependsOn: STG_Ezpay_Approval

  jobs:
    - template: ../templates/deploy-ezpay-static.yaml
      parameters:
        variableGroup: apteanpay-js-lib-stg
        targetEnvironment: apteanpay-js-stg
        dropArtifactPath: $(Pipeline.Workspace)/aptean_pay_js_static_files/drop/stg.zip
        azureServiceConnection: AzDevOps-Pipeline-Principal-DEV-TST-STG

- stage: PRD_Ezpay_Approval
  displayName: PRD - Approval
  dependsOn:
  - STG_Ezpay_Helm_Deploy_East
  # - STG_Ezpay_Helm_Deploy_West

  jobs:
  - deployment: Deploy_All
    displayName: Deploy All
    environment: ezpay-approval-prd

    pool:
      vmImage: 'ubuntu-latest'
      
    strategy:
      runOnce:
        deploy:
          steps:
          - script: echo "PRD - Deploy All Ezpay:" APPROVED

- stage: PRD_Ezpay_Helm_Deploy_East
  displayName: PRD (EAST) - Ezpay Svcs Helm Deploy
  dependsOn: PRD_Ezpay_Approval

  jobs:
  - deployment: Helm_Deploy
    displayName: Helm Deploy
    environment: ezpay-multi-cluster-prd

    pool:
      vmImage: 'ubuntu-latest'

    variables:
    - group: ezpay-prd
    - template: ../ezpay-svcs/helm-variables-prd.yaml

    strategy:
      runOnce:
        deploy:
          steps:
          - template: ../templates/load-tags.yaml
            parameters:
              tagName: 'ezpay_tags' 

          - template: ../ezpay-svcs/helm-deploy-step.yaml
            parameters:
              serviceConnection: 'AzDevOps-Pipeline-Principal-PRD'
              svcPrincipalClientId: $(SVC_PRINCIPAL_CLIENT_ID_PRD)
              svcPrincipalSecret: $(SVC_PRINCIPAL_SECRET_PRD)
              azureTenantId: $(AZURE_TENANT_ID)
              aksName: $(AKS_NAME)
              aksResourceGroup: $(AKS_RESOURCE_GROUP)
              containerRegistryName: $(CONTAINER_REGISTRY_NAME)
              chartRepositoryName: $(CHART_REPOSITORY_NAME)
              chartName: $(CHART_NAME)
              helmReleaseName: $(HELM_RELEASE_NAME)
              k8sNamespace: $(K8S_NAMESPACE)
              env: $(ENV)
              location: $(LOCATION)
              nodeJsEnv: 'production'
              # Common Configs
              wepayGrpcUrl: $(WEPAY_GRPC_URL)
              wepayBaseUrl: $(WEPAY_BASE_URL)
              wepayUploadBaseUrl: $(WEPAY_UPLOAD_BASE_URL)
              merchantPortalUrl: $(MERCHANT_PORTAL_URL)
              payerPortalUrl: $(PAYER_PORTAL_URL)
              apteanpayJsSdk: $(APTEAN_PAY_JS_SDK)
              serviceBusConnString: $(SB_CONN_STRING)
              wepayApiVersion: $(WEPAY_API_VERSION)
              wepayAppId: $(WEPAY_APP_ID)
              wepayAppToken: $(WEPAY_APP_TOKEN)
              serviceBusEventsTopic: $(SB_PLATFORM_EVENTS_TOPIC)
              serviceBusPlatformEventsTopicConnString: $(SB_PLATFORM_EVENTS_TOPIC_CONN_STRING)
              mongoDbConnString: $(MONGODB_CONN_STRING)
              mongoDbName: $(MONGODB_DB_NAME)
              mongoDbPaymentCancelRetriesCollectionName: $(MONGODB_PAYMENT_CANCEL_RETRIES_COLLECTION)
              mongoDbIdempotencyCollectionName: $(MONGODB_IDEMPOTENCY_COLLECTION)
              mongoDbEzpayApiSvcCollectionName: $(MONGODB_EZPAY_API_SVC_COLLECTION)
              mongoDbEmailNotificationSvcCollectionName: $(MONGODB_EMAIL_NOTIFICATIONS_SVC_COLLECTION)
              mongoDbPaymentsSvcCollectionName: $(MONGODB_PAYMENTS_SVC_COLLECTION)
              mongoDbTxnRecordsSvcCollectionName: $(MONGODB_TXN_RECORDS_SVC_COLLECTION)  
              mongoDbEzpayClaimSvcCollectionName: $(MONGODB_EZPAY_CLAIM_SVC_COLLECTION)
              newRelicCliApiKey: $(NEW_RELIC_CLI_API_KEY)
              newRelicAccountId: $(NEW_RELIC_ACCOUNT_ID)
              newRelicApiKey: $(NEW_RELIC_API_KEY)
              frontDoorId: $(FRONT_DOOR_ID)
              sentryDsn: $(SENTRY_DSN)
              # New Relic Agent Switches
              ezpayApiSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              erpIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              wepayIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              # Cancel Payment Retry Job
              paymentCancelRetryJobImageRepositoryName: $(PAYMENT_CANCEL_RETRY_JOB_IMAGE_REPOSITORY_NAME)
              paymentCancelRetryJobConfigCronSchedule: $(PAYMENT_CANCEL_RETRY_JOB_CRON_SCHEDULE)
              paymentCancelRetryJobConfigSuccessfulJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobConfigFailedJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_FAILED_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobNodeSelectorPool: $(PAYMENT_CANCEL_RETRY_JOB_NODE_SELECTOR_POOL)
              # ACCOUNT BALANCE UPDATE JOB
              acctBalanceJobImageRepositoryName: $(ACCT_BALANCE_JOB_IMAGE_REPOSITORY_NAME)
              acctBalanceJobSuccessfulJobHistoryLimit: $(ACCT_BALANCE_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              acctBalanceJobFailedJobHistoryLimit: $(ACCT_BALANCE_JOB_FAILED_JOB_HISTORY_LIMIT)
              acctBalanceJobCronSchedule: $(ACCT_BALANCE_JOB_CRON_SCHEDULE)
              acctBalanceJobNodeSelectorPool: $(ACCT_BALANCE_JOB_NODE_SELECTOR_POOL)  
              # EZPAY API SVC         
              ezpayApiSvcImageRepositoryName: $(EZPAY_API_SVC_IMAGE_REPOSITORY_NAME)
              ezpayApiSvcReplicas: $(EZPAY_API_SVC_REPLICAS)
              ezpayApiSvcNodeSelectorPool: $(EZPAY_API_SVC_NODE_SELECTOR_POOL)
              ezpayApiSvcResourceLimitsCpu: $(EZPAY_API_SVC_RESOURCE_LIMITS_CPU)
              ezpayApiSvcResourceLimitsMemory: $(EZPAY_API_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayApiSvcResourceRequestsCpu: $(EZPAY_API_SVC_RESOURCE_REQUESTS_CPU)
              ezpayApiSvcResourceRequestsMemory: $(EZPAY_API_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayApiSvcKongIngressUpstreamHostHeader: $(EZPAY_API_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayApiSvcKongIngressClass: $(EZPAY_API_SVC_KONG_INGRESS_CLASS)
              ezpayApiSvcCosdbConnString: $(EZPAY_API_SVC_COSMOSDB_CONN_STRING)
              ezpayApiSvcCosdbDatabase: $(EZPAY_API_SVC_COSMOSDB_DATABASE)
              ezpayApiSvcCosdbContainer: $(EZPAY_API_SVC_COSMOSDB_CONTAINER)
              ezpayApiSvcSbPlatformEventsSubscription: $(EZPAY_API_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayApiSvcAppInsightsKey: $(EZPAY_API_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              ezpayApiSvcB2cClientId: $(EZPAY_API_SVC_B2C_CLIENT_ID)
              ezpayApiSvcB2cDomainHost: $(EZPAY_API_SVC_B2C_DOMAIN_HOST)
              ezpayApiSvcB2cTenantId: $(EZPAY_API_SVC_B2C_TENANT_ID)
              ezpayApiSvcB2cPolicyName: $(EZPAY_API_SVC_B2C_POLICY_NAME)
              ezpayApiSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayApiSvcEzpayClaimSvcGrpcUrl: $(EZPAY_CLAIM_SVC_GRPC_URL)
              ezpayApiSvcSubsMgmtApiKey: $(EZPAY_API_SVC_SUBS_MGMT_API_KEY)
              ezpayApiSvcSubsMgmtServiceId: $(EZPAY_API_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayApiSvcPaymentPlatformFromPhoneNumber: $(PAYMENTS_PLATFORM_FROM_PHONE_NUMBER)
              ezpayApiSvcPaymentPlatformFromEmail: $(EZPAY_API_SVC_PAYMENTS_PLATFORM_FROM_EMAIL)
              ezpayApiSvcProcessPlatformEvents: $(EZPAY_API_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayApiSvcBlobStorageUrl: $(EZPAY_API_SVC_BLOB_STORAGE_URL)
              ezpayApiSvcEncryptPayerUrlToken: $(EZPAY_API_SVC_ENCRYPT_PAYER_URL_TOKEN)
              ezpayApiSvcEncryptKey: $(EZPAY_API_SVC_ENCRYPTION_KEY)
              ezpayApiSvcTosVersion: $(EZPAY_API_SVC_TOS_VERSION)
              ezpayApiSvcStatementsContainerName: $(EZPAY_API_SVC_STATEMENTS_CONTAINER_NAME)
              ezpayApiSvcInvoiceContainerName: $(EZPAY_API_SVC_INVOICE_CONTAINER_NAME)
              ezpayApiSvcInvoiceBlobConnString: $(EZPAY_API_SVC_INVOICE_BLOB_CONNECTION_STRING)
              ezpayApiSvcLogicAppUrlShortenerUrl: $(EZPAY_API_SVC_LOGIC_APP_URL_SHORTENER_URL)
              ezpayApiSvcProductApisOnly: $(EZPAY_API_SVC_PRODUCT_APIS_ONLY)
              ezpayApiSvcGrpcUrl: $(EZPAY_API_SVC_GRPC_URL)
              ezpayApiSvcBroadcastPlatformEvents: $(EZPAY_API_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayApiSvcNewRelicRecordMetricGql: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GQL)
              ezpayApiSvcNewRelicRecordMetricGrpc: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GRPC)
              ezpayApiSvcEzpayCheckoutSvcGrpcUrl: $(GRPC_URL_CHECKOUT_SVC)
              ezpayApiSvcEzpayReportSvcGrpcUrl: $(GRPC_URL_REPORT_SVC)
              # EMAIL NOTIFICATION SVC
              emailNotificationSvcImageRepositoryName: $(EMAIL_NOTIFICATION_SVC_IMAGE_REPOSITORY_NAME)
              emailNotificationSvcReplicas: $(EMAIL_NOTIFICATION_SVC_REPLICAS)
              emailNotificationSvcNodeSelectorPool: $(EMAIL_NOTIFICATION_SVC_NODE_SELECTOR_POOL)
              emailNotificationSvcResourceLimitsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_CPU)
              emailNotificationSvcResourceLimitsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_MEMORY)
              emailNotificationSvcResourceRequestsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_CPU)
              emailNotificationSvcResourceRequestsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_MEMORY)
              emailNotificationSvcDbPlatformEventsSubscription: $(EMAIL_NOTIFICATION_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              emailNotificationSvcAppInsightsKey: $(EMAIL_NOTIFICATION_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              emailNotificationSvcBroadcastPlatformEvents: $(EMAIL_NOTIFICATION_SVC_BROADCAST_PLATFORM_EVENTS)
              emailNotificationSvcEmailTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              emailNotificationSvcPlatformEmail: $(EMAIL_NOTIFICATION_SVC_PLATFORM_EMAIL)
              emailNotificationSvcPlatformName: $(EMAIL_NOTIFICATION_SVC_PLATFORM_NAME)
              emailNotificationSvcProcessPlatformEvents: $(EMAIL_NOTIFICATION_SVC_PROCESS_PLATFORM_EVENTS)
              # ERP INTEGRATION SVC
              erpIntegrationSvcImageRepositoryName: $(ERP_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              erpIntegrationSvcReplicas: $(ERP_INTEGRATION_SVC_REPLICAS)
              erpIntegrationSvcNodeSelectorPool: $(ERP_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              erpIntegrationSvcResourceLimitsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              erpIntegrationSvcResourceLimitsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              erpIntegrationSvcResourceRequestsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              erpIntegrationSvcResourceRequestsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              erpIntegrationSvcKongIngressUpstreamHostHeader: $(ERP_INTEGRATION_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              erpIntegrationSvcKongIngressClass: $(ERP_INTEGRATION_SVC_KONG_INGRESS_CLASS)
              erpIntegrationSvcEzpayApiSvcGqlUrl: $(ERP_INTEGRATION_SVC_GQL_URL_EZPAY_API_SVC)
              erpIntegrationSvcSyncTimeout: $(ERP_INTEGRATION_SVC_SYNC_TIMEOUT)
              erpIntegrationSvcSyncMaxWaitTime: $(ERP_INTEGRATION_SVC_SYNC_MAX_WAIT_TIME)
              # MERCHANT OPS SVC
              merchantOpsSvcImageRepositoryName: $(MERCHANT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              merchantOpsSvcReplicas: $(MERCHANT_OPS_SVC_REPLICAS)
              merchantOpsSvcNodeSelectorPool: $(MERCHANT_OPS_SVC_NODE_SELECTOR_POOL)
              merchantOpsSvcResourceLimitsCpu: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_CPU)
              merchantOpsSvcResourceLimitsMemory: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              merchantOpsSvcResourceRequestsCpu: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              merchantOpsSvcResourceRequestsMemory: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              merchantOpsSvcPlatformEventsSubscription: $(MERCHANT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              merchantOpsSvcEnableAppInsights: $(MERCHANT_OPS_SVC_ENABLE_APP_INSIGHTS)
              merchantOpsSvcEnableK8sAppInsights: $(MERCHANT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)
              # PAYFAC NOTIFICATIONS SVC
              payfacNotificationsSvcImageRepositoryName: $(PAYFAC_NOTIFICATIONS_SVC_IMAGE_REPOSITORY_NAME)
              payfacNotificationsSvcReplicas: $(PAYFAC_NOTIFICATIONS_SVC_REPLICAS)
              payfacNotificationsSvcNodeSelectorPool: $(PAYFAC_NOTIFICATIONS_SVC_NODE_SELECTOR_POOL)
              payfacNotificationsSvcResourceLimitsCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_CPU)
              payfacNotificationsSvcResourceLimitsMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_MEMORY)
              payfacNotificationsSvcResourceRequestCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_CPU)
              payfacNotificationsSvcResourceRequestMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_MEMORY)
              payfacNotificationsSvcSbPayfacTopicConnString: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC_CONN_STRING)
              payfacNotificationsSvcSbPayfacSubscription: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_SUBSCRIPTION)
              payfacNotificationsSvcSbPayfacTopic: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC)
              payfacNotificationsSvcAppInsightsKey: $(PAYFAC_NOTIFICATIONS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              payfacNotificationsSvcEzpayWebhookUrl: $(PAYFAC_NOTIFICATIONS_SVC_EZPAY_WEBHOOK_URL)
              payfacNotificationsSvcProcessPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_PLATFORM_EVENTS)
              payfacNotificationsSvcProcessNotificationEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_NOTIFICATION_EVENTS)
              payfacNotificationsSvcBroadcastPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_BROADCAST_PLATFORM_EVENTS)
              # PAYMENT OPS SVC
              paymentOpsSvcImageRepositoryName: $(PAYMENT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              paymentOpsSvcReplicas: $(PAYMENT_OPS_SVC_REPLICAS)
              paymentOpsSvcNodeSelectorPool: $(PAYMENT_OPS_SVC_NODE_SELECTOR_POOL)
              paymentOpsSvcResourceLimitsCpu: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_CPU)
              paymentOpsSvcResourceLimitsMemory: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentOpsSvcResourceRequestsCpu: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              paymentOpsSvcResourceRequestsMemory: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentOpsSvcSbPlatformEventsSubscription: $(PAYMENT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentOpsSvcSbEmailReqQueueConnString: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbEmailReqQueue: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE)
              paymentOpsSvcSbSmsReqQueueConnString: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbSmsReqQueue: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE)
              paymentOpsSvcEnableAppInsights: $(PAYMENT_OPS_SVC_ENABLE_APP_INSIGHTS)
              paymentOpsSvcEnableK8sAppInsights: $(PAYMENT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # PAYMENTS SVC & PAYMENTS RETRY JOB
              paymentsSvcImageRepositoryName: $(PAYMENTS_SVC_IMAGE_REPOSITORY_NAME)
              paymentsSvcReplicas: $(PAYMENTS_SVC_REPLICAS)
              paymentsSvcNodeSelectorPool: $(PAYMENTS_SVC_NODE_SELECTOR_POOL)
              paymentsSvcResourceLimitsCpu: $(PAYMENTS_SVC_RESOURCE_LIMITS_CPU)
              paymentsSvcResourceLimitsMemory: $(PAYMENTS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentsSvcResourceRequestsCpu: $(PAYMENTS_SVC_RESOURCE_REQUESTS_CPU)
              paymentsSvcResourceRequestsMemory: $(PAYMENTS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentsSvcPlatformEventsSubscription: $(PAYMENTS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentsSvcCronSchedule: $(PAYMENTS_SVC_CRON_SCHEDULE)
              paymentsSvcSuccessfulJobHistoryLimit: $(PAYMENTS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentsSvcFailedJobHistoryLimit: $(PAYMENTS_SVC_FAILED_JOB_HISTORY_LIMIT)
              paymentsSvcEnableAppInsights: $(PAYMENTS_SVC_ENABLE_APP_INSIGHTS)
              paymentsSvcEnableK8sAppInsights: $(PAYMENTS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # TRANSACTION RECORDS SVC & TRANSACTION RECORDS RETRIEVE JOB & TRANSACTION RECORDS STATEMENT JOB               
              txnRecordsSvcImageRepositoryName: $(TXN_RECORDS_SVC_IMAGE_REPOSITORY_NAME)
              txnRecordsSvcReplicas: $(TXN_RECORDS_SVC_REPLICAS)
              txnRecordsSvcNodeSelectorPool: $(TXN_RECORDS_SVC_NODE_SELECTOR_POOL)
              txnRecordsSvcResourceLimitCpu: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_CPU)
              txnRecordsSvcResourceLimitMemory: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_MEMORY)
              txnRecordsSvcResourceRequestCpu: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_CPU)
              txnRecordsSvcResourceRequestMemory: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_MEMORY)
              txnRecordsStmtsResourceLimitCpu: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_CPU)
              txnRecordsStmtsResourceLimitMemory: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_MEMORY)
              txnRecordsStmtsResourceRequestCpu: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_CPU)
              txnRecordsStmtsResourceRequestMemory: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_MEMORY)                
              txnRecordsSvcBroadcastPlatformEvents: $(TXN_RECORDS_SVC_BROADCAST_PLATFORM_EVENTS)
              txnRecordsSvcPlatformEmail: $(TXN_RECORDS_SVC_PLATFORM_EMAIL)
              txnRecordsSvcDbPlatformEventsSubscription: $(TXN_RECORDS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              txnRecordsSvcAppInsightsKey: $(TXN_RECORDS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              txnRecordsSvcProcessPlatformEvents: $(TXN_RECORDS_SVC_PROCESS_PLATFORM_EVENTS)
              txnRecordsSvcStatementsContainer: $(TXN_RECORDS_SVC_STATEMENTS_CONTAINER_NAME)
              txnRecordsSvcStatementPeriod: $(TXN_RECORDS_SVC_STATEMENT_PERIOD)
              txnRecordsSvcStatementsBlobConnString: $(TXN_RECORDS_SVC_STATEMENTS_BLOB_CONNECTION_STRING)
              txnRecordsSvcGeneratePdfStatement: $(TXN_RECORDS_SVC_GENERATE_PDF_STATEMENT)
              txnRecordsSvcGenerateStatementChunkSize: $(TXN_RECORDS_SVC_GENERATE_STATEMENT_CHUNK_SIZE)
              txnRecordsSvcStatementTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              txnRecordsStmtsRetrieveJobCronSchedule: $(TXN_RECORDS_STMTS_RETRIEVE_CRON_SCHEDULE)
              txnRecordsStmntsGenerationJobCronSchedule: $(TXN_RECORDS_STMTS_GENERATION_CRON_SCHEDULE)
              txnRecordsSvcSuccessfulJobHistoryLimit: $(TXN_RECORDS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              txnRecordsSvcFailedJobHistoryLimit: $(TXN_RECORDS_SVC_FAILED_JOB_HISTORY_LIMIT)
              txnRecordsRetrieveJobChunkSize: $(TXN_RECORDS_RETRIEVE_JOB_CHUNK_SIZE)              
              # WEPAY INTEGRATION SVC
              wepayIntegrationSvcImageRepositoryName: $(WEPAY_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              wepayIntegrationSvcReplicas: $(WEPAY_INTEGRATION_SVC_REPLICAS)
              wepayIntegrationSvcNodeSelectorPool: $(WEPAY_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              wepayIntegrationSvcResourceLimitsCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              wepayIntegrationSvcResourceLimitsMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              wepayIntegrationSvcResourceRequestCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              wepayIntegrationSvcResourceRequestMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              wepayIntegrationSvcNewRelicRecordMetric: $(WEPAY_INTEGRATION_SVC_NEW_RELIC_RECORD_METRIC)
              wepayIntegrationSvcRequestTimeout: $(WEPAY_INTEGRATION_SVC_REQUEST_TIMEOUT_MS)
              # EZPAY CLAIM SVC
              ezpayClaimSvcImageRepositoryName: $(EZPAY_CLAIM_SVC_IMAGE_REPOSITORY_NAME)
              ezpayClaimSvcReplicas: $(EZPAY_CLAIM_SVC_REPLICAS)
              ezpayClaimSvcNodeSelectorPool: $(EZPAY_CLAIM_SVC_NODE_SELECTOR_POOL)
              ezpayClaimSvcResourceLimitsCpu: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_CPU)
              ezpayClaimSvcResourceLimitsMemory: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayClaimSvcResourceRequestCpu: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_CPU)
              ezpayClaimSvcResourceRequestMemory: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_MEMORY)
              # EZPAY CHECKOUT SVC
              ezpayCheckoutSvcImageRepositoryName: $(EZPAY_CHECKOUT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayCheckoutSvcReplicas: $(EZPAY_CHECKOUT_SVC_REPLICAS)
              ezpayCheckoutSvcNodeSelectorPool: $(EZPAY_CHECKOUT_SVC_NODE_SELECTOR_POOL)
              ezpayCheckoutSvcResourceLimitsCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_CPU)
              ezpayCheckoutSvcResourceLimitsMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayCheckoutSvcResourceRequestCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayCheckoutSvcResourceRequestMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayCheckoutSvcKongIngressUpstreamHostHeader: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayCheckoutSvcKongIngressClass: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_CLASS)
              mongoDbEzpayCheckoutSvcCollectionName: $(MONGODB_EZPAY_CHECKOUT_SVC_COLLECTION)
              ezpayCheckoutSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayCheckoutSvcSubsMgmtApiKey: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_API_KEY)
              ezpayCheckoutSvcSubsMgmtServiceId: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayCheckoutSvcSessionExpiryInterval: $(EZPAY_CHECKOUT_SVC_SESSION_EXPIRY_INTERVAL)
              ezpayCheckoutSvcEzpayApiSvcGqlUrl: $(EZPAY_CHECKOUT_SVC_GQL_URL_EZPAY_API_SVC) 
              # EZPAY REPORTS SVC
              ezpayReportSvcImageRepositoryName: $(EZPAY_REPORT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayReportSvcReplicas: $(EZPAY_REPORT_SVC_REPLICAS)
              ezpayReportSvcNodeSelectorPool: $(EZPAY_REPORT_SVC_NODE_SELECTOR_POOL)
              ezpayReportSvcResourceLimitsCpu: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_CPU)
              ezpayReportSvcResourceLimitsMemory: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayReportSvcResourceRequestCpu: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayReportSvcResourceRequestMemory: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_MEMORY)
              mongoDbEzpayReportSvcCollectionName: $(MONGODB_EZPAY_REPORT_SVC_COLLECTION)
              ezpayReportSvcSbPlatformEventsSubscription: $(EZPAY_REPORT_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayReportSvcBroadcastPlatformEvents: $(EZPAY_REPORT_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayReportSvcProcessPlatformEvents: $(EZPAY_REPORT_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayReportSvcBlobUrl: $(EZPAY_REPORT_SVC_BLOB_URL)
              ezpayReportSvcBlobContainer: $(EZPAY_REPORT_SVC_BLOB_CONTAINER)
              ezpayReportSvcBlobConnString: $(EZPAY_REPORT_SVC_BLOB_CONNECTION_STRING)
              ezpayReportSvcBlobSasTokenTtlMinutes: $(EZPAY_REPORT_SVC_BLOB_SAS_TOKEN_TTL_MINUTES)
              ezpayReportSvcReportDocTtlMinutes: $(EZPAY_REPORT_SVC_REPORT_DOC_TTL_MINUTES)             

- stage: PRD_Ezpay_Helm_Deploy_West
  displayName: PRD (WEST) - Ezpay Svcs Helm Deploy
  dependsOn: PRD_Ezpay_Approval
  condition: false

  jobs:
  - deployment: Helm_Deploy
    displayName: Helm Deploy
    environment: ezpay-multi-cluster-prd

    pool:
      vmImage: 'ubuntu-latest'

    variables:
    - group: ezpay-prd
    - template: ../ezpay-svcs/helm-variables-prd.yaml
    - template: ../ezpay-svcs/region-overrides/helm-variables-prd-west.yaml

    strategy:
      runOnce:
        deploy:
          steps:
          - template: ../templates/load-tags.yaml
            parameters:
              tagName: 'ezpay_tags' 

          - template: ../ezpay-svcs/helm-deploy-step.yaml
            parameters:
              serviceConnection: 'AzDevOps-Pipeline-Principal-PRD'
              svcPrincipalClientId: $(SVC_PRINCIPAL_CLIENT_ID_PRD)
              svcPrincipalSecret: $(SVC_PRINCIPAL_SECRET_PRD)
              azureTenantId: $(AZURE_TENANT_ID)
              aksName: $(AKS_NAME)
              aksResourceGroup: $(AKS_RESOURCE_GROUP)
              containerRegistryName: $(CONTAINER_REGISTRY_NAME)
              chartRepositoryName: $(CHART_REPOSITORY_NAME)
              chartName: $(CHART_NAME)
              helmReleaseName: $(HELM_RELEASE_NAME)
              k8sNamespace: $(K8S_NAMESPACE)
              env: $(ENV)
              location: $(LOCATION)
              nodeJsEnv: 'production'
              # Common Configs
              wepayGrpcUrl: $(WEPAY_GRPC_URL)
              wepayBaseUrl: $(WEPAY_BASE_URL)
              wepayUploadBaseUrl: $(WEPAY_UPLOAD_BASE_URL)
              merchantPortalUrl: $(MERCHANT_PORTAL_URL)
              payerPortalUrl: $(PAYER_PORTAL_URL)
              apteanpayJsSdk: $(APTEAN_PAY_JS_SDK)
              serviceBusConnString: $(SB_CONN_STRING)
              wepayApiVersion: $(WEPAY_API_VERSION)
              wepayAppId: $(WEPAY_APP_ID)
              wepayAppToken: $(WEPAY_APP_TOKEN)
              serviceBusEventsTopic: $(SB_PLATFORM_EVENTS_TOPIC)
              serviceBusPlatformEventsTopicConnString: $(SB_PLATFORM_EVENTS_TOPIC_CONN_STRING)
              mongoDbConnString: $(MONGODB_CONN_STRING)
              mongoDbName: $(MONGODB_DB_NAME)
              mongoDbPaymentCancelRetriesCollectionName: $(MONGODB_PAYMENT_CANCEL_RETRIES_COLLECTION)
              mongoDbIdempotencyCollectionName: $(MONGODB_IDEMPOTENCY_COLLECTION)
              mongoDbEzpayApiSvcCollectionName: $(MONGODB_EZPAY_API_SVC_COLLECTION)
              mongoDbEmailNotificationSvcCollectionName: $(MONGODB_EMAIL_NOTIFICATIONS_SVC_COLLECTION)
              mongoDbPaymentsSvcCollectionName: $(MONGODB_PAYMENTS_SVC_COLLECTION)
              mongoDbTxnRecordsSvcCollectionName: $(MONGODB_TXN_RECORDS_SVC_COLLECTION)  
              mongoDbEzpayClaimSvcCollectionName: $(MONGODB_EZPAY_CLAIM_SVC_COLLECTION)
              newRelicCliApiKey: $(NEW_RELIC_CLI_API_KEY)
              newRelicAccountId: $(NEW_RELIC_ACCOUNT_ID)
              newRelicApiKey: $(NEW_RELIC_API_KEY)
              frontDoorId: $(FRONT_DOOR_ID)
              sentryDsn: $(SENTRY_DSN)
              # New Relic Agent Switches
              ezpayApiSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              erpIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              wepayIntegrationSvcNewRelicAgentEnabled: $(NEW_RELIC_AGENT_ENABLED)
              # Cancel Payment Retry Job
              paymentCancelRetryJobImageRepositoryName: $(PAYMENT_CANCEL_RETRY_JOB_IMAGE_REPOSITORY_NAME)
              paymentCancelRetryJobConfigCronSchedule: $(PAYMENT_CANCEL_RETRY_JOB_CRON_SCHEDULE)
              paymentCancelRetryJobConfigSuccessfulJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobConfigFailedJobHistoryLimit: $(PAYMENT_CANCEL_RETRY_JOB_FAILED_JOB_HISTORY_LIMIT)
              paymentCancelRetryJobNodeSelectorPool: $(PAYMENT_CANCEL_RETRY_JOB_NODE_SELECTOR_POOL)
              # ACCOUNT BALANCE UPDATE JOB
              acctBalanceJobImageRepositoryName: $(ACCT_BALANCE_JOB_IMAGE_REPOSITORY_NAME)
              acctBalanceJobSuccessfulJobHistoryLimit: $(ACCT_BALANCE_JOB_SUCCESSFUL_JOB_HISTORY_LIMIT)
              acctBalanceJobFailedJobHistoryLimit: $(ACCT_BALANCE_JOB_FAILED_JOB_HISTORY_LIMIT)
              acctBalanceJobCronSchedule: $(ACCT_BALANCE_JOB_CRON_SCHEDULE)
              acctBalanceJobNodeSelectorPool: $(ACCT_BALANCE_JOB_NODE_SELECTOR_POOL)  
              # EZPAY API SVC         
              ezpayApiSvcImageRepositoryName: $(EZPAY_API_SVC_IMAGE_REPOSITORY_NAME)
              ezpayApiSvcReplicas: $(EZPAY_API_SVC_REPLICAS)
              ezpayApiSvcNodeSelectorPool: $(EZPAY_API_SVC_NODE_SELECTOR_POOL)
              ezpayApiSvcResourceLimitsCpu: $(EZPAY_API_SVC_RESOURCE_LIMITS_CPU)
              ezpayApiSvcResourceLimitsMemory: $(EZPAY_API_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayApiSvcResourceRequestsCpu: $(EZPAY_API_SVC_RESOURCE_REQUESTS_CPU)
              ezpayApiSvcResourceRequestsMemory: $(EZPAY_API_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayApiSvcKongIngressUpstreamHostHeader: $(EZPAY_API_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayApiSvcKongIngressClass: $(EZPAY_API_SVC_KONG_INGRESS_CLASS)
              ezpayApiSvcCosdbConnString: $(EZPAY_API_SVC_COSMOSDB_CONN_STRING)
              ezpayApiSvcCosdbDatabase: $(EZPAY_API_SVC_COSMOSDB_DATABASE)
              ezpayApiSvcCosdbContainer: $(EZPAY_API_SVC_COSMOSDB_CONTAINER)
              ezpayApiSvcSbPlatformEventsSubscription: $(EZPAY_API_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayApiSvcAppInsightsKey: $(EZPAY_API_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              ezpayApiSvcB2cClientId: $(EZPAY_API_SVC_B2C_CLIENT_ID)
              ezpayApiSvcB2cDomainHost: $(EZPAY_API_SVC_B2C_DOMAIN_HOST)
              ezpayApiSvcB2cTenantId: $(EZPAY_API_SVC_B2C_TENANT_ID)
              ezpayApiSvcB2cPolicyName: $(EZPAY_API_SVC_B2C_POLICY_NAME)
              ezpayApiSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayApiSvcEzpayClaimSvcGrpcUrl: $(EZPAY_CLAIM_SVC_GRPC_URL)
              ezpayApiSvcSubsMgmtApiKey: $(EZPAY_API_SVC_SUBS_MGMT_API_KEY)
              ezpayApiSvcSubsMgmtServiceId: $(EZPAY_API_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayApiSvcPaymentPlatformFromPhoneNumber: $(PAYMENTS_PLATFORM_FROM_PHONE_NUMBER)
              ezpayApiSvcPaymentPlatformFromEmail: $(EZPAY_API_SVC_PAYMENTS_PLATFORM_FROM_EMAIL)
              ezpayApiSvcProcessPlatformEvents: $(EZPAY_API_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayApiSvcBlobStorageUrl: $(EZPAY_API_SVC_BLOB_STORAGE_URL)
              ezpayApiSvcEncryptPayerUrlToken: $(EZPAY_API_SVC_ENCRYPT_PAYER_URL_TOKEN)
              ezpayApiSvcEncryptKey: $(EZPAY_API_SVC_ENCRYPTION_KEY)
              ezpayApiSvcTosVersion: $(EZPAY_API_SVC_TOS_VERSION)
              ezpayApiSvcStatementsContainerName: $(EZPAY_API_SVC_STATEMENTS_CONTAINER_NAME)
              ezpayApiSvcInvoiceContainerName: $(EZPAY_API_SVC_INVOICE_CONTAINER_NAME)
              ezpayApiSvcInvoiceBlobConnString: $(EZPAY_API_SVC_INVOICE_BLOB_CONNECTION_STRING)
              ezpayApiSvcLogicAppUrlShortenerUrl: $(EZPAY_API_SVC_LOGIC_APP_URL_SHORTENER_URL)
              ezpayApiSvcProductApisOnly: $(EZPAY_API_SVC_PRODUCT_APIS_ONLY)
              ezpayApiSvcGrpcUrl: $(EZPAY_API_SVC_GRPC_URL)
              ezpayApiSvcBroadcastPlatformEvents: $(EZPAY_API_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayApiSvcNewRelicRecordMetricGql: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GQL)
              ezpayApiSvcNewRelicRecordMetricGrpc: $(EZPAY_API_SVC_NEW_RELIC_RECORD_METRIC_GRPC)
              ezpayApiSvcEzpayCheckoutSvcGrpcUrl: $(GRPC_URL_CHECKOUT_SVC)
              ezpayApiSvcEzpayReportSvcGrpcUrl: $(GRPC_URL_REPORT_SVC)
              # EMAIL NOTIFICATION SVC
              emailNotificationSvcImageRepositoryName: $(EMAIL_NOTIFICATION_SVC_IMAGE_REPOSITORY_NAME)
              emailNotificationSvcReplicas: $(EMAIL_NOTIFICATION_SVC_REPLICAS)
              emailNotificationSvcNodeSelectorPool: $(EMAIL_NOTIFICATION_SVC_NODE_SELECTOR_POOL)
              emailNotificationSvcResourceLimitsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_CPU)
              emailNotificationSvcResourceLimitsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_LIMITS_MEMORY)
              emailNotificationSvcResourceRequestsCpu: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_CPU)
              emailNotificationSvcResourceRequestsMemory: $(EMAIL_NOTIFICATION_SVC_RESOURCE_REQUESTS_MEMORY)
              emailNotificationSvcDbPlatformEventsSubscription: $(EMAIL_NOTIFICATION_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              emailNotificationSvcAppInsightsKey: $(EMAIL_NOTIFICATION_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              emailNotificationSvcBroadcastPlatformEvents: $(EMAIL_NOTIFICATION_SVC_BROADCAST_PLATFORM_EVENTS)
              emailNotificationSvcEmailTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              emailNotificationSvcPlatformEmail: $(EMAIL_NOTIFICATION_SVC_PLATFORM_EMAIL)
              emailNotificationSvcPlatformName: $(EMAIL_NOTIFICATION_SVC_PLATFORM_NAME)
              emailNotificationSvcProcessPlatformEvents: $(EMAIL_NOTIFICATION_SVC_PROCESS_PLATFORM_EVENTS)
              # ERP INTEGRATION SVC
              erpIntegrationSvcImageRepositoryName: $(ERP_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              erpIntegrationSvcReplicas: $(ERP_INTEGRATION_SVC_REPLICAS)
              erpIntegrationSvcNodeSelectorPool: $(ERP_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              erpIntegrationSvcResourceLimitsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              erpIntegrationSvcResourceLimitsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              erpIntegrationSvcResourceRequestsCpu: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              erpIntegrationSvcResourceRequestsMemory: $(ERP_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              erpIntegrationSvcKongIngressUpstreamHostHeader: $(ERP_INTEGRATION_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              erpIntegrationSvcKongIngressClass: $(ERP_INTEGRATION_SVC_KONG_INGRESS_CLASS)
              erpIntegrationSvcEzpayApiSvcGqlUrl: $(ERP_INTEGRATION_SVC_GQL_URL_EZPAY_API_SVC)
              erpIntegrationSvcSyncTimeout: $(ERP_INTEGRATION_SVC_SYNC_TIMEOUT)
              erpIntegrationSvcSyncMaxWaitTime: $(ERP_INTEGRATION_SVC_SYNC_MAX_WAIT_TIME)
              # MERCHANT OPS SVC
              merchantOpsSvcImageRepositoryName: $(MERCHANT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              merchantOpsSvcReplicas: $(MERCHANT_OPS_SVC_REPLICAS)
              merchantOpsSvcNodeSelectorPool: $(MERCHANT_OPS_SVC_NODE_SELECTOR_POOL)
              merchantOpsSvcResourceLimitsCpu: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_CPU)
              merchantOpsSvcResourceLimitsMemory: $(MERCHANT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              merchantOpsSvcResourceRequestsCpu: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              merchantOpsSvcResourceRequestsMemory: $(MERCHANT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              merchantOpsSvcPlatformEventsSubscription: $(MERCHANT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              merchantOpsSvcEnableAppInsights: $(MERCHANT_OPS_SVC_ENABLE_APP_INSIGHTS)
              merchantOpsSvcEnableK8sAppInsights: $(MERCHANT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)
              # PAYFAC NOTIFICATIONS SVC
              payfacNotificationsSvcImageRepositoryName: $(PAYFAC_NOTIFICATIONS_SVC_IMAGE_REPOSITORY_NAME)
              payfacNotificationsSvcReplicas: $(PAYFAC_NOTIFICATIONS_SVC_REPLICAS)
              payfacNotificationsSvcNodeSelectorPool: $(PAYFAC_NOTIFICATIONS_SVC_NODE_SELECTOR_POOL)
              payfacNotificationsSvcResourceLimitsCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_CPU)
              payfacNotificationsSvcResourceLimitsMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_LIMITS_MEMORY)
              payfacNotificationsSvcResourceRequestCpu: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_CPU)
              payfacNotificationsSvcResourceRequestMemory: $(PAYFAC_NOTIFICATIONS_SVC_RESOURCE_REQUESTS_MEMORY)
              payfacNotificationsSvcSbPayfacTopicConnString: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC_CONN_STRING)
              payfacNotificationsSvcSbPayfacSubscription: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_SUBSCRIPTION)
              payfacNotificationsSvcSbPayfacTopic: $(PAYFAC_NOTIFICATIONS_SVC_SB_PAYFAC_NOTIFICATIONS_TOPIC)
              payfacNotificationsSvcAppInsightsKey: $(PAYFAC_NOTIFICATIONS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              payfacNotificationsSvcEzpayWebhookUrl: $(PAYFAC_NOTIFICATIONS_SVC_EZPAY_WEBHOOK_URL)
              payfacNotificationsSvcProcessPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_PLATFORM_EVENTS)
              payfacNotificationsSvcProcessNotificationEvents: $(PAYFAC_NOTIFICATIONS_SVC_PROCESS_NOTIFICATION_EVENTS)
              payfacNotificationsSvcBroadcastPlatformEvents: $(PAYFAC_NOTIFICATIONS_SVC_BROADCAST_PLATFORM_EVENTS)
              # PAYMENT OPS SVC
              paymentOpsSvcImageRepositoryName: $(PAYMENT_OPS_SVC_IMAGE_REPOSITORY_NAME)
              paymentOpsSvcReplicas: $(PAYMENT_OPS_SVC_REPLICAS)
              paymentOpsSvcNodeSelectorPool: $(PAYMENT_OPS_SVC_NODE_SELECTOR_POOL)
              paymentOpsSvcResourceLimitsCpu: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_CPU)
              paymentOpsSvcResourceLimitsMemory: $(PAYMENT_OPS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentOpsSvcResourceRequestsCpu: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_CPU)
              paymentOpsSvcResourceRequestsMemory: $(PAYMENT_OPS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentOpsSvcSbPlatformEventsSubscription: $(PAYMENT_OPS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentOpsSvcSbEmailReqQueueConnString: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbEmailReqQueue: $(PAYMENT_OPS_SVC_SB_EMAIL_REQS_QUEUE)
              paymentOpsSvcSbSmsReqQueueConnString: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE_CONN_STRING)
              paymentOpsSvcSbSmsReqQueue: $(PAYMENT_OPS_SVC_SB_SMS_REQS_QUEUE)
              paymentOpsSvcEnableAppInsights: $(PAYMENT_OPS_SVC_ENABLE_APP_INSIGHTS)
              paymentOpsSvcEnableK8sAppInsights: $(PAYMENT_OPS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # PAYMENTS SVC & PAYMENTS RETRY JOB
              paymentsSvcImageRepositoryName: $(PAYMENTS_SVC_IMAGE_REPOSITORY_NAME)
              paymentsSvcReplicas: $(PAYMENTS_SVC_REPLICAS)
              paymentsSvcNodeSelectorPool: $(PAYMENTS_SVC_NODE_SELECTOR_POOL)
              paymentsSvcResourceLimitsCpu: $(PAYMENTS_SVC_RESOURCE_LIMITS_CPU)
              paymentsSvcResourceLimitsMemory: $(PAYMENTS_SVC_RESOURCE_LIMITS_MEMORY)
              paymentsSvcResourceRequestsCpu: $(PAYMENTS_SVC_RESOURCE_REQUESTS_CPU)
              paymentsSvcResourceRequestsMemory: $(PAYMENTS_SVC_RESOURCE_REQUESTS_MEMORY)
              paymentsSvcPlatformEventsSubscription: $(PAYMENTS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              paymentsSvcCronSchedule: $(PAYMENTS_SVC_CRON_SCHEDULE)
              paymentsSvcSuccessfulJobHistoryLimit: $(PAYMENTS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              paymentsSvcFailedJobHistoryLimit: $(PAYMENTS_SVC_FAILED_JOB_HISTORY_LIMIT)
              paymentsSvcEnableAppInsights: $(PAYMENTS_SVC_ENABLE_APP_INSIGHTS)
              paymentsSvcEnableK8sAppInsights: $(PAYMENTS_SVC_ENABLE_K8S_APP_INSIGHTS)  
              # TRANSACTION RECORDS SVC & TRANSACTION RECORDS RETRIEVE JOB & TRANSACTION RECORDS STATEMENT JOB               
              txnRecordsSvcImageRepositoryName: $(TXN_RECORDS_SVC_IMAGE_REPOSITORY_NAME)
              txnRecordsSvcReplicas: $(TXN_RECORDS_SVC_REPLICAS)
              txnRecordsSvcNodeSelectorPool: $(TXN_RECORDS_SVC_NODE_SELECTOR_POOL)
              txnRecordsSvcResourceLimitCpu: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_CPU)
              txnRecordsSvcResourceLimitMemory: $(TXN_RECORDS_SVC_RESOURCE_LIMITS_MEMORY)
              txnRecordsSvcResourceRequestCpu: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_CPU)
              txnRecordsSvcResourceRequestMemory: $(TXN_RECORDS_SVC_RESOURCE_REQUESTS_MEMORY)
              txnRecordsStmtsResourceLimitCpu: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_CPU)
              txnRecordsStmtsResourceLimitMemory: $(TXN_RECORDS_STMTS_RESOURCE_LIMITS_MEMORY)
              txnRecordsStmtsResourceRequestCpu: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_CPU)
              txnRecordsStmtsResourceRequestMemory: $(TXN_RECORDS_STMTS_RESOURCE_REQUESTS_MEMORY)                
              txnRecordsSvcBroadcastPlatformEvents: $(TXN_RECORDS_SVC_BROADCAST_PLATFORM_EVENTS)
              txnRecordsSvcPlatformEmail: $(TXN_RECORDS_SVC_PLATFORM_EMAIL)
              txnRecordsSvcDbPlatformEventsSubscription: $(TXN_RECORDS_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              txnRecordsSvcAppInsightsKey: $(TXN_RECORDS_SVC_APP_INSIGHTS_INSTRUMENTATION_KEY)
              txnRecordsSvcProcessPlatformEvents: $(TXN_RECORDS_SVC_PROCESS_PLATFORM_EVENTS)
              txnRecordsSvcStatementsContainer: $(TXN_RECORDS_SVC_STATEMENTS_CONTAINER_NAME)
              txnRecordsSvcStatementPeriod: $(TXN_RECORDS_SVC_STATEMENT_PERIOD)
              txnRecordsSvcStatementsBlobConnString: $(TXN_RECORDS_SVC_STATEMENTS_BLOB_CONNECTION_STRING)
              txnRecordsSvcGeneratePdfStatement: $(TXN_RECORDS_SVC_GENERATE_PDF_STATEMENT)
              txnRecordsSvcGenerateStatementChunkSize: $(TXN_RECORDS_SVC_GENERATE_STATEMENT_CHUNK_SIZE)
              txnRecordsSvcStatementTemplateLogoUrl: $(EZPAY_TEMPLATE_LOGO_URL)
              txnRecordsSvcCronSchedule: $(TXN_RECORDS_SVC_CRON_SCHEDULE)
              txnRecordsSvcSuccessfulJobHistoryLimit: $(TXN_RECORDS_SVC_SUCCESSFUL_JOB_HISTORY_LIMIT)
              txnRecordsSvcFailedJobHistoryLimit: $(TXN_RECORDS_SVC_FAILED_JOB_HISTORY_LIMIT)
              txnRecordsRetrieveJobChunkSize: $(TXN_RECORDS_RETRIEVE_JOB_CHUNK_SIZE)              
              # WEPAY INTEGRATION SVC
              wepayIntegrationSvcImageRepositoryName: $(WEPAY_INTEGRATION_SVC_IMAGE_REPOSITORY_NAME)
              wepayIntegrationSvcReplicas: $(WEPAY_INTEGRATION_SVC_REPLICAS)
              wepayIntegrationSvcNodeSelectorPool: $(WEPAY_INTEGRATION_SVC_NODE_SELECTOR_POOL)
              wepayIntegrationSvcResourceLimitsCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_CPU)
              wepayIntegrationSvcResourceLimitsMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_LIMITS_MEMORY)
              wepayIntegrationSvcResourceRequestCpu: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_CPU)
              wepayIntegrationSvcResourceRequestMemory: $(WEPAY_INTEGRATION_SVC_RESOURCE_REQUESTS_MEMORY)
              wepayIntegrationSvcNewRelicRecordMetric: $(WEPAY_INTEGRATION_SVC_NEW_RELIC_RECORD_METRIC)
              wepayIntegrationSvcRequestTimeout: $(WEPAY_INTEGRATION_SVC_REQUEST_TIMEOUT_MS)
              # EZPAY CLAIM SVC
              ezpayClaimSvcImageRepositoryName: $(EZPAY_CLAIM_SVC_IMAGE_REPOSITORY_NAME)
              ezpayClaimSvcReplicas: $(EZPAY_CLAIM_SVC_REPLICAS)
              ezpayClaimSvcNodeSelectorPool: $(EZPAY_CLAIM_SVC_NODE_SELECTOR_POOL)
              ezpayClaimSvcResourceLimitsCpu: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_CPU)
              ezpayClaimSvcResourceLimitsMemory: $(EZPAY_CLAIM_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayClaimSvcResourceRequestCpu: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_CPU)
              ezpayClaimSvcResourceRequestMemory: $(EZPAY_CLAIM_SVC_RESOURCE_REQUESTS_MEMORY)
              # EZPAY CHECKOUT SVC
              ezpayCheckoutSvcImageRepositoryName: $(EZPAY_CHECKOUT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayCheckoutSvcReplicas: $(EZPAY_CHECKOUT_SVC_REPLICAS)
              ezpayCheckoutSvcNodeSelectorPool: $(EZPAY_CHECKOUT_SVC_NODE_SELECTOR_POOL)
              ezpayCheckoutSvcResourceLimitsCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_CPU)
              ezpayCheckoutSvcResourceLimitsMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayCheckoutSvcResourceRequestCpu: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayCheckoutSvcResourceRequestMemory: $(EZPAY_CHECKOUT_SVC_RESOURCE_REQUESTS_MEMORY)
              ezpayCheckoutSvcKongIngressUpstreamHostHeader: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_UPSTREAM_HEADER)
              ezpayCheckoutSvcKongIngressClass: $(EZPAY_CHECKOUT_SVC_KONG_INGRESS_CLASS)
              mongoDbEzpayCheckoutSvcCollectionName: $(MONGODB_EZPAY_CHECKOUT_SVC_COLLECTION)
              ezpayCheckoutSvcSubsMgmtGrpcUrl: $(SUBS_MGMT_GRPC_URL)
              ezpayCheckoutSvcSubsMgmtApiKey: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_API_KEY)
              ezpayCheckoutSvcSubsMgmtServiceId: $(EZPAY_CHECKOUT_SVC_SUBS_MGMT_SERVICE_ID)
              ezpayCheckoutSvcSessionExpiryInterval: $(EZPAY_CHECKOUT_SVC_SESSION_EXPIRY_INTERVAL)
              ezpayCheckoutSvcEzpayApiSvcGqlUrl: $(EZPAY_CHECKOUT_SVC_GQL_URL_EZPAY_API_SVC)    
              # EZPAY REPORTS SVC
              ezpayReportSvcImageRepositoryName: $(EZPAY_REPORT_SVC_IMAGE_REPOSITORY_NAME)
              ezpayReportSvcReplicas: $(EZPAY_REPORT_SVC_REPLICAS)
              ezpayReportSvcNodeSelectorPool: $(EZPAY_REPORT_SVC_NODE_SELECTOR_POOL)
              ezpayReportSvcResourceLimitsCpu: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_CPU)
              ezpayReportSvcResourceLimitsMemory: $(EZPAY_REPORT_SVC_RESOURCE_LIMITS_MEMORY)
              ezpayReportSvcResourceRequestCpu: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_CPU)
              ezpayReportSvcResourceRequestMemory: $(EZPAY_REPORT_SVC_RESOURCE_REQUESTS_MEMORY)
              mongoDbEzpayReportSvcCollectionName: $(MONGODB_EZPAY_REPORT_SVC_COLLECTION)
              ezpayReportSvcSbPlatformEventsSubscription: $(EZPAY_REPORT_SVC_SB_PLATFORM_EVENTS_SUBSCRIPTION)
              ezpayReportSvcBroadcastPlatformEvents: $(EZPAY_REPORT_SVC_BROADCAST_PLATFORM_EVENTS)
              ezpayReportSvcProcessPlatformEvents: $(EZPAY_REPORT_SVC_PROCESS_PLATFORM_EVENTS)
              ezpayReportSvcBlobUrl: $(EZPAY_REPORT_SVC_BLOB_URL)
              ezpayReportSvcBlobContainer: $(EZPAY_REPORT_SVC_BLOB_CONTAINER)
              ezpayReportSvcBlobConnString: $(EZPAY_REPORT_SVC_BLOB_CONNECTION_STRING)
              ezpayReportSvcBlobSasTokenTtlMinutes: $(EZPAY_REPORT_SVC_BLOB_SAS_TOKEN_TTL_MINUTES)
              ezpayReportSvcReportDocTtlMinutes: $(EZPAY_REPORT_SVC_REPORT_DOC_TTL_MINUTES)        

- stage: PRD_Merchant_Portal_Deploy
  displayName: PRD - Merchant Portal Deployment
  dependsOn: PRD_Ezpay_Approval

  jobs:
    - template: ../templates/deploy-ezpay-static.yaml
      parameters:
        variableGroup: ezpay-merchant-prd
        targetEnvironment: ezpay-merchant-prd
        dropArtifactPath: $(Pipeline.Workspace)/merchant_portal_static_files/drop/prd.zip
        azureServiceConnection: AzDevOps-Pipeline-Principal-PRD

- stage: PRD_Payer_Portal_Deploy
  displayName: PRD - Payer Portal Deployment
  dependsOn: PRD_Ezpay_Approval

  jobs:
    - template: ../templates/deploy-ezpay-static.yaml
      parameters:
        variableGroup: ezpay-payer-prd
        targetEnvironment: ezpay-payer-prd
        dropArtifactPath: $(Pipeline.Workspace)/payer_portal_static_files/drop/prd.zip
        azureServiceConnection: AzDevOps-Pipeline-Principal-PRD

- stage: PRD_Static_Assets_Deploy
  displayName: PRD - Static Assets Deploy
  dependsOn: PRD_Ezpay_Approval

  jobs:
  - template: static-assets/azp-yaml/templates/ezpay-static-assets-deployment-job.yaml@ezpay-backend-services
    parameters:
      environment: ezpay-static-prd
      serviceConnection: AzDevOps-Pipeline-Principal-PRD
      storageAccount: stezpaytenantfilesprd001

- stage: PRD_Aptean_Pay_Js_Library_Deploy
  displayName: PRD - Aptean Pay JS Library Deployment
  dependsOn: PRD_Ezpay_Approval

  jobs:
    - template: ../templates/deploy-ezpay-static.yaml
      parameters:
        variableGroup: apteanpay-js-lib-prd
        targetEnvironment: apteanpay-js-prd
        dropArtifactPath: $(Pipeline.Workspace)/aptean_pay_js_static_files/drop/prd.zip
        azureServiceConnection: AzDevOps-Pipeline-Principal-PRD